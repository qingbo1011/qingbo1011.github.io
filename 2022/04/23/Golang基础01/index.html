<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Golang基础（一） | Qing's Blog</title><meta name="description" content="Golang基础（一） Go的学习网上有很多详细的博客文章，推荐：  Go语言中文文档    Go基础  Go语言的主要特征 Go语言的主要特征 思想：Less can be more 大道至简,小而蕴真 让事情变得复杂很容易，让事情变得简单才难 深刻的工程文化。 Go优点：  自带gc； 静态编译，编译好后，扔服务器直接运行； 简单的思想，没有继承，多态，类等； 丰富的库和详细的开发文档； 语"><meta name="keywords" content="Golang基础（一）"><meta name="author" content="qingbo,qingbo1011@163.com"><meta name="copyright" content="qingbo"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220501212415.jpg"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="dns-prefetch" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="crossorigin"/><link rel="dns-prefetch" href="https://fonts.googleapis.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="dns-prefetch" href="//busuanzi.ibruce.info"/><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Golang基础（一）"><meta name="twitter:description" content="Golang基础（一） Go的学习网上有很多详细的博客文章，推荐：  Go语言中文文档    Go基础  Go语言的主要特征 Go语言的主要特征 思想：Less can be more 大道至简,小而蕴真 让事情变得复杂很容易，让事情变得简单才难 深刻的工程文化。 Go优点：  自带gc； 静态编译，编译好后，扔服务器直接运行； 简单的思想，没有继承，多态，类等； 丰富的库和详细的开发文档； 语"><meta name="twitter:image" content="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220509153103.png"><meta property="og:type" content="article"><meta property="og:title" content="Golang基础（一）"><meta property="og:url" content="http://www.qingbo1011.top/2022/04/23/Golang%E5%9F%BA%E7%A1%8001/"><meta property="og:site_name" content="Qing's Blog"><meta property="og:description" content="Golang基础（一） Go的学习网上有很多详细的博客文章，推荐：  Go语言中文文档    Go基础  Go语言的主要特征 Go语言的主要特征 思想：Less can be more 大道至简,小而蕴真 让事情变得复杂很容易，让事情变得简单才难 深刻的工程文化。 Go优点：  自带gc； 静态编译，编译好后，扔服务器直接运行； 简单的思想，没有继承，多态，类等； 丰富的库和详细的开发文档； 语"><meta property="og:image" content="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220509153103.png"><meta property="article:published_time" content="2022-04-23T00:47:03.000Z"><meta property="article:modified_time" content="2023-10-03T08:16:11.761Z"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>var autoChangeMode = '1'
var t = Cookies.get("theme")
if (autoChangeMode == '1'){
  var isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
  var isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
  var isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined){
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport){
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour < 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
  }
  } else if (t == 'light') activateLightMode()
  else activateDarkMode()

} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="http://www.qingbo1011.top/2022/04/23/Golang%E5%9F%BA%E7%A1%8001/"><link rel="prev" title="Golang基础（二）" href="http://www.qingbo1011.top/2022/04/24/Golang%E5%9F%BA%E7%A1%8002/"><link rel="next" title="LeetCode刷题记录（Java）" href="http://www.qingbo1011.top/2021/11/26/LeetCode%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: true,
  highlightCopy: true,
  highlightLang: true,
  highlightShrink: 'false',
  isFontAwesomeV5: false,
  isPhotoFigcaption: true,
  islazyload: false,
  isanchor: true
  
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isSidebar: true  
  }</script><noscript><style>
#page-header {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 4.2.0"></head><body><canvas class="fireworks"></canvas><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220501212415.jpg" onerror="onerror=null;src='https://gitee.com/qingyu1011/blog_img/raw/master/img/20201006230440.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">87</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">81</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">15</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div></div></div><i class="fa fa-arrow-right on" id="toggle-sidebar" aria-hidden="true">     </i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#golang基础一"><span class="toc-number">1.</span> <span class="toc-text"> Golang基础（一）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#go基础"><span class="toc-number">2.</span> <span class="toc-text"> Go基础</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#go语言的主要特征"><span class="toc-number">2.1.</span> <span class="toc-text"> Go语言的主要特征</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#golang内置类型和内置函数"><span class="toc-number">2.2.</span> <span class="toc-text"> Golang内置类型和内置函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#值类型和引用类型"><span class="toc-number">2.2.1.</span> <span class="toc-text"> 值类型和引用类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#内置函数"><span class="toc-number">2.2.2.</span> <span class="toc-text"> 内置函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#init函数和main函数"><span class="toc-number">2.3.</span> <span class="toc-text"> Init函数和main函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#go相关命令"><span class="toc-number">2.4.</span> <span class="toc-text"> Go相关命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#go运算符"><span class="toc-number">2.5.</span> <span class="toc-text"> Go运算符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#go下划线_"><span class="toc-number">2.6.</span> <span class="toc-text"> Go下划线_</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#下划线在import中"><span class="toc-number">2.6.1.</span> <span class="toc-text"> 下划线在import中</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#下划线在代码中"><span class="toc-number">2.6.2.</span> <span class="toc-text"> 下划线在代码中</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#go变量和常量"><span class="toc-number">2.7.</span> <span class="toc-text"> Go变量和常量</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#变量"><span class="toc-number">2.7.1.</span> <span class="toc-text"> 变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#常量"><span class="toc-number">2.7.2.</span> <span class="toc-text"> 常量</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#iota"><span class="toc-number">2.7.2.1.</span> <span class="toc-text"> iota</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#go基本类型"><span class="toc-number">2.8.</span> <span class="toc-text"> Go基本类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#整型"><span class="toc-number">2.8.1.</span> <span class="toc-text"> 整型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#浮点型"><span class="toc-number">2.8.2.</span> <span class="toc-text"> 浮点型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#复数"><span class="toc-number">2.8.3.</span> <span class="toc-text"> 复数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#布尔值"><span class="toc-number">2.8.4.</span> <span class="toc-text"> 布尔值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#字符串"><span class="toc-number">2.8.5.</span> <span class="toc-text"> 字符串</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#字符串转义符"><span class="toc-number">2.8.5.1.</span> <span class="toc-text"> 字符串转义符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#多行字符串"><span class="toc-number">2.8.5.2.</span> <span class="toc-text"> 多行字符串</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#字符串的常用操作"><span class="toc-number">2.8.5.3.</span> <span class="toc-text"> 字符串的常用操作</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#byte和rune类型"><span class="toc-number">2.8.6.</span> <span class="toc-text"> byte和rune类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#类型转换"><span class="toc-number">2.8.7.</span> <span class="toc-text"> 类型转换</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#go的类型别名和自定义类型"><span class="toc-number">2.9.</span> <span class="toc-text"> Go的类型别名和自定义类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#自定义类型"><span class="toc-number">2.9.1.</span> <span class="toc-text"> 自定义类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#类型别名"><span class="toc-number">2.9.2.</span> <span class="toc-text"> 类型别名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#类型定义和类型别名的区别"><span class="toc-number">2.9.3.</span> <span class="toc-text"> 类型定义和类型别名的区别</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数组array"><span class="toc-number">2.10.</span> <span class="toc-text"> 数组array</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#一维数组"><span class="toc-number">2.10.1.</span> <span class="toc-text"> 一维数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#多维数组"><span class="toc-number">2.10.2.</span> <span class="toc-text"> 多维数组</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#切片slice"><span class="toc-number">3.</span> <span class="toc-text"> 切片Slice</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#创建切片"><span class="toc-number">3.1.</span> <span class="toc-text"> 创建切片</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#切片初始化"><span class="toc-number">3.2.</span> <span class="toc-text"> 切片初始化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#通过make来创建切片"><span class="toc-number">3.3.</span> <span class="toc-text"> 通过make来创建切片</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#append切片追加"><span class="toc-number">3.4.</span> <span class="toc-text"> append切片追加</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#slice扩容"><span class="toc-number">3.5.</span> <span class="toc-text"> slice扩容</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#slice复制"><span class="toc-number">3.6.</span> <span class="toc-text"> slice复制</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#切片遍历"><span class="toc-number">3.7.</span> <span class="toc-text"> 切片遍历</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数组和切片的内存布局"><span class="toc-number">3.8.</span> <span class="toc-text"> 数组和切片的内存布局</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#字符串和切片string-and-slice"><span class="toc-number">3.9.</span> <span class="toc-text"> 字符串和切片（string and slice）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数组or切片转字符串"><span class="toc-number">3.10.</span> <span class="toc-text"> 数组or切片转字符串</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#slice底层实现"><span class="toc-number">4.</span> <span class="toc-text"> Slice底层实现</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#map"><span class="toc-number">5.</span> <span class="toc-text"> Map</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#map定义"><span class="toc-number">5.1.</span> <span class="toc-text"> map定义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#map基本使用"><span class="toc-number">5.2.</span> <span class="toc-text"> map基本使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#判断某个键是否存在"><span class="toc-number">5.3.</span> <span class="toc-text"> 判断某个键是否存在</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#map的遍历"><span class="toc-number">5.4.</span> <span class="toc-text"> map的遍历</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#使用delete函数删除键值对"><span class="toc-number">5.5.</span> <span class="toc-text"> 使用delete()函数删除键值对</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#按照指定顺序遍历map"><span class="toc-number">5.6.</span> <span class="toc-text"> 按照指定顺序遍历map</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#元素为map类型的切片"><span class="toc-number">5.7.</span> <span class="toc-text"> 元素为map类型的切片</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#值为切片类型的map"><span class="toc-number">5.8.</span> <span class="toc-text"> 值为切片类型的map</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#map实现原理"><span class="toc-number">6.</span> <span class="toc-text"> Map实现原理</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#go指针"><span class="toc-number">7.</span> <span class="toc-text"> Go指针</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#go语言中的指针"><span class="toc-number">7.1.</span> <span class="toc-text"> Go语言中的指针</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#指针地址和指针类型"><span class="toc-number">7.1.1.</span> <span class="toc-text"> 指针地址和指针类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#指针取值"><span class="toc-number">7.1.2.</span> <span class="toc-text"> 指针取值</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#空指针"><span class="toc-number">7.2.</span> <span class="toc-text"> 空指针</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#new和make"><span class="toc-number">7.3.</span> <span class="toc-text"> new和make</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#new"><span class="toc-number">7.3.1.</span> <span class="toc-text"> new</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#make"><span class="toc-number">7.3.2.</span> <span class="toc-text"> make</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#new与make的区别"><span class="toc-number">7.3.3.</span> <span class="toc-text"> new与make的区别</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#结构体"><span class="toc-number">8.</span> <span class="toc-text"> 结构体</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#结构体的定义"><span class="toc-number">8.1.</span> <span class="toc-text"> 结构体的定义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#结构体实例化"><span class="toc-number">8.2.</span> <span class="toc-text"> 结构体实例化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#基本实例化"><span class="toc-number">8.2.1.</span> <span class="toc-text"> 基本实例化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#创建指针类型结构体"><span class="toc-number">8.2.2.</span> <span class="toc-text"> 创建指针类型结构体</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#取结构体的地址实例化"><span class="toc-number">8.2.3.</span> <span class="toc-text"> 取结构体的地址实例化</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#匿名结构体"><span class="toc-number">8.3.</span> <span class="toc-text"> 匿名结构体</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#结构体初始化"><span class="toc-number">8.4.</span> <span class="toc-text"> 结构体初始化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#使用键值对初始化"><span class="toc-number">8.4.1.</span> <span class="toc-text"> 使用键值对初始化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用值的列表初始化"><span class="toc-number">8.4.2.</span> <span class="toc-text"> 使用值的列表初始化</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#结构体内存布局"><span class="toc-number">8.5.</span> <span class="toc-text"> 结构体内存布局</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mapstruct的demo"><span class="toc-number">8.6.</span> <span class="toc-text"> Map+Struct的Demo</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#结构体的构造函数自己实现的"><span class="toc-number">8.7.</span> <span class="toc-text"> 结构体的构造函数（自己实现的）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#方法和接收者"><span class="toc-number">8.8.</span> <span class="toc-text"> 方法和接收者</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#指针类型的接收者"><span class="toc-number">8.8.1.</span> <span class="toc-text"> 指针类型的接收者</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#值类型的接收者"><span class="toc-number">8.8.2.</span> <span class="toc-text"> 值类型的接收者</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#什么时候应该使用指针类型接收者"><span class="toc-number">8.8.3.</span> <span class="toc-text"> 什么时候应该使用指针类型接收者</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#接收者的类型可以是任何类型"><span class="toc-number">8.8.4.</span> <span class="toc-text"> 接收者的类型可以是任何类型</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#结构体的匿名字段"><span class="toc-number">8.9.</span> <span class="toc-text"> 结构体的匿名字段</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#嵌套结构体"><span class="toc-number">8.10.</span> <span class="toc-text"> 嵌套结构体</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#嵌套匿名结构体"><span class="toc-number">8.10.1.</span> <span class="toc-text"> 嵌套匿名结构体</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#嵌套结构体的字段名冲突"><span class="toc-number">8.10.2.</span> <span class="toc-text"> 嵌套结构体的字段名冲突</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#结构体的继承"><span class="toc-number">8.11.</span> <span class="toc-text"> 结构体的“继承”</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#结构体字段的可见性"><span class="toc-number">8.12.</span> <span class="toc-text"> 结构体字段的可见性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#结构体与json序列化"><span class="toc-number">8.13.</span> <span class="toc-text"> 结构体与JSON序列化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#结构体标签tag"><span class="toc-number">8.14.</span> <span class="toc-text"> 结构体标签（Tag）</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#流程控制"><span class="toc-number">9.</span> <span class="toc-text"> 流程控制</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#条件语句if"><span class="toc-number">9.1.</span> <span class="toc-text"> 条件语句if</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#条件语句switch"><span class="toc-number">9.2.</span> <span class="toc-text"> 条件语句switch</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#条件语句select"><span class="toc-number">9.3.</span> <span class="toc-text"> 条件语句select</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#循环语句for"><span class="toc-number">9.4.</span> <span class="toc-text"> 循环语句for</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#循环语句range"><span class="toc-number">9.5.</span> <span class="toc-text"> 循环语句range</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#循环控制goto-break-continue"><span class="toc-number">9.6.</span> <span class="toc-text"> 循环控制goto、break、continue</span></a></li></ol></li></ol></div></div></div><div id="body-wrap"><div class="post-bg" id="nav" style="background-image: url(https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220509153103.png)"><div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">Qing's Blog</a></span><span class="pull_right menus"><div id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span></span></div><div id="post-info"><div id="post-title"><div class="posttitle">Golang基础（一）</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2022-04-23 08:47:03"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2022-04-23</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2023-10-03 16:16:11"><i class="fa fa-history" aria-hidden="true"></i> 更新于 2023-10-03</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Go/">Go</a></span></div><div class="meta-secondline"> <span class="post-meta-wordcount"><i class="post-meta__icon fa fa-file-word-o" aria-hidden="true"></i><span>字数总计:</span><span class="word-count">18.4k</span><span class="post-meta__separator">|</span><i class="post-meta__icon fa fa-clock-o" aria-hidden="true"></i><span>阅读时长: 73 分钟</span></span></div><div class="meta-thirdline"><span class="post-meta-pv-cv"><span class="post-meta__separator">|</span><i class="fa fa-eye post-meta__icon" aria-hidden="true"> </i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"><span class="post-meta__separator">|</span><i class="post-meta__icon fa fa-comment-o" aria-hidden="true"></i><span>评论数:</span><a href="/2022/04/23/Golang%E5%9F%BA%E7%A1%8001/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count comment-count" data-xid="/2022/04/23/Golang%E5%9F%BA%E7%A1%8001/" itemprop="commentCount"></span></a></span></div></div></div></div><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h1 id="golang基础一"><a class="markdownIt-Anchor" href="#golang基础一"></a> Golang基础（一）</h1>
<p>Go的学习网上有很多详细的博客文章，推荐：</p>
<ul>
<li><strong><a href="https://www.topgoer.com/" target="_blank" rel="noopener">Go语言中文文档</a></strong></li>
</ul>
<p><img src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220501213352.png" alt="" /></p>
<h1 id="go基础"><a class="markdownIt-Anchor" href="#go基础"></a> Go基础</h1>
<h2 id="go语言的主要特征"><a class="markdownIt-Anchor" href="#go语言的主要特征"></a> Go语言的主要特征</h2>
<p><a href="https://www.topgoer.com/go%E5%9F%BA%E7%A1%80/Go%E8%AF%AD%E8%A8%80%E7%9A%84%E4%B8%BB%E8%A6%81%E7%89%B9%E5%BE%81.html" target="_blank" rel="noopener">Go语言的主要特征</a></p>
<p>思想：Less can be more 大道至简,小而蕴真 让事情变得复杂很容易，让事情变得简单才难 深刻的工程文化。</p>
<p>Go优点：</p>
<ul>
<li>自带gc；</li>
<li>静态编译，编译好后，扔服务器直接运行；</li>
<li>简单的思想，没有继承，多态，类等；</li>
<li>丰富的库和详细的开发文档；</li>
<li>语法层支持并发，和拥有同步并发的channel类型，使并发开发变得非常方便；</li>
<li>简洁的语法，提高开发效率，同时提高代码的阅读性和可维护性；</li>
<li>超级简单的交叉编译，仅需更改环境变量。</li>
</ul>
<p>Go主要特征：</p>
<ol>
<li><strong>自动立即回收</strong>；</li>
<li>更丰富的内置类型；</li>
<li><strong>函数多返回值</strong>；</li>
<li>错误处理；</li>
<li>匿名函数和闭包；</li>
<li>类型和接口；</li>
<li><strong>并发编程</strong>；</li>
<li>反射；</li>
<li>语言交互性。</li>
</ol>
<p>golang文件命名：所有的go源码都是以 <code>.go</code>结尾。</p>
<p><strong>Go语言命名</strong>：</p>
<p>Go的函数、变量、常量、自定义类型、包(package)的命名方式遵循以下规则：</p>
<ol>
<li>首字符可以是任意的Unicode字符或者下划线</li>
<li>剩余字符可以是Unicode字符、下划线、数字</li>
<li>字符长度不限</li>
</ol>
<p>Go只有25个关键字：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">break</span>        <span class="keyword">default</span>      <span class="function"><span class="keyword">func</span>         <span class="title">interface</span>    <span class="title">select</span></span></span><br><span class="line"><span class="keyword">case</span>         <span class="keyword">defer</span>        <span class="keyword">go</span>           <span class="keyword">map</span>          <span class="keyword">struct</span></span><br><span class="line"><span class="keyword">chan</span>         <span class="keyword">else</span>         <span class="keyword">goto</span>         <span class="keyword">package</span>      <span class="keyword">switch</span></span><br><span class="line"><span class="keyword">const</span>        <span class="keyword">fallthrough</span>  <span class="keyword">if</span>           <span class="keyword">range</span>        <span class="keyword">type</span></span><br><span class="line"><span class="keyword">continue</span>     <span class="keyword">for</span>          <span class="keyword">import</span>       <span class="keyword">return</span>       <span class="keyword">var</span></span><br></pre></td></tr></table></figure>
<p>Go还有37个保留字：</p>
<ul>
<li>
<p>Constants：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">true</span>  <span class="literal">false</span>  <span class="literal">iota</span>  <span class="literal">nil</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>Types：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>  <span class="keyword">int8</span>  <span class="keyword">int16</span>  <span class="keyword">int32</span>  <span class="keyword">int64</span>  </span><br><span class="line"><span class="keyword">uint</span>  <span class="keyword">uint8</span>  <span class="keyword">uint16</span>  <span class="keyword">uint32</span>  <span class="keyword">uint64</span>  <span class="keyword">uintptr</span></span><br><span class="line"><span class="keyword">float32</span>  <span class="keyword">float64</span>  <span class="keyword">complex128</span>  <span class="keyword">complex64</span></span><br><span class="line"><span class="keyword">bool</span>  <span class="keyword">byte</span>  <span class="keyword">rune</span>  <span class="keyword">string</span>  error</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>Functions：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">make</span>  <span class="built_in">len</span>  <span class="built_in">cap</span>  <span class="built_in">new</span>  <span class="built_in">append</span>  <span class="built_in">copy</span>  <span class="built_in">close</span>  <span class="built_in">delete</span></span><br><span class="line"><span class="built_in">complex</span>  <span class="built_in">real</span>  <span class="built_in">imag</span></span><br><span class="line"><span class="built_in">panic</span>  <span class="built_in">recover</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>可见性：</p>
<ol>
<li><strong>声明在函数内部，是函数的本地值，类似private；</strong></li>
<li><strong>声明在函数外部，是对当前包可见(包内所有<code>.go</code>文件都可见)的全局值，类似protect；</strong></li>
<li><strong>声明在函数外部且首字母大写是所有包可见的全局值，类似public。</strong></li>
</ol>
<p>Go语言的四种主要声明方式：</p>
<ul>
<li>var（声明变量）</li>
<li>const（声明常量）</li>
<li>type（声明类型）</li>
<li>func（声明函数）</li>
</ul>
<p>最常用的，还是<code>:=</code>的使用。可以<strong>直接定义没有声明过的变量，且无需我们自己指定类型</strong>。例如：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">   num := <span class="number">1011</span></span><br><span class="line">   c := <span class="string">'x'</span></span><br><span class="line">   str := <span class="string">"hello"</span></span><br><span class="line">   fmt.Println(num)</span><br><span class="line">   fmt.Printf(<span class="string">"%c\n"</span>, c)</span><br><span class="line">   fmt.Println(str)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="golang内置类型和内置函数"><a class="markdownIt-Anchor" href="#golang内置类型和内置函数"></a> Golang内置类型和内置函数</h2>
<p><a href="https://www.topgoer.com/go%E5%9F%BA%E7%A1%80/Golang%E5%86%85%E7%BD%AE%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%87%BD%E6%95%B0.html" target="_blank" rel="noopener">Golang内置类型和函数</a></p>
<h3 id="值类型和引用类型"><a class="markdownIt-Anchor" href="#值类型和引用类型"></a> 值类型和引用类型</h3>
<ul>
<li>值类型：
<ol>
<li><code>bool</code></li>
<li><code>int</code>(32 or 64), <code>int8</code>, <code>int16</code>, <code>int32</code>, <code>int64</code></li>
<li><code>uint</code>(32 or 64), <code>uint8</code>(<code>byte</code>), <code>uint16</code>, <code>uint32</code>, <code>uint64</code></li>
<li><code>float32</code>, <code>float64</code></li>
<li><code>string</code></li>
<li><code>complex64</code>, <code>complex128</code>（复数）</li>
<li><code>array</code> (固定长度的数组)</li>
</ol>
</li>
<li>引用类型：
<ol>
<li><code>slice</code>（切片，或者叫序列数组）(<strong>最常用</strong>)</li>
<li><code>map</code>（映射）</li>
<li><code>chan</code>（管道）</li>
</ol>
</li>
</ul>
<p>例子：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">   <span class="keyword">var</span> isStudent <span class="keyword">bool</span></span><br><span class="line">   isStudent = <span class="literal">true</span></span><br><span class="line">   fmt.Println(isStudent)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="内置函数"><a class="markdownIt-Anchor" href="#内置函数"></a> 内置函数</h3>
<p>Go 语言拥有一些<strong>不需要进行导入操作就可以使用的内置函数</strong>。它们有时可以针对不同的类型进行操作，例如：<code>len</code>、<code>cap</code> 和 <code>append</code>，或必须用于系统级的操作，例如：<code>panic</code>。因此，它们需要直接获得编译器的支持。</p>
<ul>
<li><code>append</code>：用来追加元素到slice(或数组)中，返回修改后的slice(或数组)</li>
<li><code>close</code>：主要用来关闭channel</li>
<li><code>delete</code>：从map中删除key对应的value</li>
<li><code>panic</code>：停止常规的goroutine  （panic和recover：用来做错误处理）</li>
<li><code>recove</code>：允许程序定义goroutine的panic动作</li>
<li><code>real</code>：返回complex的实部   （complex、real imag：用于创建和操作复数）</li>
<li><code>imag</code>：返回complex的虚部</li>
<li><code>make</code>：用来分配内存，返回Type本身(只能应用于slice, map, channel)</li>
<li><code>new</code>：用来分配内存，主要用来分配值类型，比如int、struct。返回指向Type的指针</li>
<li><code>cap</code>：capacity是容量的意思，用于返回某个类型的最大容量（只能用于切片和 map）</li>
<li><code>copy</code>：用于复制和连接slice，返回复制的数目</li>
<li><code>len</code>：来求长度，比如string、array、slice、map、channel ，返回长度</li>
<li><code>print</code>、<code>println</code>：底层打印函数，在部署环境中建议使用 fmt 包</li>
</ul>
<p>内置接口error：</p>
<p><strong>返回值为String的都实现了error接口</strong>。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> error <span class="keyword">interface</span> &#123;</span><br><span class="line">        Error()    String</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="init函数和main函数"><a class="markdownIt-Anchor" href="#init函数和main函数"></a> Init函数和main函数</h2>
<p><a href="https://www.topgoer.com/go%E5%9F%BA%E7%A1%80/Init%E5%87%BD%E6%95%B0%E5%92%8Cmain%E5%87%BD%E6%95%B0.html" target="_blank" rel="noopener">Init函数和main函数</a></p>
<p>init函数：</p>
<p>go语言中<code>init</code>函数用于包(package)的初始化，该函数是go语言的一个重要特性。</p>
<p>特征如下：</p>
<ol>
<li><code>init</code>函数是用于程序执行前做包的初始化的函数，比如初始化包里的变量等</li>
<li>每个包可以拥有多个<code>init</code>函数</li>
<li>包的每个源文件也可以拥有多个<code>init</code>函数</li>
<li>同一个包中多个<code>init</code>函数的执行顺序go语言没有明确的定义(说明)</li>
<li>不同包的<code>init</code>函数按照包导入的依赖关系决定该初始化函数的执行顺序</li>
<li><code>init</code>函数<strong>不能被其他函数调用，而是在main函数执行之前，自动被调用</strong></li>
</ol>
<p>main函数：</p>
<p>Go语言程序的默认入口函数(主函数)：<code>func main()</code>。函数体用<code>｛｝</code>一对括号包裹。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//函数体</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>init函数和main函数的异同：</p>
<ul>
<li>
<p>相同点：</p>
<ul>
<li>两个函数在定义时不能有任何的参数和返回值，且Go程序自动调用。</li>
</ul>
</li>
<li>
<p>不同点：</p>
<ul>
<li>init可以应用于任意包中，且可以重复定义多个；</li>
<li>main函数只能用于main包中，且只能定义一个。</li>
</ul>
</li>
</ul>
<p>两个函数的执行顺序：</p>
<ul>
<li>对同一个go文件的<code>init()</code>调用顺序是从上到下的；</li>
<li>对同一个package中不同文件是按<strong>文件名字符串比较“从小到大”顺序</strong>调用各文件中的<code>init()</code>函数；</li>
<li>对于不同的package，如果不相互依赖的话，按照main包中&quot;<strong>先import的后调用</strong>&quot;的顺序调用其包中的<code>init()</code>，如果package存在依赖，则先调用最早被依赖的package中的<code>init()</code>，最后调用<code>main</code>函数。</li>
<li>如果<code>init</code>函数中使用了<code>println()</code>或者<code>print()</code>你会发现在执行过程中这两个不会按照你想象中的顺序执行。这两个函数官方只推荐在测试环境中使用，对于正式环境不要使用。</li>
</ul>
<h2 id="go相关命令"><a class="markdownIt-Anchor" href="#go相关命令"></a> Go相关命令</h2>
<p><a href="https://www.topgoer.com/go%E5%9F%BA%E7%A1%80/%E5%91%BD%E4%BB%A4.html" target="_blank" rel="noopener">命令</a></p>
<p>安装好golang环境后，有如下命令：</p>
<ul>
<li>go env：打印Go语言的环境信息</li>
<li>go run：编译并运行命令源码文件</li>
<li>go get：根据要求和实际情况从互联网上下载或更新指定的代码包及其依赖包，并对它们进行编译和安装</li>
<li>go build：编译我们指定的源码文件或代码包以及它们的依赖包</li>
<li>go install：用于编译并安装指定的代码包及它们的依赖包</li>
<li>go clean：删除掉执行其它命令时产生的一些文件和目录</li>
<li>go doc：打印附于Go语言程序实体上的文档。我们可以通过把程序实体的标识符作为该命令的参数来达到查看其文档的目的</li>
<li>go test：对Go语言编写的程序进行测试</li>
<li>go list：列出指定的代码包的信息</li>
<li>go fix：把指定代码包的所有Go语言源码文件中的旧版本代码修正为新版本的代码</li>
<li>go vet：用于检查Go语言源码中静态错误的简单工具</li>
<li>go tool pprof：交互式地访问概要文件的内容</li>
</ul>
<h2 id="go运算符"><a class="markdownIt-Anchor" href="#go运算符"></a> Go运算符</h2>
<p><a href="https://www.topgoer.com/go%E5%9F%BA%E7%A1%80/%E8%BF%90%E7%AE%97%E7%AC%A6.html" target="_blank" rel="noopener">运算符</a></p>
<p>Go 语言内置的运算符有：</p>
<ul>
<li>
<p>算术运算符</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>+</td>
<td>相加</td>
</tr>
<tr>
<td>-</td>
<td>相减</td>
</tr>
<tr>
<td>*</td>
<td>相乘</td>
</tr>
<tr>
<td>/</td>
<td>相除</td>
</tr>
<tr>
<td>%</td>
<td>求余</td>
</tr>
</tbody>
</table>
<blockquote>
<p>注意： <code>++</code>（自增）和<code>--</code>（自减）在Go语言中是单独的语句，并不是运算符。</p>
</blockquote>
</li>
<li>
<p>关系运算符</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>==</td>
<td>检查两个值是否相等，如果相等返回 True 否则返回 False。</td>
</tr>
<tr>
<td>!=</td>
<td>检查两个值是否不相等，如果不相等返回 True 否则返回 False。</td>
</tr>
<tr>
<td>&gt;</td>
<td>检查左边值是否大于右边值，如果是返回 True 否则返回 False。</td>
</tr>
<tr>
<td>&gt;=</td>
<td>检查左边值是否大于等于右边值，如果是返回 True 否则返回 False。</td>
</tr>
<tr>
<td>&lt;</td>
<td>检查左边值是否小于右边值，如果是返回 True 否则返回 False。</td>
</tr>
<tr>
<td>&lt;=</td>
<td>检查左边值是否小于等于右边值，如果是返回 True 否则返回 False。</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>逻辑运算符</p>
<table>
<thead>
<tr>
<th>&amp;&amp;</th>
<th>逻辑 AND 运算符。 如果两边的操作数都是 True，则为 True，否则为 False。</th>
</tr>
</thead>
<tbody>
<tr>
<td>ll</td>
<td>逻辑 OR 运算符。 如果两边的操作数有一个 True，则为 True，否则为 False。</td>
</tr>
<tr>
<td>!</td>
<td>逻辑 NOT 运算符。 如果条件为 True，则为 False，否则为 True。</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>位运算符</p>
<p>位运算符对整数在内存中的二进制位进行操作。</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>&amp;</td>
<td>参与运算的两数各对应的二进位相与。（两位均为1才为1）</td>
</tr>
<tr>
<td>l</td>
<td>参与运算的两数各对应的二进位相或。（两位有一个为1就为1）</td>
</tr>
<tr>
<td>^</td>
<td>参与运算的两数各对应的二进位相异或，当两对应的二进位相异时，结果为1。（两位不一样则为1）</td>
</tr>
<tr>
<td>&lt;&lt;</td>
<td>左移n位就是乘以2的n次方。“a&lt;&lt;b”是把a的各二进位全部左移b位，高位丢弃，低位补0。</td>
</tr>
<tr>
<td>&gt;&gt;</td>
<td>右移n位就是除以2的n次方。“a&gt;&gt;b”是把a的各二进位全部右移b位。</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>赋值运算符</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>=</td>
<td>简单的赋值运算符，将一个表达式的值赋给一个左值</td>
</tr>
<tr>
<td>+=</td>
<td>相加后再赋值</td>
</tr>
<tr>
<td>-=</td>
<td>相减后再赋值</td>
</tr>
<tr>
<td>*=</td>
<td>相乘后再赋值</td>
</tr>
<tr>
<td>/=</td>
<td>相除后再赋值</td>
</tr>
<tr>
<td>%=</td>
<td>求余后再赋值</td>
</tr>
<tr>
<td>&lt;&lt;=</td>
<td>左移后赋值</td>
</tr>
<tr>
<td>&gt;&gt;=</td>
<td>右移后赋值</td>
</tr>
<tr>
<td>&amp;=</td>
<td>按位与后赋值</td>
</tr>
<tr>
<td>l=</td>
<td>按位或后赋值</td>
</tr>
<tr>
<td>^=</td>
<td>按位异或后赋值</td>
</tr>
</tbody>
</table>
</li>
</ul>
<p>整体来说运算符和Java相比并没有什么区别。</p>
<p>给个例子：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">   <span class="keyword">var</span> score1 <span class="keyword">float64</span></span><br><span class="line">   <span class="keyword">var</span> score2 <span class="keyword">float64</span></span><br><span class="line">   fmt.Print(<span class="string">"请输入平时平时成绩："</span>)</span><br><span class="line">   fmt.Scan(&amp;score1)</span><br><span class="line">   fmt.Print(<span class="string">"请输入平时卷面成绩："</span>)</span><br><span class="line">   fmt.Scan(&amp;score2)</span><br><span class="line">   <span class="keyword">if</span> score1*<span class="number">0.4</span>+score2*<span class="number">0.6</span> &gt;=<span class="number">60</span> &#123;</span><br><span class="line">      fmt.Println(<span class="string">"合格！"</span>)</span><br><span class="line">   &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">      fmt.Println(<span class="string">"不合格！"</span>)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="go下划线_"><a class="markdownIt-Anchor" href="#go下划线_"></a> Go下划线_</h2>
<p><a href="https://www.topgoer.com/go%E5%9F%BA%E7%A1%80/%E4%B8%8B%E5%88%92%E7%BA%BF.html" target="_blank" rel="noopener">下划线</a></p>
<p>在Golang里，<code>_</code>是特殊标识符，用来忽略结果。</p>
<h3 id="下划线在import中"><a class="markdownIt-Anchor" href="#下划线在import中"></a> 下划线在import中</h3>
<p>在Golang里，import的作用是导入其他package。</p>
<p><code>import _</code>（如：import hello/imp）的作用：当导入一个包时，该包下的文件里所有init()函数都会被执行，然而，<strong>有些时候我们并不需要把整个包都导入进来，仅仅是是希望它执行init()函数而已</strong>。这个时候就可以使用 import 引用该包。即使用<code>import _ 包路径</code>，<strong>仅仅是为了调用该包的init()函数，无法通过包名来调用包中的其他函数。</strong></p>
<h3 id="下划线在代码中"><a class="markdownIt-Anchor" href="#下划线在代码中"></a> 下划线在代码中</h3>
<p>看个例子：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"os"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    buf := <span class="built_in">make</span>([]<span class="keyword">byte</span>, <span class="number">1024</span>)</span><br><span class="line">    f, _ := os.Open(<span class="string">"/Users/***/Desktop/text.txt"</span>)</span><br><span class="line">    <span class="keyword">defer</span> f.Close()</span><br><span class="line">    <span class="keyword">for</span> &#123;</span><br><span class="line">        n, _ := f.Read(buf)</span><br><span class="line">        <span class="keyword">if</span> n == <span class="number">0</span> &#123;</span><br><span class="line">            <span class="keyword">break</span>    </span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        os.Stdout.Write(buf[:n])</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>解释1：下划线<code>_</code>意思是忽略这个变量。比如os.Open，返回值为*os.File，error。普通写法是<code>f,err := os.Open(&quot;xxxxxxx&quot;)</code>。如果<strong>此时不需要知道返回的错误值</strong>，就可以用<code>f, _ := os.Open(&quot;xxxxxx&quot;)</code>，如此则忽略了error变量。</li>
<li>解释2：<code>_</code>表示占位符，意思是那个位置本应赋给某个值，但是我们不需要这个值，所以就把该值赋给下划线，意思是丢掉不要。这样编译器可以更好的优化，任何类型的单个值都可以丢给下划线。这种情况是占位用的，方法返回两个结果，而你只想要一个结果，那另一个就用<code>_</code>占位；而如果用变量的话，不使用，编译器是会报错的。</li>
</ul>
<blockquote>
<p>补充：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">"database/sql"</span></span><br><span class="line"><span class="keyword">import</span> _ <span class="string">"github.com/go-sql-driver/mysql"</span></span><br></pre></td></tr></table></figure>
<p><strong>第二个import就是不直接使用mysql包，只是执行一下这个包的init函数</strong>，把mysql的驱动注册到sql包里，然后程序里就可以使用sql包来访问mysql数据库了。</p>
</blockquote>
<h2 id="go变量和常量"><a class="markdownIt-Anchor" href="#go变量和常量"></a> Go变量和常量</h2>
<p><a href="https://www.topgoer.com/go%E5%9F%BA%E7%A1%80/%E5%8F%98%E9%87%8F%E5%92%8C%E5%B8%B8%E9%87%8F.html" target="_blank" rel="noopener">变量和常量</a></p>
<h3 id="变量"><a class="markdownIt-Anchor" href="#变量"></a> 变量</h3>
<p>变量（Variable）的功能是存储数据。不同的变量保存的数据类型可能会不一常见变量的数据类型有：整型、浮点型、布尔型等。</p>
<p>Go语言中的每一个变量都有自己的类型，并且<strong>变量必须经过声明才能开始使用</strong>。同一作用域内不支持重复声明，并且<strong>Go语言的变量声明后必须使用</strong>。</p>
<p>所以接下来看一下Go中变量的声明。</p>
<ul>
<li>
<p>标准声明：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> 变量名 变量类型</span><br><span class="line"><span class="keyword">var</span> name <span class="keyword">string</span></span><br><span class="line"><span class="keyword">var</span> age <span class="keyword">int</span></span><br><span class="line"><span class="keyword">var</span> isOk <span class="keyword">bool</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>批量变量：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> (</span><br><span class="line">    a <span class="keyword">string</span></span><br><span class="line">    b <span class="keyword">int</span></span><br><span class="line">    c <span class="keyword">bool</span></span><br><span class="line">    d <span class="keyword">float32</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>短变量声明</strong>：在函数内部，可以使用更简略的 <code>:=</code> 方式<strong>声明并初始化变量</strong>：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 全局变量m</span></span><br><span class="line"><span class="keyword">var</span> m = <span class="number">100</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   n := <span class="number">10</span></span><br><span class="line">   m := <span class="number">200</span> <span class="comment">// 此处声明局部变量m</span></span><br><span class="line">   fmt.Println(m, n)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果为：<code>200 10</code></p>
</li>
</ul>
<p>然后看一下变量初始化。</p>
<p>Go语言在声明变量的时候，会自动对变量对应的内存区域进行初始化操作。每个变量会被初始化成其类型的默认值，例如： 整型和浮点型变量的默认值为0。 字符串变量的默认值为空字符串。 布尔型变量默认为<code>false</code>。 切片、函数、指针变量的默认为<code>nil</code>。</p>
<p>我们也可在声明变量的时候为其指定初始值。变量初始化的标准格式如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">   <span class="keyword">var</span> 变量名 类型 = 表达式</span><br><span class="line">   <span class="keyword">var</span> name <span class="keyword">string</span> = <span class="string">"pprof.cn"</span></span><br><span class="line">   <span class="keyword">var</span> sex <span class="keyword">int</span> = <span class="number">1</span></span><br><span class="line"><span class="comment">// 有时候我们会将变量的类型省略，这个时候编译器会根据等号右边的值来推导变量的类型完成初始化。</span></span><br><span class="line">   <span class="keyword">var</span> name = <span class="string">"pprof.cn"</span></span><br><span class="line">   <span class="keyword">var</span> sex = <span class="number">1</span></span><br><span class="line"><span class="comment">// 一次初始化多个变量</span></span><br><span class="line">   <span class="keyword">var</span> name, sex = <span class="string">"pprof.cn"</span>, <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>最后注意一下匿名变量。<strong>在使用多重赋值时，如果想要忽略某个值，可以使用匿名变量（anonymous variable）</strong>。 匿名变量用一个下划线<code>_</code>表示，例如：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="keyword">var</span> x <span class="keyword">int</span></span><br><span class="line">   _, err := fmt.Scan(&amp;x)</span><br><span class="line">   <span class="keyword">if</span> err!=<span class="literal">nil</span> &#123;</span><br><span class="line">      fmt.Println(x)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>匿名变量不占用命名空间，不会分配内存，所以匿名变量之间不存在重复声明。 (在Lua等编程语言里，匿名变量也被叫做哑元变量。)</p>
<blockquote>
<p>注意：</p>
<ul>
<li>函数外的每个语句都必须以关键字开始（<code>var</code>、<code>const</code>、<code>func</code>等）</li>
<li><code>:=</code>不能使用在函数外！（<strong>所以全局变量不能使用:=</strong>）</li>
<li><code>_</code>多用于占位，表示忽略值</li>
</ul>
</blockquote>
<h3 id="常量"><a class="markdownIt-Anchor" href="#常量"></a> 常量</h3>
<p>相对于变量，常量是恒定不变的值，多用于定义程序运行期间不会改变的那些值。 常量的声明和变量声明非常类似，只是把<code>var</code>换成了<code>const</code>，<strong>常量在定义的时候必须赋值。</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> pi = <span class="number">3.1415</span></span><br><span class="line"><span class="keyword">const</span> e = <span class="number">2.7182</span></span><br></pre></td></tr></table></figure>
<p>声明了<code>pi</code>和<code>e</code>这两个常量之后，在整个程序运行期间它们的值都不能再发生变化了。</p>
<p>多个常量也可以一起声明：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    pi = <span class="number">3.1415</span></span><br><span class="line">    e = <span class="number">2.7182</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><code>const</code>同时声明多个常量时，<strong>如果省略了值则表示和上面一行的值相同</strong>。 例如：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    n1 = <span class="number">100</span></span><br><span class="line">    n2</span><br><span class="line">    n3</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>上面示例中，常量<code>n1、n2、n3</code>的值都是<code>100</code>。</p>
<h4 id="iota"><a class="markdownIt-Anchor" href="#iota"></a> iota</h4>
<p>iota是在Java中没有的。<code>iota</code>是<code>go</code>语言的常量计数器，<strong>只能在常量的表达式中使用</strong>。 <code>iota</code>在<code>const</code>关键字出现时将被重置为<code>0</code>。<code>const</code>中<strong>每新增一行常量声明将使<code>iota</code>计数一次</strong>(<code>iota</code>可理解为<code>const</code>语句块中的行索引)。</p>
<p>使用<code>iota</code>能简化定义，在定义枚举时很有用。</p>
<p>举个例子：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">        n1 = <span class="literal">iota</span> <span class="comment">//0</span></span><br><span class="line">        n2        <span class="comment">//1</span></span><br><span class="line">        n3        <span class="comment">//2</span></span><br><span class="line">        n4        <span class="comment">//3</span></span><br><span class="line">    )</span><br></pre></td></tr></table></figure>
<p>几个常见的iota示例：</p>
<ul>
<li>
<p>使用<code>_</code>跳过某些值：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">        n1 = <span class="literal">iota</span> <span class="comment">//0</span></span><br><span class="line">        n2        <span class="comment">//1</span></span><br><span class="line">        _</span><br><span class="line">        n4        <span class="comment">//3</span></span><br><span class="line">    )</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>iota</code>声明中间插队：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">        n1 = <span class="literal">iota</span> <span class="comment">//0</span></span><br><span class="line">        n2 = <span class="number">100</span>  <span class="comment">//100</span></span><br><span class="line">        n3 = <span class="literal">iota</span> <span class="comment">//2</span></span><br><span class="line">        n4        <span class="comment">//3</span></span><br><span class="line">    )</span><br><span class="line"><span class="keyword">const</span> n5 = <span class="literal">iota</span> <span class="comment">//0</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>定义数量级</strong> （这里的<code>&lt;&lt;</code>表示左移操作，<code>1&lt;&lt;10</code>表示将<code>1</code>的二进制表示向左移<code>10</code>位，也就是由<code>1</code>变成了<code>10000000000</code>，也就是十进制的<code>1024</code>。同理<code>2&lt;&lt;2</code>表示将<code>2</code>的二进制表示向左移<code>2</code>位，也就是由<code>10</code>变成了<code>1000</code>，也就是十进制的<code>8</code>。）</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">        _  = <span class="literal">iota</span></span><br><span class="line">        KB = <span class="number">1</span> &lt;&lt; (<span class="number">10</span> * <span class="literal">iota</span>)</span><br><span class="line">        MB = <span class="number">1</span> &lt;&lt; (<span class="number">10</span> * <span class="literal">iota</span>)</span><br><span class="line">        GB = <span class="number">1</span> &lt;&lt; (<span class="number">10</span> * <span class="literal">iota</span>)</span><br><span class="line">        TB = <span class="number">1</span> &lt;&lt; (<span class="number">10</span> * <span class="literal">iota</span>)</span><br><span class="line">        PB = <span class="number">1</span> &lt;&lt; (<span class="number">10</span> * <span class="literal">iota</span>)</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>多个<code>iota</code>定义在一行：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">        a, b = <span class="literal">iota</span> + <span class="number">1</span>, <span class="literal">iota</span> + <span class="number">2</span> <span class="comment">//1,2（ioat=0）</span></span><br><span class="line">        c, d                      <span class="comment">//2,3（ioat=1）</span></span><br><span class="line">        e, f                      <span class="comment">//3,4（ioat=2）</span></span><br><span class="line">    )</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="go基本类型"><a class="markdownIt-Anchor" href="#go基本类型"></a> Go基本类型</h2>
<p><a href="https://www.topgoer.com/go%E5%9F%BA%E7%A1%80/%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B.html" target="_blank" rel="noopener">基本类型</a></p>
<p><strong>Golang更明确数字类型的命名</strong>，支持 Unicode，支持常用数据结构。</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>长度(字节)</th>
<th>默认值</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>bool</td>
<td>1</td>
<td>false</td>
<td></td>
</tr>
<tr>
<td>byte</td>
<td>1</td>
<td>0</td>
<td>uint8（<strong>ASCII码字符</strong>）</td>
</tr>
<tr>
<td>rune</td>
<td>4</td>
<td>0</td>
<td>Unicode Code Point, int32（<strong>UTF-8字符</strong>）</td>
</tr>
<tr>
<td>int, uint</td>
<td>4或8</td>
<td>0</td>
<td>32 或 64 位</td>
</tr>
<tr>
<td>int8, uint8</td>
<td>1</td>
<td>0</td>
<td>-128 ~ 127, 0 ~ 255，byte是uint8 的别名</td>
</tr>
<tr>
<td>int16, uint16</td>
<td>2</td>
<td>0</td>
<td>-32768 ~ 32767, 0 ~ 65535</td>
</tr>
<tr>
<td>int32, uint32</td>
<td>4</td>
<td>0</td>
<td>-21亿~ 21亿, 0 ~ 42亿，rune是int32 的别名</td>
</tr>
<tr>
<td>int64, uint64</td>
<td>8</td>
<td>0</td>
<td>-9223372036854775808 ~ 9223372036854775807，0 ~ 18446744073709551615</td>
</tr>
<tr>
<td>float32</td>
<td>4</td>
<td>0.0</td>
<td></td>
</tr>
<tr>
<td>float64</td>
<td>8</td>
<td>0.0</td>
<td></td>
</tr>
<tr>
<td>complex64</td>
<td>8</td>
<td></td>
<td></td>
</tr>
<tr>
<td>complex128</td>
<td>16</td>
<td></td>
<td></td>
</tr>
<tr>
<td>uintptr</td>
<td>4或8</td>
<td></td>
<td>以存储指针的 uint32 或 uint64 整数</td>
</tr>
<tr>
<td>array</td>
<td></td>
<td></td>
<td>值类型</td>
</tr>
<tr>
<td>struct</td>
<td></td>
<td></td>
<td>值类型</td>
</tr>
<tr>
<td>string</td>
<td></td>
<td>“”</td>
<td>UTF-8 字符串</td>
</tr>
<tr>
<td>slice</td>
<td></td>
<td>nil</td>
<td>引用类型</td>
</tr>
<tr>
<td>map</td>
<td></td>
<td>nil</td>
<td>引用类型</td>
</tr>
<tr>
<td>channel</td>
<td></td>
<td>nil</td>
<td>引用类型</td>
</tr>
<tr>
<td>interface</td>
<td></td>
<td>nil</td>
<td>接口</td>
</tr>
<tr>
<td>function</td>
<td></td>
<td>nil</td>
<td>函数</td>
</tr>
</tbody>
</table>
<p>支持八进制、 六进制，以及科学记数法。标准库 math 定义了各数字类型取值范围。例如：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a, b, c, d := <span class="number">071</span>, <span class="number">0x1F</span>, <span class="number">1e9</span>, math.MinInt16</span><br></pre></td></tr></table></figure>
<p>空指针值 <code>nil</code>，而非Java的 null。</p>
<h3 id="整型"><a class="markdownIt-Anchor" href="#整型"></a> 整型</h3>
<p>整型分为以下两个大类：</p>
<ul>
<li>按长度分为：<code>int8</code>、<code>int16</code>、<code>int32</code>、<code>int64</code></li>
<li>对应的无符号整型：<code>uint8</code>、<code>uint16</code>、<code>uint32</code>、<code>uint64</code></li>
</ul>
<p>其中，<code>uint8</code>就是我们熟知的<code>byte</code>型，<code>int16</code>对应C语言中的<code>short</code>型，<code>int64</code>对应C语言中的<code>long</code>型。</p>
<h3 id="浮点型"><a class="markdownIt-Anchor" href="#浮点型"></a> 浮点型</h3>
<p>Go语言支持两种浮点型数：<code>float32</code>和<code>float64</code>。这两种浮点型数据格式遵循<code>IEEE 754</code>标准：</p>
<ul>
<li><code>float32</code> 的浮点数的最大范围约为<code>3.4e38</code>，可以使用常量定义：<code>math.MaxFloat32</code></li>
<li><code>float64</code> 的浮点数的最大范围约为 <code>1.8e308</code>，可以使用常量定义：<code>math.MaxFloat64</code></li>
</ul>
<h3 id="复数"><a class="markdownIt-Anchor" href="#复数"></a> 复数</h3>
<ul>
<li><code>complex64</code>的实部和虚部为32位</li>
<li><code>complex128</code>的实部和虚部为64位</li>
</ul>
<h3 id="布尔值"><a class="markdownIt-Anchor" href="#布尔值"></a> 布尔值</h3>
<p>Go语言中以<code>bool</code>类型进行声明布尔型数据，布尔型数据只有<code>true</code>和<code>false</code>两个值。</p>
<p>注意：布尔类型变量的默认值为false。Go 语言中<strong>不允许将整型强制转换为布尔型</strong>，布尔型无法参与数值运算，也无法与其他类型进行转换。</p>
<h3 id="字符串"><a class="markdownIt-Anchor" href="#字符串"></a> 字符串</h3>
<p>Go语言中的字符串以原生数据类型出现，使用字符串就像使用其他原生数据类型<code>int</code>、<code>bool</code>、<code>float32</code>、<code>float64</code> 等一样。 Go 语言里的字符串的内部实现使用UTF-8编码。 字符串的值为双引号<code>&quot;&quot;</code>中的内容，可以在Go语言的源码中直接添加非<code>ASCII</code>码字符，例如：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s1 := <span class="string">"hello"</span></span><br><span class="line">s2 := <span class="string">"你好"</span></span><br></pre></td></tr></table></figure>
<h4 id="字符串转义符"><a class="markdownIt-Anchor" href="#字符串转义符"></a> 字符串转义符</h4>
<p>Go 语言的字符串常见转义符包含回车、换行、单双引号、制表符等，如下表所示：</p>
<table>
<thead>
<tr>
<th>转义</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>\r</code></td>
<td>回车符（返回行首）</td>
</tr>
<tr>
<td><code>\n</code></td>
<td>换行符（直接跳到下一行的同列位置）</td>
</tr>
<tr>
<td><code>\t</code></td>
<td>制表符</td>
</tr>
<tr>
<td><code>\'</code></td>
<td>单引号<code>'</code></td>
</tr>
<tr>
<td><code>\&quot;</code></td>
<td>双引号<code>&quot;</code></td>
</tr>
<tr>
<td><code>\\</code></td>
<td>反斜杠<code>\</code></td>
</tr>
</tbody>
</table>
<p>举个例子：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">   <span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">      fmt.Println(<span class="string">" \"E:\\seastar\" "</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="多行字符串"><a class="markdownIt-Anchor" href="#多行字符串"></a> 多行字符串</h4>
<p>Go语言中要定义一个多行字符串时，就必须使用反引号字符(键盘Tab键的上方)：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">   <span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   s1 := <span class="string">`</span></span><br><span class="line"><span class="string">雄关漫道真如铁，</span></span><br><span class="line"><span class="string">而今迈步从头越。`</span></span><br><span class="line">   fmt.Println(s1)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>反引号间换行将被作为字符串中的换行，但是<strong>所有的转义字符均无效，文本将会原样输出。</strong></p>
<h4 id="字符串的常用操作"><a class="markdownIt-Anchor" href="#字符串的常用操作"></a> 字符串的常用操作</h4>
<table>
<thead>
<tr>
<th>方法</th>
<th>介绍</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>len(str)</code></td>
<td>求长度</td>
</tr>
<tr>
<td><code>+</code>或fmt.Sprintf</td>
<td>拼接字符串</td>
</tr>
<tr>
<td><code>strings.Split(s, sep)</code></td>
<td>分割</td>
</tr>
<tr>
<td><code>strings.Contains(s, substr)</code></td>
<td>判断是否包含</td>
</tr>
<tr>
<td><code>strings.HasPrefix(s, suffix)</code>，<code>strings.HasSuffix(s, suffix)</code></td>
<td>前缀/后缀判断</td>
</tr>
<tr>
<td><code>strings.Index(s, substr)</code>，<code>strings.LastIndex(s, substr)</code></td>
<td>子串出现的位置</td>
</tr>
<tr>
<td><code>strings.Join(a[]string, sep string)</code></td>
<td>join操作</td>
</tr>
</tbody>
</table>
<p>举个例子：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">   <span class="string">"fmt"</span></span><br><span class="line">   <span class="string">"strings"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   s := <span class="string">"hello"</span></span><br><span class="line">   fmt.Println(<span class="built_in">len</span>(s))       <span class="comment">// 5</span></span><br><span class="line"></span><br><span class="line">   split := strings.Split(s, <span class="string">"e"</span>)</span><br><span class="line">   fmt.Println(split)    <span class="comment">// [h llo]</span></span><br><span class="line">   <span class="keyword">for</span> i := <span class="keyword">range</span> split &#123; <span class="comment">// 依次输出h，llo</span></span><br><span class="line">      fmt.Println(split[i])</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   fmt.Println(strings.Contains(s,<span class="string">"ll"</span>))  <span class="comment">// true</span></span><br><span class="line">   fmt.Println(strings.HasPrefix(s, <span class="string">"he"</span>))    <span class="comment">// true</span></span><br><span class="line">   fmt.Println(strings.HasSuffix(s, <span class="string">"loo"</span>))   <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line">   fmt.Println(strings.Index(s, <span class="string">"l"</span>))    <span class="comment">// 2</span></span><br><span class="line">   fmt.Println(strings.LastIndex(s, <span class="string">"l"</span>)) <span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line">   fmt.Println(strings.Join(split,<span class="string">","</span>))      <span class="comment">// h,llo</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="byte和rune类型"><a class="markdownIt-Anchor" href="#byte和rune类型"></a> byte和rune类型</h3>
<p>组成每个字符串的元素叫做“字符”，可以通过遍历或者单个获取字符串元素获得字符。 字符用单引号<code>’</code>包裹起来，如：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a := <span class="string">'中'</span></span><br><span class="line"><span class="keyword">var</span> b := <span class="string">'x'</span></span><br></pre></td></tr></table></figure>
<p>Go 语言的字符有以下两种：</p>
<ul>
<li><code>uint8</code>类型(或者叫 <code>byte</code> 型)：代表一个<strong>ASCII码字符</strong></li>
<li><code>rune</code>类型：代表一个<strong>UTF-8字符</strong>。</li>
</ul>
<p><strong>字符串底层是一个byte数组</strong>，所以可以和[]byte类型相互转换。字符串是由byte字节组成，所以<strong>字符串的长度是byte字节的长度</strong>。</p>
<p>rune类型用来表示utf8字符，一个rune字符由一个或多个byte组成。</p>
<h3 id="类型转换"><a class="markdownIt-Anchor" href="#类型转换"></a> 类型转换</h3>
<p><strong>Go语言中只有强制类型转换，没有隐式类型转换</strong>。该语法只能在两个类型之间支持相互转换的时候使用。</p>
<p>强制类型转换的基本语法如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">T(表达式)</span><br></pre></td></tr></table></figure>
<p>其中，T表示要转换的类型。表达式包括变量、复杂算子和函数返回值等。</p>
<p>举个例子，比如计算直角三角形的斜边长时使用math包的Sqrt()函数，该函数接收的是float64类型的参数，而变量a和b都是int类型的，这个时候就需要将a和b强制类型转换为float64类型：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sqrtDemo</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="keyword">var</span> a, b = <span class="number">3</span>, <span class="number">4</span></span><br><span class="line">   <span class="keyword">var</span> c <span class="keyword">int</span></span><br><span class="line">   <span class="comment">// math.Sqrt()接收的参数是float64类型，需要强制转换</span></span><br><span class="line">   c = <span class="keyword">int</span>(math.Sqrt(<span class="keyword">float64</span>(a*a + b*b)))</span><br><span class="line">   fmt.Println(c)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="go的类型别名和自定义类型"><a class="markdownIt-Anchor" href="#go的类型别名和自定义类型"></a> Go的类型别名和自定义类型</h2>
<h3 id="自定义类型"><a class="markdownIt-Anchor" href="#自定义类型"></a> 自定义类型</h3>
<p>在Go语言中有一些基本的数据类型，如string、整型、浮点型、布尔等数据类型，Go语言中可以使用<code>type</code>关键字来定义<strong>自定义类型</strong>。</p>
<p><strong>自定义类型是定义了一个全新的类型</strong>。我们可以基于内置的基本类型定义，也可以通过<code>struct</code>定义。例如：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//将MyInt定义为int类型</span></span><br><span class="line"><span class="keyword">type</span> MyInt <span class="keyword">int</span></span><br></pre></td></tr></table></figure>
<p>通过<code>type</code>关键字的定义，MyInt就是一种新的类型，它具有int的特性。</p>
<h3 id="类型别名"><a class="markdownIt-Anchor" href="#类型别名"></a> 类型别名</h3>
<p>类型别名是<code>Go1.9</code>版本添加的新功能。</p>
<p>类型别名规定：<strong>TypeAlias只是Type的别名，本质上TypeAlias与Type是同一个类型</strong>。就像一个孩子小时候有小名、乳名，上学后用学名，英语老师又会给他起英文名，但这些名字都指的是他本人。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> TypeAlias = Type</span><br></pre></td></tr></table></figure>
<p>之前见过的<code>rune</code>和<code>byte</code>就是类型别名，在Go源码中：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// rune is an alias for int32 and is equivalent to int32 in all ways. It is</span></span><br><span class="line"><span class="comment">// used, by convention, to distinguish character values from integer values.</span></span><br><span class="line"><span class="keyword">type</span> <span class="keyword">rune</span> = <span class="keyword">int32</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// byte is an alias for uint8 and is equivalent to uint8 in all ways. It is</span></span><br><span class="line"><span class="comment">// used, by convention, to distinguish byte values from 8-bit unsigned</span></span><br><span class="line"><span class="comment">// integer values.</span></span><br><span class="line"><span class="keyword">type</span> <span class="keyword">byte</span> = <span class="keyword">uint8</span></span><br></pre></td></tr></table></figure>
<h3 id="类型定义和类型别名的区别"><a class="markdownIt-Anchor" href="#类型定义和类型别名的区别"></a> 类型定义和类型别名的区别</h3>
<p>类型别名与类型定义表面上看只有一个等号<code>=</code>的差异，可以通过以下代码看一下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 类型定义</span></span><br><span class="line"><span class="keyword">type</span> NewInt <span class="keyword">int</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 类型别名</span></span><br><span class="line"><span class="keyword">type</span> MyInt = <span class="keyword">int</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="keyword">var</span> a NewInt</span><br><span class="line">   <span class="keyword">var</span> b MyInt</span><br><span class="line"></span><br><span class="line">   fmt.Printf(<span class="string">"%T\n"</span>, a)  <span class="comment">// main.NewInt</span></span><br><span class="line">   fmt.Printf(<span class="string">"%T\n"</span>, b)  <span class="comment">// int</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="数组array"><a class="markdownIt-Anchor" href="#数组array"></a> 数组array</h2>
<p><a href="https://www.topgoer.com/go%E5%9F%BA%E7%A1%80/%E6%95%B0%E7%BB%84Array.html" target="_blank" rel="noopener">数组Array</a></p>
<p>Golang的array和以往认知的数组有很大不同。</p>
<p>1.数组是同一种数据类型的固定长度的序列。 数组定义：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a [<span class="built_in">len</span>]<span class="keyword">int</span></span><br></pre></td></tr></table></figure>
<p>比如：<code>var a [5]int</code>，<strong>数组长度必须是常量，且是类型的组成部分。一旦定义，长度不能变</strong>。长度是数组类型的一部分，因此，<code>var a[5] int</code>和var <code>a[10]int</code>是<strong>不同的类型</strong>。</p>
<p>2.数组可以通过下标进行访问，下标是<strong>从0开始，最后一个元素下标是len-1</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(a); i++ &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> index, v := <span class="keyword">range</span> a &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3.<strong>访问越界</strong>：如果下标在数组合法范围之外，则触发访问越界，会<code>panic</code></p>
<p>4.数组是<strong>值类型</strong>，赋值和传参会复制整个数组，而不是指针。因此<strong>改变副本的值，不会改变本身的值。</strong></p>
<p>5.<strong>支持 <code>==</code>、<code>!=</code> 操作符</strong>，因为内存总是被初始化过的。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   arr1 := [<span class="number">3</span>]<span class="keyword">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;</span><br><span class="line">   arr2 := [<span class="number">3</span>]<span class="keyword">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;</span><br><span class="line">   fmt.Println(arr1==arr2)    <span class="comment">// true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>6.注意指针数组 <code>[n]*T</code>和数组指针 <code>*[n]T</code>的区别。</p>
<h3 id="一维数组"><a class="markdownIt-Anchor" href="#一维数组"></a> 一维数组</h3>
<p>一维数组初始化：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 全局</span></span><br><span class="line"><span class="keyword">var</span> arr0 [<span class="number">5</span>]<span class="keyword">int</span> = [<span class="number">5</span>]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line"><span class="keyword">var</span> arr1 = [<span class="number">5</span>]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line"><span class="keyword">var</span> arr2 = [...]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>&#125;</span><br><span class="line"><span class="keyword">var</span> str = [<span class="number">5</span>]<span class="keyword">string</span>&#123;<span class="number">3</span>: <span class="string">"hello world"</span>, <span class="number">4</span>: <span class="string">"tom"</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// 局部</span></span><br><span class="line">   a := [<span class="number">3</span>]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>&#125;           <span class="comment">// 未初始化元素值为 0。</span></span><br><span class="line">   b := [...]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;   <span class="comment">// 通过初始化值确定数组长度。</span></span><br><span class="line">   c := [<span class="number">5</span>]<span class="keyword">int</span>&#123;<span class="number">2</span>: <span class="number">100</span>, <span class="number">4</span>: <span class="number">200</span>&#125; <span class="comment">// 使用引号初始化元素。</span></span><br><span class="line">   d := [...]<span class="keyword">struct</span> &#123;</span><br><span class="line">      name <span class="keyword">string</span></span><br><span class="line">      age  <span class="keyword">uint8</span></span><br><span class="line">   &#125;&#123;</span><br><span class="line">      &#123;<span class="string">"user1"</span>, <span class="number">10</span>&#125;, <span class="comment">// 可省略元素类型。</span></span><br><span class="line">      &#123;<span class="string">"user2"</span>, <span class="number">20</span>&#125;, <span class="comment">// 别忘了最后一行的逗号。</span></span><br><span class="line">   &#125;</span><br><span class="line">   fmt.Println(arr0, arr1, arr2, str)</span><br><span class="line">   fmt.Println(a, b, c, d)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果如下：</p>
<p><img src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220501213452.png" alt="" /></p>
<h3 id="多维数组"><a class="markdownIt-Anchor" href="#多维数组"></a> 多维数组</h3>
<p>二维数组初始化：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 全局</span></span><br><span class="line"><span class="keyword">var</span> arr0 [<span class="number">5</span>][<span class="number">3</span>]<span class="keyword">int</span></span><br><span class="line"><span class="keyword">var</span> arr1 [<span class="number">2</span>][<span class="number">3</span>]<span class="keyword">int</span> = [...][<span class="number">3</span>]<span class="keyword">int</span>&#123;&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;, &#123;<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>&#125;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="comment">// 局部</span></span><br><span class="line">   a := [<span class="number">2</span>][<span class="number">3</span>]<span class="keyword">int</span>&#123;&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;, &#123;<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>&#125;&#125;</span><br><span class="line">   b := [...][<span class="number">2</span>]<span class="keyword">int</span>&#123;&#123;<span class="number">1</span>, <span class="number">1</span>&#125;, &#123;<span class="number">2</span>, <span class="number">2</span>&#125;, &#123;<span class="number">3</span>, <span class="number">3</span>&#125;&#125;    <span class="comment">// 第 2 纬度不能用 "..."。</span></span><br><span class="line">   fmt.Println(arr0, arr1)</span><br><span class="line">   fmt.Println(a, b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注意在二维数组中第 2 纬度不能用 <code>...</code>。</p>
<p>上面已经说到过了，数组是<strong>值类型</strong>，赋值和传参会复制整个数组，而不是指针。因此<strong>改变副本的值，不会改变本身的值</strong>。<strong>值拷贝行为会造成性能问题，通常会建议使用 slice，或数组指针。</strong></p>
<p>内置函数 <code>len</code> 和 <code>cap</code> 都返回数组长度 (元素数量)：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   a := [...][<span class="number">3</span>]<span class="keyword">int</span>&#123;&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;, &#123;<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>&#125;&#125;</span><br><span class="line">   fmt.Println(<span class="built_in">len</span>(a), <span class="built_in">len</span>(a[<span class="number">0</span>])) <span class="comment">// 2 3</span></span><br><span class="line">   fmt.Println(<span class="built_in">cap</span>(a), <span class="built_in">cap</span>(a[<span class="number">0</span>])) <span class="comment">// 2 3</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>二维数组遍历：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   arrs := [...][<span class="number">3</span>]<span class="keyword">int</span>&#123;</span><br><span class="line">      &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;,</span><br><span class="line">      &#123;<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;,</span><br><span class="line">      &#123;<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>&#125;,</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">for</span> i, arr := <span class="keyword">range</span> arrs &#123;</span><br><span class="line">      <span class="keyword">for</span> j, v := <span class="keyword">range</span> arr &#123;</span><br><span class="line">         fmt.Printf(<span class="string">"(%d,%d)=%d "</span>,i,j,v)</span><br><span class="line">      &#125;</span><br><span class="line">      fmt.Println()  <span class="comment">// 换行</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>也可以这么用：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   arrs := [...][<span class="number">3</span>]<span class="keyword">int</span>&#123;</span><br><span class="line">      &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;,</span><br><span class="line">      &#123;<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;,</span><br><span class="line">      &#123;<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>&#125;,</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">for</span> i := <span class="keyword">range</span> arrs &#123;</span><br><span class="line">      <span class="keyword">for</span> j := <span class="keyword">range</span> arrs[i] &#123;</span><br><span class="line">         fmt.Println(arrs[i][j])</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr />
<h1 id="切片slice"><a class="markdownIt-Anchor" href="#切片slice"></a> 切片Slice</h1>
<p><a href="https://www.topgoer.com/go%E5%9F%BA%E7%A1%80/%E5%88%87%E7%89%87Slice.html" target="_blank" rel="noopener">切片Slice</a></p>
<p>需要说明，slice 并不是数组或数组指针。它通过内部指针和相关属性引用数组片段，以实现变长方案。</p>
<p>1.切片是数组的一个引用，因此<strong>切片是引用类型</strong>。<strong>但自身是结构体，值拷贝传递。</strong></p>
<p>2.切片的长度可以改变，因此，切片是一个可变的数组。</p>
<p>3.切片遍历方式和数组一样，可以用<code>len()</code>求长度，表示可用元素数量，读写操作不能超过该限制。</p>
<p>4.<code>cap()</code>可以求出slice最大扩张容量，不能超出数组限制。<code>0 &lt;= len(slice) &lt;= len(array)</code>，其中array是slice引用的数组。</p>
<p>5.切片的定义：<code>var 变量名 []类型</code>，比如 ：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str []<span class="keyword">string</span></span><br><span class="line"><span class="keyword">var</span> arr []<span class="keyword">int</span></span><br></pre></td></tr></table></figure>
<p>6.如果 <code>slice == nil</code>，那么 len、cap 结果都等于 0。</p>
<h2 id="创建切片"><a class="markdownIt-Anchor" href="#创建切片"></a> 创建切片</h2>
<p>首先看一下创建切片的各种方式：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="comment">//1.声明切片</span></span><br><span class="line">   <span class="keyword">var</span> s1 []<span class="keyword">int</span></span><br><span class="line">   <span class="keyword">if</span> s1 == <span class="literal">nil</span> &#123;</span><br><span class="line">      fmt.Println(<span class="string">"s1是空"</span>)</span><br><span class="line">   &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      fmt.Println(<span class="string">"s1不是空"</span>)</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">// 2.:=</span></span><br><span class="line">   s2 := []<span class="keyword">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>&#125;</span><br><span class="line">   <span class="comment">// 3.make()</span></span><br><span class="line">   s3 := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">3</span>)</span><br><span class="line">   fmt.Println(s1, s2, s3)       <span class="comment">// [] [1 2] [0 0 0]</span></span><br><span class="line">   <span class="comment">// 4.初始化赋值</span></span><br><span class="line">   s4 := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">2</span>, <span class="number">5</span>)       <span class="comment">// [0 0]（切片长度len为2，容量cap为5）</span></span><br><span class="line">   fmt.Println(s4)</span><br><span class="line">   s5 := []<span class="keyword">int</span>&#123;<span class="number">9</span>,<span class="number">8</span>,<span class="number">7</span>&#125;</span><br><span class="line">   fmt.Println(s5)       <span class="comment">// [9 8 7]</span></span><br><span class="line">   <span class="comment">// 5.从数组切片</span></span><br><span class="line">   arr := [<span class="number">5</span>]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line">   s6 := arr[<span class="number">1</span>:<span class="number">4</span>] <span class="comment">// 前闭后开</span></span><br><span class="line">   fmt.Println(s6)    <span class="comment">// [2 3 4]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可以看到，用var声明切片和声明数组的区别就在于：<strong>数组要在定义的时候就指定长度</strong>，而切片不用：</p>
<ul>
<li>声明数组：<code>var arr [5]int</code></li>
<li>声明切片：<code>var s1 []int</code></li>
</ul>
<h2 id="切片初始化"><a class="markdownIt-Anchor" href="#切片初始化"></a> 切片初始化</h2>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">全局：</span><br><span class="line"><span class="keyword">var</span> arr = [...]<span class="keyword">int</span>&#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>&#125;</span><br><span class="line"><span class="keyword">var</span> slice0 []<span class="keyword">int</span> = arr[start:end] </span><br><span class="line"><span class="keyword">var</span> slice1 []<span class="keyword">int</span> = arr[:end]        </span><br><span class="line"><span class="keyword">var</span> slice2 []<span class="keyword">int</span> = arr[start:]        </span><br><span class="line"><span class="keyword">var</span> slice3 []<span class="keyword">int</span> = arr[:] </span><br><span class="line"><span class="keyword">var</span> slice4 = arr[:<span class="built_in">len</span>(arr)<span class="number">-1</span>]      <span class="comment">//去掉切片的最后一个元素</span></span><br><span class="line">局部：</span><br><span class="line">arr2 := [...]<span class="keyword">int</span>&#123;<span class="number">9</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">0</span>&#125;</span><br><span class="line">slice5 := arr[start:end]</span><br><span class="line">slice6 := arr[:end]        </span><br><span class="line">slice7 := arr[start:]     </span><br><span class="line">slice8 := arr[:]  </span><br><span class="line">slice9 := arr[:<span class="built_in">len</span>(arr)<span class="number">-1</span>] <span class="comment">//去掉切片的最后一个元素</span></span><br></pre></td></tr></table></figure>
<p><img src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220501213515.png" alt="" /></p>
<p>切片大体上跟Python差不多，注意下是<strong>前闭后开</strong>即可。看个demo就能懂：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">   <span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = [...]<span class="keyword">int</span>&#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>&#125;</span><br><span class="line"><span class="keyword">var</span> slice0 []<span class="keyword">int</span> = arr[<span class="number">2</span>:<span class="number">8</span>]</span><br><span class="line"><span class="keyword">var</span> slice1 []<span class="keyword">int</span> = arr[<span class="number">0</span>:<span class="number">6</span>]         <span class="comment">//可以简写为 var slice []int = arr[:end]</span></span><br><span class="line"><span class="keyword">var</span> slice2 = arr[<span class="number">5</span>:<span class="number">10</span>]            <span class="comment">//可以简写为 var slice[]int = arr[start:]</span></span><br><span class="line"><span class="keyword">var</span> slice3 = arr[<span class="number">0</span>:<span class="built_in">len</span>(arr)]      <span class="comment">//var slice []int = arr[:]</span></span><br><span class="line"><span class="keyword">var</span> slice4 = arr[:<span class="built_in">len</span>(arr)<span class="number">-1</span>]       <span class="comment">//去掉切片的最后一个元素</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   fmt.Printf(<span class="string">"全局变量：arr %v\n"</span>, arr)</span><br><span class="line">   fmt.Printf(<span class="string">"全局变量：slice0 %v\n"</span>, slice0)</span><br><span class="line">   fmt.Printf(<span class="string">"全局变量：slice1 %v\n"</span>, slice1)</span><br><span class="line">   fmt.Printf(<span class="string">"全局变量：slice2 %v\n"</span>, slice2)</span><br><span class="line">   fmt.Printf(<span class="string">"全局变量：slice3 %v\n"</span>, slice3)</span><br><span class="line">   fmt.Printf(<span class="string">"全局变量：slice4 %v\n"</span>, slice4)</span><br><span class="line">   fmt.Printf(<span class="string">"-----------------------------------\n"</span>)</span><br><span class="line">   arr2 := [...]<span class="keyword">int</span>&#123;<span class="number">9</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">0</span>&#125;</span><br><span class="line">   slice5 := arr[<span class="number">2</span>:<span class="number">8</span>]</span><br><span class="line">   slice6 := arr[<span class="number">0</span>:<span class="number">6</span>]         <span class="comment">//可以简写为 slice := arr[:end]</span></span><br><span class="line">   slice7 := arr[<span class="number">5</span>:<span class="number">10</span>]        <span class="comment">//可以简写为 slice := arr[start:]</span></span><br><span class="line">   slice8 := arr[<span class="number">0</span>:<span class="built_in">len</span>(arr)]  <span class="comment">//slice := arr[:]</span></span><br><span class="line">   slice9 := arr[:<span class="built_in">len</span>(arr)<span class="number">-1</span>] <span class="comment">//去掉切片的最后一个元素</span></span><br><span class="line">   fmt.Printf(<span class="string">"局部变量： arr2 %v\n"</span>, arr2)</span><br><span class="line">   fmt.Printf(<span class="string">"局部变量： slice5 %v\n"</span>, slice5)</span><br><span class="line">   fmt.Printf(<span class="string">"局部变量： slice6 %v\n"</span>, slice6)</span><br><span class="line">   fmt.Printf(<span class="string">"局部变量： slice7 %v\n"</span>, slice7)</span><br><span class="line">   fmt.Printf(<span class="string">"局部变量： slice8 %v\n"</span>, slice8)</span><br><span class="line">   fmt.Printf(<span class="string">"局部变量： slice9 %v\n"</span>, slice9)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="通过make来创建切片"><a class="markdownIt-Anchor" href="#通过make来创建切片"></a> 通过make来创建切片</h2>
<p>通过make来创建切片的方式：</p>
<ul>
<li><code>var slice []type = make([]type, len)</code></li>
<li><code>slice := make([]type, len)</code></li>
<li><code>slice := make([]type, len, cap)</code></li>
</ul>
<p><img src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502100431.png" alt="" /></p>
<p>看个例子就能懂：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">   <span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> slice0 []<span class="keyword">int</span> = <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">5</span>)</span><br><span class="line"><span class="keyword">var</span> slice1 = <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">5</span>)</span><br><span class="line"><span class="keyword">var</span> slice2 = <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">5</span>, <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   fmt.Printf(<span class="string">"make全局slice0 ：%v\n"</span>, slice0)</span><br><span class="line">   fmt.Printf(<span class="string">"make全局slice1 ：%v\n"</span>, slice1)</span><br><span class="line">   fmt.Printf(<span class="string">"make全局slice2 ：%v\n"</span>, slice2)</span><br><span class="line">   fmt.Println(<span class="string">"--------------------------------------"</span>)</span><br><span class="line">   slice3 := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">10</span>)</span><br><span class="line">   slice4 := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">10</span>)</span><br><span class="line">   slice5 := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">10</span>, <span class="number">10</span>)</span><br><span class="line">   fmt.Printf(<span class="string">"make局部slice3 ：%v\n"</span>, slice3)</span><br><span class="line">   fmt.Printf(<span class="string">"make局部slice4 ：%v\n"</span>, slice4)</span><br><span class="line">   fmt.Printf(<span class="string">"make局部slice5 ：%v\n"</span>, slice5)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>切片的内存布局：</p>
<p><img src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502100454.png" alt="" /></p>
<p><strong>读写操作实际目标是底层数组，只需注意索引号的差别</strong>。看个例子：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">   <span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   data := [...]<span class="keyword">int</span>&#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line"></span><br><span class="line">   s := data[<span class="number">2</span>:<span class="number">4</span>]</span><br><span class="line">   s[<span class="number">0</span>] = s[<span class="number">0</span>]+<span class="number">100</span></span><br><span class="line">   s[<span class="number">1</span>] = s[<span class="number">1</span>]+<span class="number">200</span></span><br><span class="line"></span><br><span class="line">   fmt.Println(s)    <span class="comment">// [102 203]</span></span><br><span class="line">   fmt.Println(data)  <span class="comment">// [0 1 102 203 4 5]（注意底层数组也发生改变了）</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可直接创建 slice 对象，自动分配底层数组：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">   <span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   s1 := []<span class="keyword">int</span>&#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">8</span>: <span class="number">100</span>&#125; <span class="comment">// 通过初始化表达式构造，可使用索引号。</span></span><br><span class="line">   fmt.Println(s1, <span class="built_in">len</span>(s1), <span class="built_in">cap</span>(s1))  <span class="comment">// [0 1 2 3 0 0 0 0 100] 9 9</span></span><br><span class="line"></span><br><span class="line">   s2 := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">6</span>, <span class="number">8</span>) <span class="comment">// 使用 make 创建，指定 len 和 cap 值。</span></span><br><span class="line">   fmt.Println(s2, <span class="built_in">len</span>(s2), <span class="built_in">cap</span>(s2))  <span class="comment">// [0 0 0 0 0 0] 6 8</span></span><br><span class="line"></span><br><span class="line">   s3 := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">6</span>) <span class="comment">// 省略 cap，相当于 cap = len。</span></span><br><span class="line">   fmt.Println(s3, <span class="built_in">len</span>(s3), <span class="built_in">cap</span>(s3))  <span class="comment">// [0 0 0 0 0 0] 6 6</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用 make 动态创建slice，避免了数组必须用常量做长度的麻烦。还可以<strong>用指针直接访问底层数组，退化成普通数组操作：</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   s := []<span class="keyword">int</span>&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;</span><br><span class="line">   p := &amp;s[<span class="number">2</span>]</span><br><span class="line">   *p = *p+<span class="number">100</span></span><br><span class="line">   fmt.Println(s) <span class="comment">// [0 1 102 3 4]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>[][]T</code>，是指元素类型为 <code>[]T</code> ：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   data:=[][]<span class="keyword">int</span>&#123;</span><br><span class="line">      []<span class="keyword">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;,</span><br><span class="line">      []<span class="keyword">int</span>&#123;<span class="number">4</span>,<span class="number">5</span>&#125;,</span><br><span class="line">      []<span class="keyword">int</span>&#123;<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>&#125;,</span><br><span class="line">   &#125;</span><br><span class="line">   fmt.Println(data)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可直接修改 <code>struct</code> 、<code>array</code>、<code>slice</code> 成员：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   student := [<span class="number">3</span>]<span class="keyword">struct</span>&#123;</span><br><span class="line">      age <span class="keyword">int</span></span><br><span class="line">      name <span class="keyword">string</span></span><br><span class="line">   &#125;&#123;&#125;</span><br><span class="line"></span><br><span class="line">   s:=student[:]</span><br><span class="line">   student[<span class="number">1</span>].age = <span class="number">20</span></span><br><span class="line">   s[<span class="number">2</span>].age = <span class="number">18</span></span><br><span class="line">   fmt.Println(student)   <span class="comment">// [&#123;0 &#125; &#123;20 &#125; &#123;18 &#125;]</span></span><br><span class="line">   fmt.Println(s)       <span class="comment">// [&#123;0 &#125; &#123;20 &#125; &#123;18 &#125;]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="append切片追加"><a class="markdownIt-Anchor" href="#append切片追加"></a> append切片追加</h2>
<p>用append内置函数操作切片（切片追加）.</p>
<p><code>append</code> ：向 slice 尾部添加数据，<strong>返回新的 slice 对象</strong>。</p>
<p>看个例子就能懂：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="keyword">var</span> a = []<span class="keyword">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;</span><br><span class="line">   fmt.Printf(<span class="string">"%v\n"</span>, a)  <span class="comment">// [1 2 3]</span></span><br><span class="line">   b := []<span class="keyword">int</span>&#123;<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;</span><br><span class="line">   fmt.Printf(<span class="string">"%v\n"</span>, b)  <span class="comment">// [4 5 6]</span></span><br><span class="line">   c := <span class="built_in">append</span>(a, b...)   <span class="comment">// ...表示照单全收</span></span><br><span class="line">   fmt.Printf(<span class="string">"%v\n"</span>, c)  <span class="comment">// [1 2 3 4 5 6]</span></span><br><span class="line">   d := <span class="built_in">append</span>(a, <span class="number">7</span>)</span><br><span class="line">   fmt.Printf(<span class="string">"%v\n"</span>, d)  <span class="comment">// [1 2 3 7]</span></span><br><span class="line">   e := <span class="built_in">append</span>(b,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>)</span><br><span class="line">   fmt.Printf(<span class="string">"%v\n"</span>, e)  <span class="comment">// [4 5 6 5 6 7]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="slice扩容"><a class="markdownIt-Anchor" href="#slice扩容"></a> slice扩容</h2>
<p><strong>切片超出原 slice.cap 限制，就会重新分配底层数组，即便原数组并未填满。</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   arr := [...]<span class="keyword">int</span>&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>, <span class="number">10</span>: <span class="number">100</span>&#125;       <span class="comment">// 定义数组</span></span><br><span class="line">   fmt.Println(arr)   <span class="comment">// [0 1 2 3 4 0 0 0 0 0 100]</span></span><br><span class="line">   s := arr[:<span class="number">2</span>:<span class="number">3</span>] <span class="comment">// low:high:max</span></span><br><span class="line">   fmt.Println(s) <span class="comment">// [0 1]</span></span><br><span class="line">   fmt.Println(&amp;arr[<span class="number">0</span>],&amp;s[<span class="number">0</span>]) <span class="comment">// 0xc000086060 0xc000086060（此时底层数组是同一个）</span></span><br><span class="line">   s = <span class="built_in">append</span>(s, <span class="number">101</span>,<span class="number">102</span>) <span class="comment">// 一下append2个，cap超过3了，重新分配底层数组，与原数组无关。</span></span><br><span class="line">   fmt.Println(s, arr)       <span class="comment">// [0 1 101 102] [0 1 2 3 4 0 0 0 0 0 100]</span></span><br><span class="line">   fmt.Println(&amp;arr[<span class="number">0</span>],&amp;s[<span class="number">0</span>]) <span class="comment">// 0xc000068060 0xc00000c300（此时s的底层数组以及是新的数组了）</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>从输出结果可以看出，<code>append</code> 后的 s <strong>重新分配了底层数组，并复制数据</strong>。如果只追加一个值，则不会超过 s.cap 限制，也就不会重新分配。 <strong>通常以 2 倍容量重新分配底层数组。在大批量添加数据时，建议一次性分配足够大的空间，以减少内存分配和数据复制开销</strong>。或初始化足够长的 len 属性，改用索引号进行操作。及时释放不再使用的 slice 对象，避免持有过期数组，造成 GC 无法回收。</p>
<p>可以通过代码看一下slice中cap重新分配规律：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   s := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line">   c := <span class="built_in">cap</span>(s)</span><br><span class="line"></span><br><span class="line">   <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">50</span>; i++ &#123;</span><br><span class="line">      s = <span class="built_in">append</span>(s, i)</span><br><span class="line">      <span class="keyword">if</span> n := <span class="built_in">cap</span>(s); n &gt; c &#123;</span><br><span class="line">         fmt.Printf(<span class="string">"cap: %d -&gt; %d\n"</span>, c, n)</span><br><span class="line">         c = n</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果如下：</p>
<p><img src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502100517.png" alt="" /></p>
<h2 id="slice复制"><a class="markdownIt-Anchor" href="#slice复制"></a> slice复制</h2>
<p><code>copy</code> ：函数 copy 在两个 slice 间复制数据，<strong>复制长度以 len 小的为准。两个 slice 可指向同一底层数组，允许元素区间重叠。</strong></p>
<p>看一下go源码的注释说明：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// The copy built-in function copies elements from a source slice into a</span></span><br><span class="line"><span class="comment">// destination slice. (As a special case, it also will copy bytes from a</span></span><br><span class="line"><span class="comment">// string to a slice of bytes.) The source and destination may overlap. Copy</span></span><br><span class="line"><span class="comment">// returns the number of elements copied, which will be the minimum of</span></span><br><span class="line"><span class="comment">// len(src) and len(dst).</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">copy</span><span class="params">(dst, src []Type)</span> <span class="title">int</span></span></span><br></pre></td></tr></table></figure>
<p>看个例子：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   s1 := []<span class="keyword">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;</span><br><span class="line">   fmt.Println(s1)       <span class="comment">// [1 2 3 4 5 6]</span></span><br><span class="line">   s2 := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">4</span>)</span><br><span class="line">   fmt.Println(s2)       <span class="comment">// [0 0 0 0]</span></span><br><span class="line">   <span class="built_in">copy</span>(s1, s2)</span><br><span class="line">   fmt.Println(s1,s2)    <span class="comment">// [0 0 0 0 5 6] [0 0 0 0]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>再看一个两个 slice 指向同一底层数组的例子：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   data := [...]<span class="keyword">int</span>&#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>&#125;</span><br><span class="line">   fmt.Println(<span class="string">"底层数组："</span>, data) <span class="comment">// 底层数组： [0 1 2 3 4 5 6 7 8 9]</span></span><br><span class="line">   s1 := data[<span class="number">8</span>:]</span><br><span class="line">   fmt.Println(s1) <span class="comment">// [8 9]</span></span><br><span class="line">   s2 := data[:<span class="number">5</span>]</span><br><span class="line">   fmt.Println(s2) <span class="comment">// [0 1 2 3 4]</span></span><br><span class="line">   <span class="built_in">copy</span>(s2, s1)</span><br><span class="line">   fmt.Println(s1)	<span class="comment">// [8 9]</span></span><br><span class="line">   fmt.Println(s2)	<span class="comment">// [8 9 2 3 4]</span></span><br><span class="line">   fmt.Println(<span class="string">"底层数组："</span>, data) <span class="comment">// 底层数组： [8 9 2 3 4 5 6 7 8 9]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>应及时将所需数据 copy 到较小的 slice，以便释放超大号底层数组内存。</p>
</blockquote>
<h2 id="切片遍历"><a class="markdownIt-Anchor" href="#切片遍历"></a> 切片遍历</h2>
<p>看个例子就行：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   s := []<span class="keyword">int</span>&#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>&#125;</span><br><span class="line">   <span class="keyword">for</span> index, value := <span class="keyword">range</span> s &#123;</span><br><span class="line">      fmt.Println(index, value)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果如下：</p>
<p><img src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502100540.png" alt="" /></p>
<h2 id="数组和切片的内存布局"><a class="markdownIt-Anchor" href="#数组和切片的内存布局"></a> 数组和切片的内存布局</h2>
<p>先看个例子：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="keyword">var</span> a = []<span class="keyword">int</span>&#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line">   fmt.Println(a, <span class="built_in">len</span>(a)) <span class="comment">// [0 1 2 3 4] 5</span></span><br><span class="line">   b := a[<span class="number">1</span>:<span class="number">2</span>]</span><br><span class="line">   fmt.Println(b, <span class="built_in">len</span>(b)) <span class="comment">// [1] 1</span></span><br><span class="line">   c := b[<span class="number">0</span>:<span class="number">3</span>]</span><br><span class="line">   fmt.Println(c, <span class="built_in">len</span>(c)) <span class="comment">// [1 2 3] 3</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>为什么切片b的长度只有1，却能通过<code>c := b[0:3]</code>来得到一个长度为3的切片c呢，这就要看一下数组和切片的内存布局：</p>
<p><img src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502100610.png" alt="" /></p>
<h2 id="字符串和切片string-and-slice"><a class="markdownIt-Anchor" href="#字符串和切片string-and-slice"></a> 字符串和切片（string and slice）</h2>
<p><strong>string底层就是一个byte的数组</strong>，因此，也可以进行切片操作。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   str:=<span class="string">"hello,world"</span></span><br><span class="line">   fmt.Printf(<span class="string">"%c\n"</span>, str[<span class="number">4</span>]) <span class="comment">// o</span></span><br><span class="line">   s1:=str[<span class="number">0</span>:<span class="number">5</span>]</span><br><span class="line">   fmt.Println(s1)    <span class="comment">// hello</span></span><br><span class="line">   s2:=str[<span class="number">6</span>:]</span><br><span class="line">   fmt.Println(s2)    <span class="comment">// world</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>string本身是不可变的，因此要改变string中字符（如实现<code>str[4]='m'</code>的操作）。需要如下操作：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   str := <span class="string">"hello,world"</span></span><br><span class="line">   fmt.Println(str) <span class="comment">// hello,world</span></span><br><span class="line">   s := []<span class="keyword">byte</span>(str) <span class="comment">// 中文字符需要用[]rune(str)</span></span><br><span class="line">   s[<span class="number">4</span>] = <span class="string">'m'</span></span><br><span class="line">   str = <span class="keyword">string</span>(s)</span><br><span class="line">   fmt.Println(str) <span class="comment">// hellm,world</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>对于含有中文字符串，需要用<code>[]rune(str)</code>：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   str := <span class="string">"你好，世界！hello world！"</span></span><br><span class="line">   s := []<span class="keyword">rune</span>(str)</span><br><span class="line">   s[<span class="number">3</span>] = <span class="string">'够'</span></span><br><span class="line">   s[<span class="number">4</span>] = <span class="string">'浪'</span></span><br><span class="line">   s[<span class="number">12</span>] = <span class="string">'g'</span></span><br><span class="line">   s = s[:<span class="number">14</span>]</span><br><span class="line">   str = <span class="keyword">string</span>(s)</span><br><span class="line">   fmt.Println(str) <span class="comment">//你好，够浪！hello go</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>golang slice <code>data[:6:8]</code> 两个冒号的理解：</p>
<ul>
<li>常规slice , data[6:8]，从第6位到第8位（返回6， 7），长度len为2， 最大可扩充长度cap为4（6-9）</li>
<li>另一种写法： data[:6:8] 每个数字前都有个冒号， slice内容为data从0到第6位，长度len为6，最大扩充项cap设置为8</li>
</ul>
<p><code>a[x:y:z]</code>：切片内容 [x:y]，切片长度: y-x，切片容量:z-x。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   slice := []<span class="keyword">int</span>&#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>&#125;</span><br><span class="line">   d1 := slice[<span class="number">6</span>:<span class="number">8</span>]</span><br><span class="line">   fmt.Println(d1, <span class="built_in">len</span>(d1), <span class="built_in">cap</span>(d1)) <span class="comment">// [6 7] 2 4</span></span><br><span class="line">   d2 := slice[:<span class="number">6</span>:<span class="number">8</span>]</span><br><span class="line">   fmt.Println(d2, <span class="built_in">len</span>(d2), <span class="built_in">cap</span>(d2)) <span class="comment">// [0 1 2 3 4 5] 6 8</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">   <span class="string">"fmt"</span></span><br><span class="line">   <span class="string">"strings"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   slice := []<span class="keyword">int</span>&#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>&#125;</span><br><span class="line">   fmt.Println(slice) <span class="comment">// [0 1 2 3 4 5 6 7 8 9]</span></span><br><span class="line">   str := strings.Replace(strings.Trim(fmt.Sprint(slice), <span class="string">"[]"</span>), <span class="string">" "</span>, <span class="string">","</span>, <span class="number">-1</span>)</span><br><span class="line">   fmt.Println(str)   <span class="comment">// 0,1,2,3,4,5,6,7,8,9</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="数组or切片转字符串"><a class="markdownIt-Anchor" href="#数组or切片转字符串"></a> 数组or切片转字符串</h2>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">strings.Replace(strings.Trim(fmt.Sprint(array_or_slice), <span class="string">"[]"</span>), <span class="string">" "</span>, <span class="string">","</span>, <span class="number">-1</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li>
<p><code>fmt.Sprint()</code>：Go语言格式的<code>fmt.Sprint()</code>函数使用其操作数的默认格式，并返回结果字符串。当任何字符串不用作常量时，此处在操作数之间添加空格（这里的作用时将slice类型转为string类型，方便后续<code>Trim</code>操作）</p>
</li>
<li>
<p><code>(strings.Trim(s, cutset string)</code>：返回将 s 前后端所有 cutset 包含的 utf-8 码值都去掉的字符串（这里就去掉了前端的<code>[</code>和后端的<code>]</code>）</p>
</li>
<li>
<p><code>strings.Replace(s, old, new string, n int)</code>：这里的作用时将原字符的所有空格<code>&quot; &quot;</code>替换成逗号<code>&quot;,&quot;</code>，-1表示替换所有的空格。</p>
<p>看一下相关源码：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Sprint formats using the default formats for its operands and returns the resulting string.</span></span><br><span class="line"><span class="comment">// Spaces are added between operands when neither is a string.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Sprint</span><span class="params">(a ...<span class="keyword">interface</span>&#123;&#125;)</span> <span class="title">string</span></span> &#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Trim returns a slice of the string s with all leading and</span></span><br><span class="line"><span class="comment">// trailing Unicode code points contained in cutset removed.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Trim</span><span class="params">(s, cutset <span class="keyword">string</span>)</span> <span class="title">string</span></span> &#123;</span><br><span class="line">	<span class="keyword">if</span> s == <span class="string">""</span> || cutset == <span class="string">""</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> s</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> TrimFunc(s, makeCutsetFunc(cutset))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Replace returns a copy of the string s with the first n</span></span><br><span class="line"><span class="comment">// non-overlapping instances of old replaced by new.</span></span><br><span class="line"><span class="comment">// If old is empty, it matches at the beginning of the string</span></span><br><span class="line"><span class="comment">// and after each UTF-8 sequence, yielding up to k+1 replacements</span></span><br><span class="line"><span class="comment">// for a k-rune string.</span></span><br><span class="line"><span class="comment">// If n &lt; 0, there is no limit on the number of replacements.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Replace</span><span class="params">(s, old, <span class="built_in">new</span> <span class="keyword">string</span>, n <span class="keyword">int</span>)</span> <span class="title">string</span></span> &#123;</span><br><span class="line"> 	...   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>例子：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">   <span class="string">"fmt"</span></span><br><span class="line">   <span class="string">"strings"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   slice := []<span class="keyword">int</span>&#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>&#125;</span><br><span class="line">   fmt.Println(slice) <span class="comment">// [0 1 2 3 4 5 6 7 8 9]</span></span><br><span class="line">   str := strings.Replace(strings.Trim(fmt.Sprint(slice), <span class="string">"[]"</span>), <span class="string">" "</span>, <span class="string">","</span>, <span class="number">-1</span>)</span><br><span class="line">   fmt.Println(str)   <span class="comment">// 0,1,2,3,4,5,6,7,8,9</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="slice底层实现"><a class="markdownIt-Anchor" href="#slice底层实现"></a> Slice底层实现</h1>
<p><strong><a href="https://www.topgoer.com/go%E5%9F%BA%E7%A1%80/Slice%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0.html" target="_blank" rel="noopener">Slice底层实现</a></strong></p>
<p>（面试常问）</p>
<hr />
<h1 id="map"><a class="markdownIt-Anchor" href="#map"></a> Map</h1>
<p><a href="https://www.topgoer.com/go%E5%9F%BA%E7%A1%80/Map.html" target="_blank" rel="noopener">Map</a></p>
<p>map是一种无序的基于<code>key-value</code>的数据结构，<strong>Go语言中的map是引用类型，必须初始化才能使用。</strong></p>
<h2 id="map定义"><a class="markdownIt-Anchor" href="#map定义"></a> map定义</h2>
<p>Go语言中 map的定义语法如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">map</span>[KeyType]ValueType</span><br></pre></td></tr></table></figure>
<ul>
<li><code>KeyType</code>：表示键的类型</li>
<li><code>ValueType</code>：表示键对应的值的类型</li>
</ul>
<p>map类型的变量默认初始值为<code>nil</code>，需要使用<code>make()</code>函数来分配内存。语法为：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">make</span>(<span class="keyword">map</span>[KeyType]ValueType, <span class="built_in">cap</span>)</span><br></pre></td></tr></table></figure>
<p><strong>其中cap表示map的容量，该参数虽然不是必须的，但是我们应该在初始化map的时候就为其指定一个合适的容量。</strong></p>
<h2 id="map基本使用"><a class="markdownIt-Anchor" href="#map基本使用"></a> map基本使用</h2>
<p>map中的数据都是成对出现的，map的基本使用示例代码如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   ageMap := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>, <span class="number">10</span>)</span><br><span class="line">   ageMap[<span class="string">"张三"</span>] = <span class="number">18</span></span><br><span class="line">   ageMap[<span class="string">"李四"</span>] = <span class="number">20</span></span><br><span class="line">   ageMap[<span class="string">"Rick"</span>] = <span class="number">58</span></span><br><span class="line">   fmt.Println(ageMap)       <span class="comment">// map[Rick:58 张三:18 李四:20]（key时无序的）</span></span><br><span class="line">   fmt.Println(ageMap[<span class="string">"李四"</span>]) <span class="comment">// 20</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>map也支持<strong>在声明的时候填充元素</strong>，例如：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   login := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>&#123;</span><br><span class="line">      <span class="string">"username"</span>: <span class="string">"lisi"</span>,</span><br><span class="line">      <span class="string">"password"</span>: <span class="string">"123456"</span>,</span><br><span class="line">   &#125;</span><br><span class="line">   fmt.Println(login) <span class="comment">// map[password:123456 username:lisi]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="判断某个键是否存在"><a class="markdownIt-Anchor" href="#判断某个键是否存在"></a> 判断某个键是否存在</h2>
<p>Go语言中有个判断map中键是否存在的特殊写法，格式如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">value, ok := <span class="keyword">map</span>[key]</span><br></pre></td></tr></table></figure>
<p>看个例子：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   ageMap := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>, <span class="number">10</span>)</span><br><span class="line">   ageMap[<span class="string">"张三"</span>] = <span class="number">18</span></span><br><span class="line">   ageMap[<span class="string">"李四"</span>] = <span class="number">20</span></span><br><span class="line">   ageMap[<span class="string">"Rick"</span>] = <span class="number">58</span></span><br><span class="line">   value, ok := ageMap[<span class="string">"Rick"</span>] <span class="comment">// 如果key存在,ok为true,v为对应的值；如果key不存在,ok为false,v为值类型的零值</span></span><br><span class="line">   <span class="keyword">if</span> ok &#123;</span><br><span class="line">      fmt.Println(value)</span><br><span class="line">   &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      fmt.Println(<span class="string">"查无此人"</span>)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="map的遍历"><a class="markdownIt-Anchor" href="#map的遍历"></a> map的遍历</h2>
<p>Go语言中使用<code>for range</code>遍历map。如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   ageMap := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>, <span class="number">10</span>)</span><br><span class="line">   ageMap[<span class="string">"张三"</span>] = <span class="number">18</span></span><br><span class="line">   ageMap[<span class="string">"李四"</span>] = <span class="number">20</span></span><br><span class="line">   ageMap[<span class="string">"Rick"</span>] = <span class="number">58</span></span><br><span class="line">   <span class="keyword">for</span> k, v := <span class="keyword">range</span> ageMap &#123;</span><br><span class="line">      fmt.Println(k, v)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>只遍历key或value：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   ageMap := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>, <span class="number">10</span>)</span><br><span class="line">   ageMap[<span class="string">"张三"</span>] = <span class="number">18</span></span><br><span class="line">   ageMap[<span class="string">"李四"</span>] = <span class="number">20</span></span><br><span class="line">   ageMap[<span class="string">"Rick"</span>] = <span class="number">58</span></span><br><span class="line">   <span class="comment">// 只遍历key</span></span><br><span class="line">   <span class="keyword">for</span> k := <span class="keyword">range</span> ageMap &#123;</span><br><span class="line">      fmt.Println(k)</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">// 只遍历value</span></span><br><span class="line">   <span class="keyword">for</span> _,v := <span class="keyword">range</span> ageMap &#123;</span><br><span class="line">      fmt.Println(v)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意： 遍历map时的元素顺序与添加键值对的顺序无关。（map是无序的）</p>
</blockquote>
<h2 id="使用delete函数删除键值对"><a class="markdownIt-Anchor" href="#使用delete函数删除键值对"></a> 使用delete()函数删除键值对</h2>
<p>使用<code>delete()</code>函数从map中删除一组键值对，delete()函数的格式如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">delete</span>(<span class="keyword">map</span>, key)</span><br></pre></td></tr></table></figure>
<p>其中：</p>
<ul>
<li>map：表示要删除键值对的map</li>
<li>key： 表示要删除的键值对的键</li>
</ul>
<p>示例如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   ageMap := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>, <span class="number">10</span>)</span><br><span class="line">   ageMap[<span class="string">"张三"</span>] = <span class="number">18</span></span><br><span class="line">   ageMap[<span class="string">"李四"</span>] = <span class="number">20</span></span><br><span class="line">   ageMap[<span class="string">"Rick"</span>] = <span class="number">58</span></span><br><span class="line">   <span class="keyword">for</span> k, v := <span class="keyword">range</span> ageMap &#123;</span><br><span class="line">      fmt.Println(k,v)   <span class="comment">// 删除前</span></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="built_in">delete</span>(ageMap, <span class="string">"Rick"</span>)</span><br><span class="line">   <span class="keyword">for</span> k, v := <span class="keyword">range</span> ageMap &#123;</span><br><span class="line">      fmt.Println(k,v)   <span class="comment">// 删除后</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="按照指定顺序遍历map"><a class="markdownIt-Anchor" href="#按照指定顺序遍历map"></a> 按照指定顺序遍历map</h2>
<p>示例如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"math/rand"</span></span><br><span class="line">	<span class="string">"sort"</span></span><br><span class="line">	<span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	rand.Seed(time.Now().UnixNano()) <span class="comment">// 初始化随机数种子</span></span><br><span class="line">	scoreMap := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>, <span class="number">100</span>)</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">		key := fmt.Sprintf(<span class="string">"stu%02d"</span>, i) <span class="comment">// 生成stu开头的字符串</span></span><br><span class="line">		value := rand.Intn(<span class="number">100</span>)          <span class="comment">// 生成0~99的随机整数</span></span><br><span class="line">		scoreMap[key] = value</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 取出map中的所有key存入切片keys</span></span><br><span class="line">	keys := <span class="built_in">make</span>([]<span class="keyword">string</span>, <span class="number">0</span>, <span class="number">100</span>)</span><br><span class="line">	<span class="keyword">for</span> key := <span class="keyword">range</span> scoreMap &#123;</span><br><span class="line">		keys = <span class="built_in">append</span>(keys, key)</span><br><span class="line">	&#125;</span><br><span class="line">	sort.Strings(keys) <span class="comment">// 对切片进行排序</span></span><br><span class="line">	<span class="comment">// 按照排序后的key遍历map</span></span><br><span class="line">	<span class="keyword">for</span> _, key := <span class="keyword">range</span> keys &#123;</span><br><span class="line">		fmt.Println(key, scoreMap[key])</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">"-----------------------------------------------"</span>)</span><br><span class="line">	<span class="comment">// 无序的遍历map</span></span><br><span class="line">	<span class="keyword">for</span> k, v := <span class="keyword">range</span> scoreMap &#123;</span><br><span class="line">		fmt.Println(k, v)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="元素为map类型的切片"><a class="markdownIt-Anchor" href="#元素为map类型的切片"></a> 元素为map类型的切片</h2>
<p>示例如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   mapSlice := <span class="built_in">make</span>([]<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>, <span class="number">3</span>)</span><br><span class="line">   <span class="keyword">for</span> i, v := <span class="keyword">range</span> mapSlice &#123;</span><br><span class="line">      fmt.Println(i, v) <span class="comment">// map初始化之前</span></span><br><span class="line">   &#125;</span><br><span class="line">   fmt.Println(<span class="string">"-----------------------------------"</span>)</span><br><span class="line"></span><br><span class="line">   mapSlice[<span class="number">0</span>] = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>, <span class="number">10</span>)</span><br><span class="line">   mapSlice[<span class="number">0</span>][<span class="string">"name"</span>] = <span class="string">"张三"</span></span><br><span class="line">   mapSlice[<span class="number">0</span>][<span class="string">"male"</span>] = <span class="string">"女"</span></span><br><span class="line">   mapSlice[<span class="number">0</span>][<span class="string">"password"</span>] = <span class="string">"111"</span></span><br><span class="line">   <span class="keyword">for</span> i, v := <span class="keyword">range</span> mapSlice &#123;</span><br><span class="line">      fmt.Println(i, v) <span class="comment">// map初始化之后</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="值为切片类型的map"><a class="markdownIt-Anchor" href="#值为切片类型的map"></a> 值为切片类型的map</h2>
<p>示例如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   sliceMap := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>][]<span class="keyword">string</span>, <span class="number">3</span>)</span><br><span class="line">   fmt.Println(sliceMap)</span><br><span class="line">   value := <span class="built_in">make</span>([]<span class="keyword">string</span>, <span class="number">3</span>)</span><br><span class="line">   value = <span class="built_in">append</span>(value, <span class="string">"深圳"</span>, <span class="string">"上海"</span>)</span><br><span class="line">   sliceMap[<span class="string">"Chian"</span>] = value</span><br><span class="line">   fmt.Println(sliceMap)  <span class="comment">// after init</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="map实现原理"><a class="markdownIt-Anchor" href="#map实现原理"></a> Map实现原理</h1>
<p><strong><a href="https://www.topgoer.com/go%E5%9F%BA%E7%A1%80/Map%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86.html" target="_blank" rel="noopener">Map实现原理</a></strong></p>
<p>（面试常问）</p>
<hr />
<h1 id="go指针"><a class="markdownIt-Anchor" href="#go指针"></a> Go指针</h1>
<p><a href="https://www.topgoer.com/go%E5%9F%BA%E7%A1%80/%E6%8C%87%E9%92%88.html" target="_blank" rel="noopener">指针</a></p>
<p>区别于C/C++中的指针，<strong>Go语言中的指针不能进行偏移和运算，是安全指针。</strong></p>
<p>要搞明白Go语言中的指针需要先知道3个概念：</p>
<ul>
<li>指针地址</li>
<li>指针类型</li>
<li>指针取值</li>
</ul>
<h2 id="go语言中的指针"><a class="markdownIt-Anchor" href="#go语言中的指针"></a> Go语言中的指针</h2>
<p><strong>Go语言中的函数传参都是值传递</strong>，当我们想要修改某个变量的时候，我们可以创建一个指向该变量地址的指针变量。传递数据使用指针，而无须拷贝数据。类型指针不能进行偏移和运算。Go语言中的指针操作非常简单，<strong>只需要记住两个符号</strong>：</p>
<ul>
<li><code>&amp;</code>（取地址）</li>
<li><code>*</code>（根据地址取值）</li>
</ul>
<blockquote>
<p><a href="https://www.flysnow.org/2018/02/24/golang-function-parameters-passed-by-value.html" target="_blank" rel="noopener">Go语言参数传递是值传递还是引用传递</a></p>
<p>最终我们可以确认的是<strong>Go语言中所有的传参都是值传递</strong>，都是一个副本，一个拷贝。因为拷贝的内容有时候是非引用类型（int、string、struct等这些），这样就在函数中就无法修改原内容数据；有的是引用类型（指针、map、slice、chan等这些），这样就可以修改原内容数据。</p>
<p>是否可以修改原内容数据，和值传递、引用传递没有必然的关系。在C++中，传引用肯定是可以修改原内容数据的，<strong>在Go语言里，虽然只有传值，但是我们也可以修改原内容数据，因为参数是引用类型。</strong></p>
<p>请记住：</p>
<ul>
<li>Go里只有值传递</li>
<li>引用传递和引用类型是两个概念</li>
</ul>
</blockquote>
<h3 id="指针地址和指针类型"><a class="markdownIt-Anchor" href="#指针地址和指针类型"></a> 指针地址和指针类型</h3>
<p>每个变量在运行时都拥有一个地址，这个地址代表变量在内存中的位置。Go语言中使用<code>&amp;</code>字符放在变量前面对变量进行<strong>取地址</strong>操作。 Go语言中的值类型（<code>int</code>、<code>float</code>、<code>bool</code>、<code>string</code>、<code>array</code>、<code>struct</code>）都有对应的指针类型，如：<code>*int</code>、<code>*int64</code>、<code>*string</code>等。</p>
<p>取变量指针的语法如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ptr := &amp;v    <span class="comment">// v的类型为T</span></span><br></pre></td></tr></table></figure>
<p>其中：</p>
<ul>
<li>v：代表被取地址的变量，类型为T</li>
<li>ptr：用于接收地址的变量，ptr的类型就为T，称做T的指针类型。代表指针</li>
</ul>
<p>举个例子：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	a := <span class="number">10</span></span><br><span class="line">	b := &amp;a</span><br><span class="line">	fmt.Println(a, &amp;a)                   <span class="comment">// 10 0xc0000aa058</span></span><br><span class="line">	fmt.Printf(<span class="string">"b: %p type: %T\n"</span>, b, b) <span class="comment">// b: 0xc00000a0a8 type: *int</span></span><br><span class="line">	fmt.Println(&amp;b)                      <span class="comment">// 0xc000006028</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们来看一下<code>b := &amp;a</code>的图示：</p>
<p><img src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502100637.png" alt="" /></p>
<h3 id="指针取值"><a class="markdownIt-Anchor" href="#指针取值"></a> 指针取值</h3>
<p>在对普通变量使用<code>&amp;</code>操作符取地址后会获得这个变量的指针，然后可以对指针使用<code>*</code>操作，也就是指针取值。</p>
<p>示例如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   a := <span class="number">10</span></span><br><span class="line">   b := &amp;a</span><br><span class="line">   c := *b</span><br><span class="line">   fmt.Printf(<span class="string">"type of b:%T\n"</span>, b)           <span class="comment">// type of b:*int</span></span><br><span class="line">   fmt.Printf(<span class="string">"type of c:%T, c :%v\n"</span>, c, c) <span class="comment">// type of c:int, c :10</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong><mark>总结</mark></strong>： 取地址操作符<code>&amp;</code>和取值操作符<code>*</code>是一对互补操作符：</p>
<ul>
<li><code>&amp;</code>取出地址</li>
<li><code>*</code>根据地址取出地址指向的值</li>
</ul>
</blockquote>
<p>变量、指针地址、指针变量、取地址、取值的相互关系和特性如下：</p>
<ul>
<li>对变量进行取地址<code>&amp;</code>操作，可以获得这个变量的指针变量</li>
<li>指针变量的值是指针地址</li>
<li>对指针变量进行取值<code>*</code>操作，可以获得指针变量指向的原变量的值</li>
</ul>
<p>指针传值示例：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   a := <span class="number">10</span></span><br><span class="line">   modify1(a)</span><br><span class="line">   fmt.Println(a) <span class="comment">// 10</span></span><br><span class="line">   modify2(&amp;a)</span><br><span class="line">   fmt.Println(a) <span class="comment">// 100</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">modify1</span><span class="params">(x <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">   x = <span class="number">100</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">modify2</span><span class="params">(x *<span class="keyword">int</span>)</span></span> &#123; <span class="comment">// 指针传值</span></span><br><span class="line">   *x = <span class="number">100</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="空指针"><a class="markdownIt-Anchor" href="#空指针"></a> 空指针</h2>
<p>当一个指针被定义后没有分配到任何变量时，它的值为 <code>nil</code>。</p>
<p>空指针的判断：<code>p==nil</code>进行判断即可。</p>
<h2 id="new和make"><a class="markdownIt-Anchor" href="#new和make"></a> new和make</h2>
<p>先看一个例子：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="keyword">var</span> a *<span class="keyword">int</span></span><br><span class="line">   *a = <span class="number">100</span></span><br><span class="line">   fmt.Println(a)</span><br><span class="line"></span><br><span class="line">   <span class="keyword">var</span> b <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span></span><br><span class="line">   b[<span class="string">"math"</span>] = <span class="number">90</span></span><br><span class="line">   fmt.Println(b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>执行上面的代码会引发<code>panic</code>，因为<strong>在Go语言中对于引用类型的变量，我们在使用的时候不仅要声明它，还要为它分配内存空间</strong>，否则我们的值就没办法存储。而<strong>对于值类型的声明不需要分配内存空间，是因为它们在声明的时候已经默认分配好了内存空间</strong>。</p>
<p>要分配内存，就引出来<code>new</code>和<code>make</code>。 Go语言中<code>new</code>和<code>make</code>是内建的两个函数，主要<strong>用来分配内存</strong>。</p>
<h3 id="new"><a class="markdownIt-Anchor" href="#new"></a> new</h3>
<p>new是一个内置的函数，在go源码中它的函数签名如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// The new built-in function allocates memory. The first argument is a type,</span></span><br><span class="line"><span class="comment">// not a value, and the value returned is a pointer to a newly</span></span><br><span class="line"><span class="comment">// allocated zero value of that type.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">new</span><span class="params">(Type)</span> *<span class="title">Type</span></span></span><br></pre></td></tr></table></figure>
<p>其中：</p>
<ul>
<li><code>Type</code>表示类型，<strong>new函数只接受一个参数，这个参数是一个类型</strong></li>
<li><code>*Type</code>表示类型指针，<strong>new函数返回一个指向该类型内存地址的指针</strong></li>
</ul>
<p>new函数不太常用，<strong>使用new函数得到的是一个类型的指针，并且该指针对应的值为该类型的零值。</strong></p>
<p>举个例子：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   i := <span class="built_in">new</span>(<span class="keyword">int</span>)</span><br><span class="line">   fmt.Println(*i) <span class="comment">// 0</span></span><br><span class="line">   *i = <span class="number">10</span></span><br><span class="line">   fmt.Println(*i) <span class="comment">// 10</span></span><br><span class="line">   b := <span class="built_in">new</span>(<span class="keyword">bool</span>)</span><br><span class="line">   fmt.Println(*b) <span class="comment">// false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在最上面的示例代码<code>var a *int</code>中只是声明了一个指针变量a但是没有初始化，<strong>指针作为引用类型需要初始化后才会拥有内存空间，才可以给它赋值</strong>。</p>
<p>按照如下方式使用内置的<code>new</code>函数对a进行初始化之后就可以正常对其赋值了：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="keyword">var</span> a *<span class="keyword">int</span></span><br><span class="line">   a = <span class="built_in">new</span>(<span class="keyword">int</span>)</span><br><span class="line">   *a = <span class="number">11</span></span><br><span class="line">   fmt.Println(*a) <span class="comment">// 11</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="make"><a class="markdownIt-Anchor" href="#make"></a> make</h3>
<p><code>make</code>也是<strong>用于内存分配</strong>的，区别于new，它<strong>只用于<code>slice</code>、<code>map</code>以及<code>chan</code>的内存创建，而且它返回的类型就是这三个类型本身</strong>，而不是他们的指针类型，因为这三种类型就是引用类型，所以就没有必要返回他们的指针了。</p>
<p>make函数的函数签名如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">make</span><span class="params">(t Type, size ...IntegerType)</span> <span class="title">Type</span></span></span><br></pre></td></tr></table></figure>
<p><strong>make函数是无可替代的，我们在使用slice、map以及channel的时候，都需要使用make进行初始化，然后才可以对它们进行操作。</strong></p>
<p>示例如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="keyword">var</span> b <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span></span><br><span class="line">   b = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>, <span class="number">10</span>)</span><br><span class="line">   b[<span class="string">"math"</span>] = <span class="number">90</span></span><br><span class="line">   fmt.Println(b) <span class="comment">// map[math:90]</span></span><br><span class="line">   m := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>)</span><br><span class="line">   m[<span class="string">"english"</span>] = <span class="number">100</span></span><br><span class="line">   fmt.Println(m) <span class="comment">// map[english:100]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="new与make的区别"><a class="markdownIt-Anchor" href="#new与make的区别"></a> new与make的区别</h3>
<ul>
<li><code>new</code>和<code>make</code>都是用来做内存分配的</li>
<li><strong>make只用于slice、map以及channel的初始化，返回的还是这三个引用类型本身</strong></li>
<li><strong>new用于类型的内存分配，并且内存对应的值为类型零值，返回的是指向类型的指针。</strong></li>
</ul>
<hr />
<h1 id="结构体"><a class="markdownIt-Anchor" href="#结构体"></a> 结构体</h1>
<p><a href="https://www.topgoer.com/go%E5%9F%BA%E7%A1%80/%E7%BB%93%E6%9E%84%E4%BD%93.html" target="_blank" rel="noopener">结构体</a></p>
<p><strong>Go语言中没有“类”的概念，也不支持“类”的继承等面向对象的概念</strong>。Go语言中<strong>通过结构体的内嵌再配合接口比面向对象具有更高的扩展性和灵活性</strong>。</p>
<p>Go语言中的基础数据类型可以表示一些事物的基本属性，但是当我们想表达一个事物的全部或部分属性时，这时候再用单一的基本数据类型明显就无法满足需求了，Go语言提供了一种自定义数据类型，可以封装多个基本数据类型，这种数据类型叫结构体，英文名称struct。 也就是我们可以通过<code>struct</code>来定义自己的类型了。</p>
<p><strong>Go语言中通过struct来实现面向对象。</strong></p>
<h2 id="结构体的定义"><a class="markdownIt-Anchor" href="#结构体的定义"></a> 结构体的定义</h2>
<p>使用<code>type</code>和<code>struct</code>关键字来定义结构体，具体代码格式如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> 类型名 <span class="keyword">struct</span> &#123;</span><br><span class="line">    字段名 字段类型</span><br><span class="line">    字段名 字段类型</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其中：</p>
<ol>
<li>类型名：标识自定义结构体的名称，在同一个包内不能重复；</li>
<li>字段名：表示结构体字段名。结构体中的字段名必须唯一；</li>
<li>字段类型：表示结构体字段的具体类型。</li>
</ol>
<p>看个例子就行：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span> &#123;</span><br><span class="line">   name <span class="keyword">string</span></span><br><span class="line">   age <span class="keyword">uint8</span></span><br><span class="line">   city <span class="keyword">string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>同样类型的字段可以写在一行：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span> &#123;</span><br><span class="line">   name, city <span class="keyword">string</span></span><br><span class="line">   age <span class="keyword">uint8</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="结构体实例化"><a class="markdownIt-Anchor" href="#结构体实例化"></a> 结构体实例化</h2>
<p>只有当结构体实例化时，才会真正地分配内存。也就是必须实例化后才能使用结构体的字段。</p>
<p>结构体本身也是一种类型，我们可以像声明内置类型一样使用var关键字声明结构体类型：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> 结构体实例 结构体类型</span><br></pre></td></tr></table></figure>
<h3 id="基本实例化"><a class="markdownIt-Anchor" href="#基本实例化"></a> 基本实例化</h3>
<p>示例如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="keyword">string</span></span><br><span class="line">	age  <span class="keyword">uint8</span></span><br><span class="line">	city <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	p1 := person&#123;</span><br><span class="line">		name: <span class="string">"张三"</span>,</span><br><span class="line">		age:  <span class="number">18</span>,</span><br><span class="line">		city: <span class="string">"深圳"</span>,</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">var</span> p2 person</span><br><span class="line">	p2.name = <span class="string">"李四"</span></span><br><span class="line">	p2.age = <span class="number">20</span></span><br><span class="line">	p2.city = <span class="string">"杭州"</span></span><br><span class="line">	fmt.Println(p1)      <span class="comment">// &#123;张三 18 深圳&#125;</span></span><br><span class="line">	fmt.Println(p2)      <span class="comment">// &#123;李四 20 杭州&#125;</span></span><br><span class="line">	fmt.Println(p1.name) <span class="comment">// 张三</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们通过<code>.</code>来访问结构体的字段（成员变量），例如p1.name和p1.age等。</p>
<h3 id="创建指针类型结构体"><a class="markdownIt-Anchor" href="#创建指针类型结构体"></a> 创建指针类型结构体</h3>
<p>我们还可以通过使用<code>new</code>关键字对结构体进行实例化，得到的是结构体的地址。</p>
<p>如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="keyword">string</span></span><br><span class="line">	age  <span class="keyword">uint8</span></span><br><span class="line">	city <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	p := <span class="built_in">new</span>(person)</span><br><span class="line">	fmt.Printf(<span class="string">"%T\n"</span>, p)    <span class="comment">// *main.person</span></span><br><span class="line">	fmt.Printf(<span class="string">"p=%#v\n"</span>, p) <span class="comment">// p=&amp;main.person&#123;name:"", age:0x0, city:""&#125;</span></span><br><span class="line">	p.name = <span class="string">"张三"</span></span><br><span class="line">	p.age = <span class="number">18</span></span><br><span class="line">	p.city = <span class="string">"深圳"</span></span><br><span class="line">	fmt.Println(*p) <span class="comment">// &#123;张三 18 深圳&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>从打印的结果中我们可以看出2是一个结构体指针（*main.person）。</p>
<p>需要注意的是<strong>在Go语言中支持对结构体指针直接使用<code>.</code>来访问结构体的成员</strong>。（这是Go语言帮我们实现的语法糖）</p>
<h3 id="取结构体的地址实例化"><a class="markdownIt-Anchor" href="#取结构体的地址实例化"></a> 取结构体的地址实例化</h3>
<p><strong>使用<code>&amp;</code>对结构体进行取地址操作相当于对该结构体类型进行了一次<code>new</code>实例化操作。</strong></p>
<p>示例如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="keyword">string</span></span><br><span class="line">	age  <span class="keyword">uint8</span></span><br><span class="line">	city <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	p := &amp;person&#123;&#125;</span><br><span class="line">	fmt.Printf(<span class="string">"%T\n"</span>, p)    <span class="comment">// *main.person</span></span><br><span class="line">	fmt.Printf(<span class="string">"p=%#v\n"</span>, p) <span class="comment">// p=&amp;main.person&#123;name:"", age:0x0, city:""&#125;</span></span><br><span class="line">	p.name = <span class="string">"jack"</span></span><br><span class="line">	fmt.Println(p) <span class="comment">// &amp;&#123;jack 0 &#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>p.name = &quot;jack&quot;</code>其实在底层是<code>(*p).name = &quot;jack&quot;</code>，这是Go语言帮我们实现的语法糖。</p>
<h2 id="匿名结构体"><a class="markdownIt-Anchor" href="#匿名结构体"></a> 匿名结构体</h2>
<p>在定义一些临时数据结构等场景下还可以使用匿名结构体。</p>
<p>示例如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="keyword">var</span> user <span class="keyword">struct</span> &#123;</span><br><span class="line">      name <span class="keyword">string</span></span><br><span class="line">      age  <span class="keyword">int</span></span><br><span class="line">   &#125;</span><br><span class="line">   user.name = <span class="string">"张三"</span></span><br><span class="line">   user.age = <span class="number">18</span></span><br><span class="line">   fmt.Println(user) <span class="comment">// &#123;张三 18&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="结构体初始化"><a class="markdownIt-Anchor" href="#结构体初始化"></a> 结构体初始化</h2>
<p>声明一个结构体不进行初始化，如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span> &#123;</span><br><span class="line">   name <span class="keyword">string</span></span><br><span class="line">   age  <span class="keyword">uint8</span></span><br><span class="line">   city <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="keyword">var</span> p person</span><br><span class="line">   fmt.Printf(<span class="string">"p=%#v\n"</span>, p) <span class="comment">// p=main.person&#123;name:"", age:0x0, city:""&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="使用键值对初始化"><a class="markdownIt-Anchor" href="#使用键值对初始化"></a> 使用键值对初始化</h3>
<p>使用键值对对结构体进行初始化时，键对应结构体的字段，值对应该字段的初始值。如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span> &#123;</span><br><span class="line">   name <span class="keyword">string</span></span><br><span class="line">   age  <span class="keyword">uint8</span></span><br><span class="line">   city <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   p := person&#123;</span><br><span class="line">      name: <span class="string">"张三"</span>,</span><br><span class="line">      age:  <span class="number">20</span>,</span><br><span class="line">      city: <span class="string">"深圳"</span>,</span><br><span class="line">   &#125;</span><br><span class="line">   fmt.Println(p) <span class="comment">// &#123;张三 20 深圳&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>也可以对<strong>结构体指针</strong>进行键值对初始化，例如：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span> &#123;</span><br><span class="line">   name <span class="keyword">string</span></span><br><span class="line">   age  <span class="keyword">uint8</span></span><br><span class="line">   city <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   p := &amp;person&#123;</span><br><span class="line">      name: <span class="string">"张三"</span>,</span><br><span class="line">      age:  <span class="number">20</span>,</span><br><span class="line">      city: <span class="string">"深圳"</span>,</span><br><span class="line">   &#125;</span><br><span class="line">   fmt.Println(*p) <span class="comment">// &#123;张三 20 深圳&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当某些字段没有初始值的时候，该字段可以不写。此时，<strong>没有指定初始值的字段的值就是该字段类型的零值</strong>。</p>
<h3 id="使用值的列表初始化"><a class="markdownIt-Anchor" href="#使用值的列表初始化"></a> 使用值的列表初始化</h3>
<p>初始化结构体的时候可以简写，也就是初始化的时候不写键，直接写值：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span> &#123;</span><br><span class="line">   name <span class="keyword">string</span></span><br><span class="line">   age  <span class="keyword">uint8</span></span><br><span class="line">   city <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   p := person&#123;</span><br><span class="line">      <span class="string">"tom"</span>,</span><br><span class="line">      <span class="number">21</span>,</span><br><span class="line">      <span class="string">"深圳"</span>,</span><br><span class="line">   &#125;</span><br><span class="line">   fmt.Println(p) <span class="comment">// &#123;tom 21 深圳&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用这种格式初始化时，需要注意：</p>
<ul>
<li>必须初始化结构体的所有字段</li>
<li>初始值的填充顺序必须与字段在结构体中的声明顺序一致</li>
<li>该方式不能和键值初始化方式混用</li>
</ul>
<h2 id="结构体内存布局"><a class="markdownIt-Anchor" href="#结构体内存布局"></a> 结构体内存布局</h2>
<p>看个例子：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span> &#123;</span><br><span class="line">   name <span class="keyword">string</span></span><br><span class="line">   age  <span class="keyword">uint8</span></span><br><span class="line">   city <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   p := person&#123;</span><br><span class="line">      <span class="string">"tom"</span>,</span><br><span class="line">      <span class="number">21</span>,</span><br><span class="line">      <span class="string">"深圳"</span>,</span><br><span class="line">   &#125;</span><br><span class="line">   fmt.Printf(<span class="string">"%p\n"</span>, &amp;p)      <span class="comment">// 0xc000090480</span></span><br><span class="line">   fmt.Printf(<span class="string">"%p\n"</span>, &amp;p.name) <span class="comment">// 0xc000090480</span></span><br><span class="line">   fmt.Printf(<span class="string">"%p\n"</span>, &amp;p.age)  <span class="comment">// 0xc000090490</span></span><br><span class="line">   fmt.Printf(<span class="string">"%p\n"</span>, &amp;p.city) <span class="comment">// 0xc000090498</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>再看一个示例：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> test <span class="keyword">struct</span> &#123;</span><br><span class="line">   a <span class="keyword">int8</span></span><br><span class="line">   b <span class="keyword">int8</span></span><br><span class="line">   c <span class="keyword">int8</span></span><br><span class="line">   d <span class="keyword">int8</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   n := test&#123;</span><br><span class="line">      <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>,</span><br><span class="line">   &#125;</span><br><span class="line">   fmt.Printf(<span class="string">"n.a %p\n"</span>, &amp;n.a) <span class="comment">// n.a 0xc00000a0a8</span></span><br><span class="line">   fmt.Printf(<span class="string">"n.b %p\n"</span>, &amp;n.b) <span class="comment">// n.b 0xc00000a0a9</span></span><br><span class="line">   fmt.Printf(<span class="string">"n.c %p\n"</span>, &amp;n.c) <span class="comment">// n.c 0xc00000a0aa</span></span><br><span class="line">   fmt.Printf(<span class="string">"n.d %p\n"</span>, &amp;n.d) <span class="comment">// n.d 0xc00000a0ab</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="mapstruct的demo"><a class="markdownIt-Anchor" href="#mapstruct的demo"></a> Map+Struct的Demo</h2>
<p>代码如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> student <span class="keyword">struct</span> &#123;</span><br><span class="line">   name <span class="keyword">string</span></span><br><span class="line">   age  <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   m := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]student)</span><br><span class="line">   stus := []student&#123;</span><br><span class="line">      &#123;name: <span class="string">"张三"</span>, age: <span class="number">18</span>&#125;,</span><br><span class="line">      &#123;name: <span class="string">"losing"</span>, age: <span class="number">23</span>&#125;,</span><br><span class="line">      &#123;name: <span class="string">"jack"</span>, age: <span class="number">28</span>&#125;,</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">for</span> _, stu := <span class="keyword">range</span> stus &#123;</span><br><span class="line">      m[stu.name] = stu</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">for</span> k, v := <span class="keyword">range</span> m &#123;</span><br><span class="line">      fmt.Println(k, <span class="string">"--&gt;"</span>, v)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">张三 --&gt; &#123;张三 18&#125;</span><br><span class="line">losing --&gt; &#123;losing 23&#125;</span><br><span class="line">jack --&gt; &#123;jack 28&#125;</span><br></pre></td></tr></table></figure>
<h2 id="结构体的构造函数自己实现的"><a class="markdownIt-Anchor" href="#结构体的构造函数自己实现的"></a> 结构体的构造函数（自己实现的）</h2>
<p><strong>Go语言的结构体没有构造函数，我们可以自己实现</strong>。</p>
<p>例如：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> student <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="keyword">string</span></span><br><span class="line">	age  <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 自定义的构造函数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">newStudent</span><span class="params">(name <span class="keyword">string</span>, age <span class="keyword">int</span>)</span> *<span class="title">student</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> &amp;student&#123;</span><br><span class="line">		name: name,</span><br><span class="line">		age:  age,</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	s := newStudent(<span class="string">"张三"</span>, <span class="number">18</span>) <span class="comment">// 调用构造函数</span></span><br><span class="line">	fmt.Println(*s)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面的代码就实现了一个student的构造函数。 <strong>因为struct是值类型，如果结构体比较复杂的话，值拷贝性能开销会比较大，所以该构造函数返回的是结构体指针类型</strong>。</p>
<h2 id="方法和接收者"><a class="markdownIt-Anchor" href="#方法和接收者"></a> 方法和接收者</h2>
<p>关于Go的函数和方法后续会更详细的提到，这里简单讲一下。</p>
<p>Go语言中的方法（Method）是一种作用于特定类型变量的函数。这种特定类型变量叫做接收者（Receiver）。接收者的概念就类似于其他语言中的<code>this</code>或者<code>self</code>。</p>
<p>方法的定义格式如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(接收者变量 接收者类型)</span> 方法名<span class="params">(参数列表)</span> <span class="params">(返回参数)</span></span> &#123;</span><br><span class="line">       函数体</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>其中：</p>
<ul>
<li>接收者变量：接收者中的参数变量名在命名时，<strong>官方建议使用接收者类型名的第一个小写字母</strong>，而不是self、this之类的命名。例如，<strong>Person类型的接收者变量应该命名为 p，Connector类型的接收者变量应该命名为c等</strong>；</li>
<li>接收者类型：接收者类型和参数类似，<strong>可以是指针类型和非指针类型</strong>；</li>
<li>方法名、参数列表、返回参数：具体格式与函数定义相同。</li>
</ul>
<p>举个例子：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> student <span class="keyword">struct</span> &#123;</span><br><span class="line">   name <span class="keyword">string</span></span><br><span class="line">   age  <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 自定义的构造函数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">newStudent</span><span class="params">(name <span class="keyword">string</span>, age <span class="keyword">int</span>)</span> *<span class="title">student</span></span> &#123;</span><br><span class="line">   <span class="keyword">return</span> &amp;student&#123;</span><br><span class="line">      name: name,</span><br><span class="line">      age:  age,</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 专属于Student类的方法</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s student)</span> <span class="title">doWhat</span><span class="params">(work <span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line">   fmt.Println(<span class="string">"今天的工作是："</span>+work)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   s := newStudent(<span class="string">"张三"</span>, <span class="number">18</span>) <span class="comment">// 调用构造函数</span></span><br><span class="line">   fmt.Println(s) <span class="comment">// &amp;&#123;张三 18&#125;</span></span><br><span class="line">   s.doWhat(<span class="string">"学习"</span>) <span class="comment">// 今天的工作是：学习</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>方法与函数的区别是：<strong>函数不属于任何类型，方法属于特定的类型。</strong></p>
<h3 id="指针类型的接收者"><a class="markdownIt-Anchor" href="#指针类型的接收者"></a> 指针类型的接收者</h3>
<p><strong>指针类型的接收者由一个结构体的指针组成</strong>，由于指针的特性，调用方法时修改接收者指针的任意成员变量，在方法结束后，<strong>修改是有效的</strong>。这种方式就十分接近于其他语言中面向对象中的this或者self。</p>
<p>例如我们为Person添加一个SetAge方法，来修改实例变量的年龄：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> student <span class="keyword">struct</span> &#123;</span><br><span class="line">   name <span class="keyword">string</span></span><br><span class="line">   age  <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 自定义的构造函数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">newStudent</span><span class="params">(name <span class="keyword">string</span>, age <span class="keyword">int</span>)</span> *<span class="title">student</span></span> &#123;</span><br><span class="line">   <span class="keyword">return</span> &amp;student&#123;</span><br><span class="line">      name: name,</span><br><span class="line">      age:  age,</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// UpdateAge 专属于Student类的方法</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *student)</span> <span class="title">UpdateAge</span><span class="params">(newAge <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">   s.age = newAge</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   s := newStudent(<span class="string">"张三"</span>, <span class="number">18</span>) <span class="comment">// 调用构造函数</span></span><br><span class="line">   fmt.Println(s)            <span class="comment">// &amp;&#123;张三 18&#125;</span></span><br><span class="line">   s.UpdateAge(<span class="number">20</span>)</span><br><span class="line">   fmt.Println(s) <span class="comment">// &amp;&#123;张三 20&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="值类型的接收者"><a class="markdownIt-Anchor" href="#值类型的接收者"></a> 值类型的接收者</h3>
<p>当方法作用于<strong>值类型接收者</strong>时，Go语言会在代码运行时将接收者的值复制一份。在值类型接收者的方法中可以获取接收者的成员值，但修改操作只是针对副本，<strong>无法修改接收者变量本身</strong>。</p>
<p>例如：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> student <span class="keyword">struct</span> &#123;</span><br><span class="line">   name <span class="keyword">string</span></span><br><span class="line">   age  <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 自定义的构造函数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">newStudent</span><span class="params">(name <span class="keyword">string</span>, age <span class="keyword">int</span>)</span> *<span class="title">student</span></span> &#123;</span><br><span class="line">   <span class="keyword">return</span> &amp;student&#123;</span><br><span class="line">      name: name,</span><br><span class="line">      age:  age,</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// UpdateAge 专属于Student类的方法</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s student)</span> <span class="title">UpdateAge</span><span class="params">(newAge <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">   s.age = newAge</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   s := newStudent(<span class="string">"张三"</span>, <span class="number">18</span>) <span class="comment">// 调用构造函数</span></span><br><span class="line">   fmt.Println(s)            <span class="comment">// &amp;&#123;张三 18&#125;</span></span><br><span class="line">   s.UpdateAge(<span class="number">20</span>)</span><br><span class="line">   fmt.Println(s) <span class="comment">// &amp;&#123;张三 18&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="什么时候应该使用指针类型接收者"><a class="markdownIt-Anchor" href="#什么时候应该使用指针类型接收者"></a> 什么时候应该使用指针类型接收者</h3>
<ul>
<li><strong>需要修改接收者中的值</strong></li>
<li>接收者是拷贝代价比较大的大对象</li>
<li><strong>保证一致性，如果有某个方法使用了指针接收者，那么其他的方法也应该使用指针接收者。</strong></li>
</ul>
<h3 id="接收者的类型可以是任何类型"><a class="markdownIt-Anchor" href="#接收者的类型可以是任何类型"></a> 接收者的类型可以是任何类型</h3>
<p>在Go语言中，<strong>接收者的类型可以是任何类型，不仅仅是结构体，任何类型都可以拥有方法</strong>。</p>
<p>举个例子，我们基于内置的int类型使用type关键字可以定义新的自定义类型，然后为我们的自定义类型添加方法：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// MyInt 自定义MyInt类型</span></span><br><span class="line"><span class="keyword">type</span> MyInt <span class="keyword">int</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(i MyInt)</span> <span class="title">SayHello</span><span class="params">()</span></span>  &#123;</span><br><span class="line">   fmt.Println(<span class="string">"Hello,我是MyInt类型"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="keyword">var</span> m1 MyInt</span><br><span class="line">   m1.SayHello()  <span class="comment">// Hello,我是MyInt类型</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="结构体的匿名字段"><a class="markdownIt-Anchor" href="#结构体的匿名字段"></a> 结构体的匿名字段</h2>
<p>结构体允许<strong>其成员字段在声明时没有字段名而只有类型</strong>，这种没有名字的字段就称为匿名字段。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Student <span class="keyword">struct</span> &#123;</span><br><span class="line">   <span class="keyword">string</span></span><br><span class="line">   <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   s := Student&#123;</span><br><span class="line">      <span class="keyword">string</span>: <span class="string">"tom"</span>,</span><br><span class="line">      <span class="keyword">int</span>:    <span class="number">18</span>,</span><br><span class="line">   &#125;</span><br><span class="line">   fmt.Println(s)        <span class="comment">// &#123;tom 18&#125;</span></span><br><span class="line">   fmt.Println(s.<span class="keyword">string</span>) <span class="comment">// tom</span></span><br><span class="line">   fmt.Println(s.<span class="keyword">int</span>)    <span class="comment">// tom</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>匿名字段默认采用类型名作为字段名，结构体要求字段名称必须唯一，因此一个结构体中同种类型的匿名字段只能有一个。</p>
<h2 id="嵌套结构体"><a class="markdownIt-Anchor" href="#嵌套结构体"></a> 嵌套结构体</h2>
<p><strong>一个结构体中可以嵌套包含另一个结构体或结构体指针。</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> address <span class="keyword">struct</span> &#123;</span><br><span class="line">   province <span class="keyword">string</span></span><br><span class="line">   city     <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> student <span class="keyword">struct</span> &#123;</span><br><span class="line">   name <span class="keyword">string</span></span><br><span class="line">   age  <span class="keyword">int</span></span><br><span class="line">   addr address</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   s := student&#123;</span><br><span class="line">      name: <span class="string">"tom"</span>,</span><br><span class="line">      age:  <span class="number">18</span>,</span><br><span class="line">      addr: address&#123;</span><br><span class="line">         province: <span class="string">"湖北省"</span>,</span><br><span class="line">         city:     <span class="string">"武汉市"</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">   &#125;</span><br><span class="line">   fmt.Println(s)           <span class="comment">// &#123;tom 18 &#123;湖北省 武汉市&#125;&#125;</span></span><br><span class="line">   fmt.Println(s.addr.city) <span class="comment">// 武汉市</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="嵌套匿名结构体"><a class="markdownIt-Anchor" href="#嵌套匿名结构体"></a> 嵌套匿名结构体</h3>
<p>看个例子就行：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> address <span class="keyword">struct</span> &#123;</span><br><span class="line">	province <span class="keyword">string</span></span><br><span class="line">	city     <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> student <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="keyword">string</span></span><br><span class="line">	age  <span class="keyword">int</span></span><br><span class="line">	address		<span class="comment">// 匿名结构体</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	s := student&#123;</span><br><span class="line">		name: <span class="string">"tom"</span>,</span><br><span class="line">		age:  <span class="number">18</span>,</span><br><span class="line">		address:address&#123;</span><br><span class="line">			province: <span class="string">"湖北省"</span>,</span><br><span class="line">			city:     <span class="string">"武汉市"</span>,</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(s)           <span class="comment">// &#123;tom 18 &#123;湖北省 武汉市&#125;&#125;</span></span><br><span class="line">	fmt.Println(s.address.city) <span class="comment">// 武汉市</span></span><br><span class="line">	fmt.Println(s.province) <span class="comment">// 湖北省</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当访问结构体成员时会<strong>先在结构体中查找该字段，找不到再去匿名结构体中查找。</strong>（嵌套匿名结构体可以直接访问，如上面的<code>s.province</code>）</p>
<h3 id="嵌套结构体的字段名冲突"><a class="markdownIt-Anchor" href="#嵌套结构体的字段名冲突"></a> 嵌套结构体的字段名冲突</h3>
<p>嵌套结构体内部可能存在相同的字段名。<strong>这个时候为了避免歧义需要指定具体的内嵌结构体的字段。</strong></p>
<p>看个例子就能懂：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> address <span class="keyword">struct</span> &#123;</span><br><span class="line">   province   <span class="keyword">string</span></span><br><span class="line">   createTime <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> email <span class="keyword">struct</span> &#123;</span><br><span class="line">   email      <span class="keyword">string</span></span><br><span class="line">   createTime <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> student <span class="keyword">struct</span> &#123;</span><br><span class="line">   name  <span class="keyword">string</span></span><br><span class="line">   age   <span class="keyword">int</span></span><br><span class="line">   addr  address</span><br><span class="line">   email email</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   s := student&#123;</span><br><span class="line">      name: <span class="string">"tom"</span>,</span><br><span class="line">      age:  <span class="number">18</span>,</span><br><span class="line">      addr: address&#123;</span><br><span class="line">         province:   <span class="string">"湖北省"</span>,</span><br><span class="line">         createTime: <span class="string">"address：2020-05-01"</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      email: email&#123;</span><br><span class="line">         email:      <span class="string">"qingbo1011.top"</span>,</span><br><span class="line">         createTime: <span class="string">"email：2022-05-01"</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">   &#125;</span><br><span class="line">   fmt.Println(s) <span class="comment">// &#123;tom 18 &#123;湖北省 2020-05-01&#125; &#123;qingbo1011.top 2022-05-01&#125;&#125;</span></span><br><span class="line">   <span class="comment">// 需要指定具体结构体中的createTime</span></span><br><span class="line">   fmt.Println(s.addr.createTime)  <span class="comment">// address：2020-05-01</span></span><br><span class="line">   fmt.Println(s.email.createTime) <span class="comment">// email：2022-05-01</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="结构体的继承"><a class="markdownIt-Anchor" href="#结构体的继承"></a> 结构体的“继承”</h2>
<p>Go语言中使用结构体也可以实现其他编程语言中面向对象的继承。</p>
<p>看个例子：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> animal <span class="keyword">struct</span> &#123;</span><br><span class="line">   name <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> dog <span class="keyword">struct</span> &#123;</span><br><span class="line">   age     <span class="keyword">int</span></span><br><span class="line">   *animal <span class="comment">// 通过嵌套匿名结构体实现继承</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(a *animal)</span> <span class="title">eat</span><span class="params">()</span></span> &#123;</span><br><span class="line">   fmt.Println(a.name + <span class="string">"在进食"</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(d *dog)</span> <span class="title">wang</span><span class="params">()</span></span> &#123;</span><br><span class="line">   fmt.Println(d.name + <span class="string">"在汪汪汪"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   d := dog&#123;</span><br><span class="line">      age:    <span class="number">2</span>,</span><br><span class="line">      animal: &amp;animal&#123;name: <span class="string">"旺财"</span>&#125;,</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">// d可以使用animal和dog的方法</span></span><br><span class="line">   d.eat()  <span class="comment">// 旺财在进食</span></span><br><span class="line">   d.wang() <span class="comment">// 旺财在汪汪汪</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="结构体字段的可见性"><a class="markdownIt-Anchor" href="#结构体字段的可见性"></a> 结构体字段的可见性</h2>
<ul>
<li><strong>结构体中字段大写开头表示可公开访问</strong></li>
<li><strong>小写表示私有（仅在定义当前结构体的包中可访问）</strong></li>
</ul>
<h2 id="结构体与json序列化"><a class="markdownIt-Anchor" href="#结构体与json序列化"></a> 结构体与JSON序列化</h2>
<p>JSON(JavaScript Object Notation) 是一种轻量级的数据交换格式。易于人阅读和编写。同时也易于机器解析和生成。JSON键值对是用来保存JS对象的一种方式，键/值对组合中的键名写在前面并用双引号<code>&quot;&quot;</code>包裹，使用冒号<code>:</code>分隔，然后紧接着值<code>;</code>，多个键值之间使用英文<code>,</code>分隔。（<a href="https://www.qingbo1011.top/2021/04/06/AJAX&amp;JSON/#json">JSON笔记</a>）</p>
<p>看个例子：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"encoding/json"</span></span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 注意私有变量不能被json包访问！！所以这里的成员全部要大写开头</span></span><br><span class="line"><span class="keyword">type</span> student <span class="keyword">struct</span> &#123;</span><br><span class="line">	Id     <span class="keyword">int</span></span><br><span class="line">	Name   <span class="keyword">string</span></span><br><span class="line">	Gender <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> class <span class="keyword">struct</span> &#123;</span><br><span class="line">	ClassName <span class="keyword">string</span></span><br><span class="line">	Students  []student</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	c := &amp;class&#123;</span><br><span class="line">		ClassName: <span class="string">"1902"</span>,</span><br><span class="line">		Students:  <span class="built_in">make</span>([]student, <span class="number">0</span>, <span class="number">20</span>),</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">3</span>; i++ &#123;</span><br><span class="line">		stu := student&#123;</span><br><span class="line">			Id:     i,</span><br><span class="line">			Name:   fmt.Sprintf(<span class="string">"stu%02d"</span>, i),</span><br><span class="line">			Gender: <span class="string">"软件工程"</span>,</span><br><span class="line">		&#125;</span><br><span class="line">		c.Students = <span class="built_in">append</span>(c.Students, stu)</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">	<span class="comment">// JSON序列化：结构体--&gt;JSON格式的字符串（实际上是[]byte类型）</span></span><br><span class="line">	jsonStr, err := json.Marshal(c) <span class="comment">// 注意jsonStr是[]byte类型</span></span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="keyword">string</span>(jsonStr)) <span class="comment">// jsonStr是[]byte类型，转化成string类型便于查看</span></span><br><span class="line">	fmt.Printf(<span class="string">"%s\n"</span>, jsonStr)  <span class="comment">// &#123;"ClassName":"1902","Students":[&#123;"Id":0,"Name":"stu00","Gender":"软件工程"&#125;,&#123;"Id":1,"Name":"stu01","Gender":"软件工程"&#125;,&#123;"Id":2,"Name":"stu02","Gender":"软件工程"&#125;]&#125;</span></span><br><span class="line">    </span><br><span class="line">	<span class="comment">// JSON反序列化：JSON格式的字符串--&gt;结构体</span></span><br><span class="line">	str := <span class="string">`&#123;"ClassName":"1902","Students":[&#123;"Id":0,"Name":"stu00","Gender":"软件工程"&#125;,&#123;"Id":1,"Name":"stu01","Gender":"软件工程"&#125;,&#123;"Id":2,"Name":"stu02","Gender":"软件工程"&#125;]&#125;`</span> <span class="comment">// 使用``包裹字符段（这样可以不用转义"引号）</span></span><br><span class="line">	c1 := &amp;class&#123;&#125;</span><br><span class="line">	err = json.Unmarshal([]<span class="keyword">byte</span>(str), c1)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(c1) <span class="comment">// &amp;&#123;1902 [&#123;0 stu00 软件工程&#125; &#123;1 stu01 软件工程&#125; &#123;2 stu02 软件工程&#125;]&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>注意私有变量不能被json包访问！</strong></p>
<h2 id="结构体标签tag"><a class="markdownIt-Anchor" href="#结构体标签tag"></a> 结构体标签（Tag）</h2>
<p>Tag是结构体的元信息，可以在运行的时候通过反射的机制读取出来。</p>
<p>Tag在结构体字段的后方定义，由一对反引号包裹起来，具体的格式如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">`key1:"value1" key2:"value2"`</span></span><br></pre></td></tr></table></figure>
<p><strong>结构体标签由一个或多个键值对组成。键与值使用冒号分隔，值用双引号括起来。键值对之间使用一个空格分隔。</strong></p>
<p>注意事项： <strong>为结构体编写Tag时，必须严格遵守键值对的规则</strong>。结构体标签的解析代码的容错能力很差，一旦格式写错，编译和运行时都不会提示任何错误，通过反射也无法正确取值。例如不要在key和value之间添加空格。</p>
<p>例如我们为Student结构体的每个字段定义json序列化时使用的Tag：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">   <span class="string">"encoding/json"</span></span><br><span class="line">   <span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// json序列化是默认使用字段名作为key</span></span><br><span class="line"><span class="comment">// 这里我们通过指定tag实现json序列化该字段时的key</span></span><br><span class="line"><span class="keyword">type</span> student <span class="keyword">struct</span> &#123;</span><br><span class="line">   Id     <span class="keyword">int</span> <span class="string">`json:"id"`</span></span><br><span class="line">   Name   <span class="keyword">string</span>  <span class="string">`json:"name"`</span></span><br><span class="line">   Gender <span class="keyword">string</span>  <span class="string">`json:"gender"`</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> class <span class="keyword">struct</span> &#123;</span><br><span class="line">   ClassName <span class="keyword">string</span> <span class="string">`json:"class_name"`</span></span><br><span class="line">   Students  []student <span class="string">`json:"students"`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   c := &amp;class&#123;</span><br><span class="line">      ClassName: <span class="string">"1902"</span>,</span><br><span class="line">      Students:  <span class="built_in">make</span>([]student, <span class="number">0</span>, <span class="number">20</span>),</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">3</span>; i++ &#123;</span><br><span class="line">      stu := student&#123;</span><br><span class="line">         Id:     i,</span><br><span class="line">         Name:   fmt.Sprintf(<span class="string">"stu%02d"</span>, i),</span><br><span class="line">         Gender: <span class="string">"软件工程"</span>,</span><br><span class="line">      &#125;</span><br><span class="line">      c.Students = <span class="built_in">append</span>(c.Students, stu)</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">// JSON序列化：结构体--&gt;JSON格式的字符串（实际上是[]byte类型）</span></span><br><span class="line">   jsonStr, err := json.Marshal(c) <span class="comment">// 注意jsonStr是[]byte类型</span></span><br><span class="line">   <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">      fmt.Println(err)</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">   &#125;</span><br><span class="line">   fmt.Println(<span class="keyword">string</span>(jsonStr)) <span class="comment">// &#123;"class_name":"1902","students":[&#123;"id":0,"name":"stu00","gender":"软件工程"&#125;,&#123;"id":1,"name":"stu01","gender":"软件工程"&#125;,&#123;"id":2,"name":"stu02","gender":"软件工程"&#125;]&#125;</span></span><br><span class="line">   <span class="comment">// JSON反序列化：JSON格式的字符串--&gt;结构体</span></span><br><span class="line">   str := <span class="string">`&#123;"class_name":"1901","students":[&#123;"id":0,"name":"stu00","gender":"大数据"&#125;,&#123;"id":1,"name":"stu01","gender":"大数据"&#125;,&#123;"id":2,"name":"stu02","gender":"大数据"&#125;]&#125;`</span> <span class="comment">// 使用``包裹字符段（这样可以不用转义"引号）</span></span><br><span class="line">   c1 := &amp;class&#123;&#125;</span><br><span class="line">   err = json.Unmarshal([]<span class="keyword">byte</span>(str), c1)</span><br><span class="line">   <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">      fmt.Println(err)</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">   &#125;</span><br><span class="line">   fmt.Println(c1) <span class="comment">// &amp;&#123;1901 [&#123;0 stu00 大数据&#125; &#123;1 stu01 大数据&#125; &#123;2 stu02 大数据&#125;]&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr />
<h1 id="流程控制"><a class="markdownIt-Anchor" href="#流程控制"></a> 流程控制</h1>
<h2 id="条件语句if"><a class="markdownIt-Anchor" href="#条件语句if"></a> 条件语句if</h2>
<p><a href="https://www.topgoer.com/%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/%E6%9D%A1%E4%BB%B6%E8%AF%AD%E5%8F%A5if.html" target="_blank" rel="noopener">条件语句if</a></p>
<p>没什么好说的，直接看个demo：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">   <span class="keyword">var</span> num <span class="keyword">int</span></span><br><span class="line">   fmt.Printf(<span class="string">"请输入一个1-6的数字："</span>)</span><br><span class="line">   fmt.Scan(&amp;num)</span><br><span class="line">   <span class="keyword">if</span> num&gt;=<span class="number">1</span>&amp;&amp;num&lt;=<span class="number">3</span> &#123;</span><br><span class="line">      fmt.Println(<span class="string">"小"</span>)</span><br><span class="line">   &#125;<span class="keyword">else</span> <span class="keyword">if</span> num&gt;=<span class="number">4</span>&amp;&amp;num&lt;=<span class="number">6</span> &#123;</span><br><span class="line">      fmt.Println(<span class="string">"大"</span>)</span><br><span class="line">   &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">      fmt.Println(<span class="string">"输入有误"</span>)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：**代码块左括号<code>{</code>必须在条件表达式尾部！**这是因为go会自动补充<code>;</code>的原因。</p>
</blockquote>
<h2 id="条件语句switch"><a class="markdownIt-Anchor" href="#条件语句switch"></a> 条件语句switch</h2>
<p><a href="https://www.topgoer.com/%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/%E6%9D%A1%E4%BB%B6%E8%AF%AD%E5%8F%A5switch.html" target="_blank" rel="noopener">条件语句switch</a></p>
<p>switch 语句用于基于不同条件执行不同动作，每一个 case 分支都是唯一的，从上直下逐一测试，直到匹配为止。 Golang switch 分支表达式可以是任意类型，不限于常量。<strong>可省略 break</strong>，默认自动终止。</p>
<p>Go 编程语言中 switch 语句的语法如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> var1 &#123;</span><br><span class="line">    <span class="keyword">case</span> val1:</span><br><span class="line">        ...</span><br><span class="line">    <span class="keyword">case</span> val2:</span><br><span class="line">        ...</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>变量 var1 可以是任何类型，而 val1 和 val2 则可以是同类型的任意值。类型不被局限于常量或整数，但必须是相同的类型；或者最终结果为相同类型的表达式。 <strong>可以同时测试多个可能符合条件的值，使用逗号分割它们</strong>，例如：<code>case val1, val2, val3</code>。</p>
<p>给个例子：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">   <span class="keyword">var</span> num <span class="keyword">int</span></span><br><span class="line">   fmt.Printf(<span class="string">"请输入一个1-6的数字："</span>)</span><br><span class="line">   fmt.Scan(&amp;num)</span><br><span class="line">   <span class="keyword">switch</span> num &#123;</span><br><span class="line">   <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">      fmt.Println(<span class="string">"小"</span>)</span><br><span class="line">   <span class="keyword">case</span> <span class="number">2</span>, <span class="number">3</span>:</span><br><span class="line">      fmt.Println(<span class="string">"小"</span>)</span><br><span class="line">   <span class="keyword">case</span> <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>:</span><br><span class="line">      fmt.Println(<span class="string">"大"</span>)</span><br><span class="line">   <span class="keyword">default</span>:</span><br><span class="line">      fmt.Println(<span class="string">"输入有误！"</span>)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>补充：<code>fallthrough</code>关键字的使用：Go里面switch默认相当于每个case最后带有break，匹配成功后不会自动向下执行其他case，而是跳出整个switch, 但是<strong>可以使用fallthrough强制执行后面的case代码</strong>（这里只执行后一个case）。</p>
<p><a href="https://www.cnblogs.com/zsy/p/6741902.html" target="_blank" rel="noopener">go语言fallthrough的用法心得</a></p>
</blockquote>
<p>switch 语句还可以被用于 type-switch 来判断某个 <code>interface</code> 变量中实际存储的变量类型。</p>
<p>Type Switch 语法格式如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> x.(<span class="keyword">type</span>)&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">type</span>:</span><br><span class="line">       statement(s)      </span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">type</span>:</span><br><span class="line">       statement(s)</span><br><span class="line">    <span class="comment">/* 你可以定义任意个数的case */</span></span><br><span class="line">    <span class="keyword">default</span>: <span class="comment">/* 可选 */</span></span><br><span class="line">       statement(s)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>举个例子：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">   <span class="keyword">var</span> x <span class="keyword">interface</span>&#123;&#125;</span><br><span class="line">   <span class="comment">//写法一：</span></span><br><span class="line">   <span class="keyword">switch</span> i := x.(<span class="keyword">type</span>) &#123; <span class="comment">// 带初始化语句</span></span><br><span class="line">   <span class="keyword">case</span> <span class="literal">nil</span>:</span><br><span class="line">      fmt.Printf(<span class="string">" x 的类型 :%T\r\n"</span>, i)</span><br><span class="line">   <span class="keyword">case</span> <span class="keyword">int</span>:</span><br><span class="line">      fmt.Printf(<span class="string">"x 是 int 型"</span>)</span><br><span class="line">   <span class="keyword">case</span> <span class="keyword">float64</span>:</span><br><span class="line">      fmt.Printf(<span class="string">"x 是 float64 型"</span>)</span><br><span class="line">   <span class="keyword">case</span> <span class="function"><span class="keyword">func</span><span class="params">(<span class="keyword">int</span>)</span> <span class="title">float64</span>:</span></span><br><span class="line">      fmt.Printf(<span class="string">"x 是 func(int) 型"</span>)</span><br><span class="line">   <span class="keyword">case</span> <span class="keyword">bool</span>, <span class="keyword">string</span>:</span><br><span class="line">      fmt.Printf(<span class="string">"x 是 bool 或 string 型"</span>)</span><br><span class="line">   <span class="keyword">default</span>:</span><br><span class="line">      fmt.Printf(<span class="string">"未知型"</span>)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果为： <code>x 的类型 :&lt;nil&gt;</code></p>
<blockquote>
<p><strong>Go的switch非常灵活，表达式可以是常量也可以是整数</strong>，执行的过程从上至下，直到找到匹配项；而如果switch没有表达式，它会匹配true。</p>
<p>Go里面switch默认相当于每个case最后带有break，匹配成功后不会自动向下执行其他case，而是跳出整个switch，但是可以使用<code>fallthrough</code>强制执行后面的case代码。</p>
</blockquote>
<h2 id="条件语句select"><a class="markdownIt-Anchor" href="#条件语句select"></a> 条件语句select</h2>
<p><a href="https://www.topgoer.com/%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/%E6%9D%A1%E4%BB%B6%E8%AF%AD%E5%8F%A5select.html" target="_blank" rel="noopener">条件语句select</a></p>
<p>select 语句类似于 switch 语句，但是<strong>select会随机执行一个可运行的case。如果没有case可运行，它将阻塞，直到有case可运行。</strong></p>
<p>select 是Go中的一个控制结构，类似于<strong>用于通信</strong>的switch语句。<strong>每个case必须是一个通信操作</strong>，要么是发送要么是接收。 select 随机执行一个可运行的case。如果没有case可运行，它将阻塞，直到有case可运行。一个默认的子句应该总是可运行的。</p>
<p>Go 编程语言中 select 语句的语法如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> communication clause  :</span><br><span class="line">       statement(s);      </span><br><span class="line">    <span class="keyword">case</span> communication clause  :</span><br><span class="line">       statement(s);</span><br><span class="line">    <span class="comment">/* 你可以定义任意数量的 case */</span></span><br><span class="line">    <span class="keyword">default</span> : <span class="comment">/* 可选 */</span></span><br><span class="line">       statement(s);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>每个case都必须是一个通信，所有channel表达式都会被求值，所有被发送的表达式都会被求值。</p>
<p>如果任意某个通信可以进行，它就执行；其他被忽略。如果有多个case都可以运行，Select会随机公平地选出一个执行，其他不会执行。</p>
<p>否则：如果有default子句，则执行该语句；如果没有default字句，select将阻塞，直到某个通信可以运行；Go不会重新对channel或值进行求值。</p>
<p>（具体参考<a href="https://www.topgoer.com/%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/%E6%9D%A1%E4%BB%B6%E8%AF%AD%E5%8F%A5select.html" target="_blank" rel="noopener">条件语句select</a>，后面需要用到了在进行补充）</p>
<h2 id="循环语句for"><a class="markdownIt-Anchor" href="#循环语句for"></a> 循环语句for</h2>
<p><a href="https://www.topgoer.com/%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5for.html" target="_blank" rel="noopener">循环语句for</a></p>
<p>Golang的循环只有<code>for</code>。 for支持三种循环方式，包括类似 while 的语法。</p>
<p>语法：</p>
<ul>
<li><code>for init; condition; post { }</code>（类似Java的普通for循环）</li>
<li><code>for condition { }</code>（类似Java的while(condition)循环）</li>
<li><code>for { }</code>（类似Java的while(true)循环）</li>
</ul>
<p>语法没什么好说的，看一个输出100以内全部素数的结果的例子即可：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">   <span class="comment">/* 定义局部变量 */</span></span><br><span class="line">   <span class="keyword">var</span> i, j <span class="keyword">int</span></span><br><span class="line">   <span class="keyword">for</span> i = <span class="number">2</span>; i &lt; <span class="number">100</span>; i++ &#123;</span><br><span class="line">      <span class="keyword">for</span> j = <span class="number">2</span>; j &lt; i; j++ &#123;    <span class="comment">// 可优化</span></span><br><span class="line">         <span class="keyword">if</span> i%j==<span class="number">0</span> &#123;</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">         &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> j==i &#123;  <span class="comment">// 说明走完嵌套内的循环而没有中途break</span></span><br><span class="line">         fmt.Println(i,<span class="string">"是素数"</span>)</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="循环语句range"><a class="markdownIt-Anchor" href="#循环语句range"></a> 循环语句range</h2>
<p><a href="https://www.topgoer.com/%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5range.html" target="_blank" rel="noopener">循环语句range</a></p>
<p><code>range</code>类似迭代器操作，返回 (索引, 值) 或 (键, 值)。</p>
<p><strong>for 循环的 range 格式可以对 slice、map、数组、字符串等进行迭代循环</strong>。格式如下：</p>
<table>
<thead>
<tr>
<th></th>
<th>1st value</th>
<th>2nd value</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>string</td>
<td>index</td>
<td>s[index]</td>
<td>unicode, rune</td>
</tr>
<tr>
<td>array/slice</td>
<td>index</td>
<td>s[index]</td>
<td></td>
</tr>
<tr>
<td>map</td>
<td>key</td>
<td>m[key]</td>
<td></td>
</tr>
<tr>
<td>channel</td>
<td>element</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>可忽略不想要的返回值，使用 <code>_</code> 即可。</p>
<p>例如：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">   s := <span class="string">"hello"</span></span><br><span class="line">   <span class="comment">// 忽略 2nd value，支持 string/array/slice/map。</span></span><br><span class="line">   <span class="keyword">for</span> i := <span class="keyword">range</span> s &#123;</span><br><span class="line">      fmt.Println(s[i])</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">// 忽略 index。</span></span><br><span class="line">   <span class="keyword">for</span> _, c := <span class="keyword">range</span> s &#123;</span><br><span class="line">      fmt.Println(c)</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">// 忽略全部返回值，仅迭代。</span></span><br><span class="line">   <span class="keyword">for</span> <span class="keyword">range</span> s &#123;</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   m := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>&#123;<span class="string">"hello"</span>:<span class="number">1</span>, <span class="string">"world"</span>:<span class="number">2</span>&#125;</span><br><span class="line">   <span class="keyword">for</span> k,v := <span class="keyword">range</span> m &#123;</span><br><span class="line">      fmt.Println(k,v)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注意：range 会复制对象。建议改用引用类型，其底层数据不会被复制。具体例子可以参考<a href="https://www.topgoer.com/%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5range.html" target="_blank" rel="noopener">循环语句range</a></p>
<p><code>for</code> 和 <code>for range</code>的区别主要体现在使用场景不同：</p>
<ul>
<li>for可以：
<ul>
<li>遍历array和slice</li>
<li>遍历key为整型递增的map</li>
<li>遍历string</li>
</ul>
</li>
<li><strong>for range可以完成所有for可以做的事情，也能做到for不能做的</strong>，包括：
<ul>
<li>遍历key为string类型的map并同时获取key和value</li>
<li>遍历channel</li>
</ul>
</li>
</ul>
<h2 id="循环控制goto-break-continue"><a class="markdownIt-Anchor" href="#循环控制goto-break-continue"></a> 循环控制goto、break、continue</h2>
<p>循环控制语句可以控制循环体内语句的执行过程。GO 语言支持以下几种循环控制语句：<code>goto</code>、<code>break</code>、<code>continue</code>。</p>
<p>一般推荐不使用<code>goto</code>。<code>break</code>和<code>continue</code>没什么好说的。</p>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:qingbo1011@163.com">qingbo</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://www.qingbo1011.top/2022/04/23/Golang%E5%9F%BA%E7%A1%8001/">http://www.qingbo1011.top/2022/04/23/Golang%E5%9F%BA%E7%A1%8001/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://www.qingbo1011.top" target="_blank">Qing's Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Go/">Go</a></div><div class="post_share"><div class="social-share" data-image="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20231003161115.png" data-sites="wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2022/04/24/Golang%E5%9F%BA%E7%A1%8002/"><img class="prev_cover" src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220509153103.png" onerror="onerror=null;src='https://gitee.com/qingyu1011/blog_img/raw/master/img/20201006230435.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Golang基础（二）</div></div></a></div><div class="next-post pull_right"><a href="/2021/11/26/LeetCode%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/"><img class="next_cover" src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220806220141.png" onerror="onerror=null;src='https://gitee.com/qingyu1011/blog_img/raw/master/img/20201006230435.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">LeetCode刷题记录（Java）</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2022/06/26/Gin+Gorm v2+Github Action的实践/" title="Gin+Gorm v2+Github Action的实践"><img class="relatedPosts_cover" src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220808182712.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2022-06-26</div><div class="relatedPosts_title">Gin+Gorm v2+Github Action的实践</div></div></a></div><div class="relatedPosts_item"><a href="/2022/05/02/Gin+Gorm开发在线备忘录（To do list）/" title="Gin+Gorm开发在线备忘录（To do list）"><img class="relatedPosts_cover" src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220525201522.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2022-05-02</div><div class="relatedPosts_title">Gin+Gorm开发在线备忘录（To do list）</div></div></a></div><div class="relatedPosts_item"><a href="/2022/05/01/Gin+JWT+Air热部署的简单实践/" title="Gin+JWT+Air热部署的简单实践"><img class="relatedPosts_cover" src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220525201522.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2022-05-01</div><div class="relatedPosts_title">Gin+JWT+Air热部署的简单实践</div></div></a></div><div class="relatedPosts_item"><a href="/2022/05/21/Gin+WebSocket+MongoDB的IM即时聊天Demo/" title="Gin+Websocket+MangoDB实现的IM系统"><img class="relatedPosts_cover" src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220525201522.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2022-05-21</div><div class="relatedPosts_title">Gin+Websocket+MangoDB实现的IM系统</div></div></a></div><div class="relatedPosts_item"><a href="/2022/06/12/Gin-blog：go1.18在gin上的实践/" title="Gin-blog：go1.18在gin上的实践"><img class="relatedPosts_cover" src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220525201522.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2022-06-12</div><div class="relatedPosts_title">Gin-blog：go1.18在gin上的实践</div></div></a></div><div class="relatedPosts_item"><a href="/2022/05/10/Gin限流/" title="Gin限流"><img class="relatedPosts_cover" src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220718144444.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2022-05-10</div><div class="relatedPosts_title">Gin限流</div></div></a></div></div><div class="clear_both"></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> 评论</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var requestSetting = function (from,set) {
  var from = from
  var setting = set.split(',').filter(function(item){
  return from.indexOf(item) > -1
  });
  setting = setting.length == 0 ? from :setting;
  return setting
}

var guestInfo = requestSetting(['nick','mail','link'],'nick,mail,link')
var requiredFields = requestSetting(['nick','mail','link'],'nick,mail')

window.valine = new Valine({
  el:'#vcomment',
  appId: 'oNS5Emx1qUL3wN5yvPLKol0W-gzGzoHsz',
  appKey: 'ytbw0ho3DMX0FeoAOWa37lf9',
  notify: false,
  verify: false,
  placeholder: 'Stay hungry,stay foolish~',
  avatar: 'monsterid',
  meta: guestInfo,
  pageSize: '10',
  lang: 'zh-CN',
  recordIP: false,
  serverURLs: '',
  emojiCDN: 'https://',
  emojiMaps: {"欢呼":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502100836.gif","笑眼":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502100849.gif","花心":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502100907.gif","吐舌":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502100937.gif","疑问":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502100951.gif","滑稽":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502101004.gif","太开心":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502101017.gif","酷":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502101029.gif","怒":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502101044.gif","阴险":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502101100.gif","委屈":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502101116.gif","乖":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502101129.gif","你懂的":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502101204.gif","小乖":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502101215.gif","突然兴奋":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502101228.gif","喷":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502101241.gif","哈哈":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502101255.gif","喝酒":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502101305.gif","汗":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502101323.gif","笑尿":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502102004.gif","嘿嘿嘿":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502102018.gif","真棒":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502102047.gif","托腮":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502102108.gif","微笑":"https://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/e3/2018new_weixioa02_org.png","礼貌":"https://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/09/2018new_keai_org.png","笑哭":"https://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/4a/2018new_xiaoku_thumb.png","无奈":"https://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/83/2018new_kuxiao_org.png","爱你":"https://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/f6/2018new_aini_org.png","吃瓜":"https://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/01/2018new_chigua_thumb.png","doge":"https://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/a1/2018new_doge02_org.png","dog":"https://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/22/2018new_erha_org.png","cat":"https://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/7b/2018new_miaomiao_thumb.png","星星眼":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502102225.png","酸了":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502102240.png","大哭":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502102254.png","傲娇":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502102314.png","给心心":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502102328.png","嘿哈":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502102345.png","custom0":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502101410.gif","custom1":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502101424.webp","狗头":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502101710.png","搬砖中":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502101744.png","忙到飞起":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502102411.png","裂开":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502102426.png","叹气":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502102439.png","让我看看":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502102456.png","panda0":"https://bbs.res.meizu.com/static/image/smiley/panda/_000.png","panda1":"https://bbs.res.meizu.com/static/image/smiley/panda/_001.png","panda2":"https://bbs.res.meizu.com/static/image/smiley/panda/_002.png","panda3":"https://bbs.res.meizu.com/static/image/smiley/panda/_003.png","panda4":"https://bbs.res.meizu.com/static/image/smiley/panda/_004.png","panda5":"https://bbs.res.meizu.com/static/image/smiley/panda/_005.png","panda6":"https://bbs.res.meizu.com/static/image/smiley/panda/_006.png","panda7":"https://bbs.res.meizu.com/static/image/smiley/panda/_007.png","panda8":"https://bbs.res.meizu.com/static/image/smiley/panda/_008.png","panda9":"https://bbs.res.meizu.com/static/image/smiley/panda/_009.png","panda10":"https://bbs.res.meizu.com/static/image/smiley/panda/_010.png","panda11":"https://bbs.res.meizu.com/static/image/smiley/panda/_011.png","panda12":"https://bbs.res.meizu.com/static/image/smiley/panda/_012.png","panda13":"https://bbs.res.meizu.com/static/image/smiley/panda/_013.png","panda14":"https://bbs.res.meizu.com/static/image/smiley/panda/_014.png","panda15":"https://bbs.res.meizu.com/static/image/smiley/panda/_015.png","panda16":"https://bbs.res.meizu.com/static/image/smiley/panda/_016.png","panda17":"https://bbs.res.meizu.com/static/image/smiley/panda/_017.png","panda18":"https://bbs.res.meizu.com/static/image/smiley/panda/_018.png","panda19":"https://bbs.res.meizu.com/static/image/smiley/panda/_019.png","panda20":"https://bbs.res.meizu.com/static/image/smiley/panda/_020.png","panda21":"https://bbs.res.meizu.com/static/image/smiley/panda/_021.png","panda22":"https://bbs.res.meizu.com/static/image/smiley/panda/_022.png","panda23":"https://bbs.res.meizu.com/static/image/smiley/panda/_023.png","panda24":"https://bbs.res.meizu.com/static/image/smiley/panda/_024.png","panda25":"https://bbs.res.meizu.com/static/image/smiley/panda/_025.png","panda26":"https://bbs.res.meizu.com/static/image/smiley/panda/_026.png","panda27":"https://bbs.res.meizu.com/static/image/smiley/panda/_027.png","panda28":"https://bbs.res.meizu.com/static/image/smiley/panda/_028.png","panda29":"https://bbs.res.meizu.com/static/image/smiley/panda/_029.png"},
  enableQQ: false,
  requiredFields: requiredFields
});</script></div></article></main><footer id="footer" style="background-image: url(https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220509153103.png)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By qingbo</div><div class="framework-info"><span>驱动 </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div><div class="footer_custom_text">宇宙很大，生活更大</div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="/js/third-party/fireworks.js"></script><script id="ribbon_piao" mobile="false" src="/js/third-party/piao.js"></script><script src="/js/third-party/activate-power-mode.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
document.body.addEventListener('input', POWERMODE);
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="/js/search/local-search.js"></script></body></html>