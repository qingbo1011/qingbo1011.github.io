<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Spring（一） | Qing's Blog</title><meta name="description" content="Spring（一） W3C Spring 教程 Spring教程&amp;面经 廖雪峰Spring开发 易百教程：Spring教程  Spring的概述  Spring是什么 Spring的两大核心（IoC和AOP） Spring的发展历程和优势 Spring体系结构   程序的耦合及解耦  曾经案例中的问题（视频讲解） 工厂模式解耦   IOC概念和Spring中的IOC  Spring中基于"><meta name="keywords" content="Spring笔记"><meta name="author" content="qingbo,qingbo1011@163.com"><meta name="copyright" content="qingbo"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220501212415.jpg"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="dns-prefetch" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="crossorigin"/><link rel="dns-prefetch" href="https://fonts.googleapis.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="dns-prefetch" href="//busuanzi.ibruce.info"/><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Spring（一）"><meta name="twitter:description" content="Spring（一） W3C Spring 教程 Spring教程&amp;面经 廖雪峰Spring开发 易百教程：Spring教程  Spring的概述  Spring是什么 Spring的两大核心（IoC和AOP） Spring的发展历程和优势 Spring体系结构   程序的耦合及解耦  曾经案例中的问题（视频讲解） 工厂模式解耦   IOC概念和Spring中的IOC  Spring中基于"><meta name="twitter:image" content="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220504095341.png"><meta property="og:type" content="article"><meta property="og:title" content="Spring（一）"><meta property="og:url" content="http://www.qingbo1011.top/2021/05/13/Spring01/"><meta property="og:site_name" content="Qing's Blog"><meta property="og:description" content="Spring（一） W3C Spring 教程 Spring教程&amp;面经 廖雪峰Spring开发 易百教程：Spring教程  Spring的概述  Spring是什么 Spring的两大核心（IoC和AOP） Spring的发展历程和优势 Spring体系结构   程序的耦合及解耦  曾经案例中的问题（视频讲解） 工厂模式解耦   IOC概念和Spring中的IOC  Spring中基于"><meta property="og:image" content="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220504095341.png"><meta property="article:published_time" content="2021-05-13T00:47:03.000Z"><meta property="article:modified_time" content="2023-10-03T08:16:11.785Z"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>var autoChangeMode = '1'
var t = Cookies.get("theme")
if (autoChangeMode == '1'){
  var isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
  var isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
  var isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined){
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport){
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour < 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
  }
  } else if (t == 'light') activateLightMode()
  else activateDarkMode()

} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="http://www.qingbo1011.top/2021/05/13/Spring01/"><link rel="prev" title="Spring（二）" href="http://www.qingbo1011.top/2021/05/17/Spring02/"><link rel="next" title="Mybatis（四）" href="http://www.qingbo1011.top/2021/05/10/Mybatis04/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: true,
  highlightCopy: true,
  highlightLang: true,
  highlightShrink: 'false',
  isFontAwesomeV5: false,
  isPhotoFigcaption: true,
  islazyload: false,
  isanchor: true
  
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isSidebar: true  
  }</script><noscript><style>
#page-header {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 4.2.0"></head><body><canvas class="fireworks"></canvas><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220501212415.jpg" onerror="onerror=null;src='https://gitee.com/qingyu1011/blog_img/raw/master/img/20201006230440.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">87</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">81</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">15</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div></div></div><i class="fa fa-arrow-right on" id="toggle-sidebar" aria-hidden="true">     </i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#spring一"><span class="toc-number">1.</span> <span class="toc-text"> Spring（一）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#spring的概述"><span class="toc-number">2.</span> <span class="toc-text"> Spring的概述</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#spring是什么"><span class="toc-number">2.1.</span> <span class="toc-text"> Spring是什么</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#spring的两大核心ioc和aop"><span class="toc-number">2.2.</span> <span class="toc-text"> Spring的两大核心（IoC和AOP）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#spring的发展历程"><span class="toc-number">2.3.</span> <span class="toc-text"> Spring的发展历程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#spring的优势"><span class="toc-number">2.4.</span> <span class="toc-text"> Spring的优势</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#spring体系结构"><span class="toc-number">2.5.</span> <span class="toc-text"> Spring体系结构</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ioc的概念和作用"><span class="toc-number">3.</span> <span class="toc-text"> IoC的概念和作用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#程序的耦合和解耦"><span class="toc-number">3.1.</span> <span class="toc-text"> 程序的耦合和解耦</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#解决程序耦合的思路"><span class="toc-number">3.2.</span> <span class="toc-text"> 解决程序耦合的思路</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#工厂模式解耦"><span class="toc-number">3.3.</span> <span class="toc-text"> 工厂模式解耦</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ioc控制反转inversion-of-control"><span class="toc-number">3.4.</span> <span class="toc-text"> IoC：控制反转（Inversion Of Control）</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#使用spring的ioc解决程序耦合"><span class="toc-number">4.</span> <span class="toc-text"> 使用Spring的IOC解决程序耦合</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#环境准备"><span class="toc-number">4.1.</span> <span class="toc-text"> 环境准备</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#spring基于xml配置的ioc"><span class="toc-number">4.2.</span> <span class="toc-text"> Spring基于Xml配置的IOC</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#spring基于xml配置的ioc的补充说明细节"><span class="toc-number">4.3.</span> <span class="toc-text"> Spring基于Xml配置的IOC的补充说明（细节）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#applicationcontext"><span class="toc-number">4.3.1.</span> <span class="toc-text"> ApplicationContext</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#beanfactory"><span class="toc-number">4.3.2.</span> <span class="toc-text"> BeanFactory</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#beanfactory和applicationcontext的区别"><span class="toc-number">4.3.3.</span> <span class="toc-text"> BeanFactory和ApplicationContext的区别</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#spring中关于bean的细节"><span class="toc-number">4.4.</span> <span class="toc-text"> Spring中关于Bean的细节</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3种创建bean对象的方式"><span class="toc-number">4.4.1.</span> <span class="toc-text"> 3种创建Bean对象的方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bean对象的作用范围和生命周期"><span class="toc-number">4.4.2.</span> <span class="toc-text"> Bean对象的作用范围和生命周期</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#spring中的依赖注入"><span class="toc-number">5.</span> <span class="toc-text"> Spring中的依赖注入</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#构造函数注入"><span class="toc-number">5.1.</span> <span class="toc-text"> 构造函数注入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#set方法注入"><span class="toc-number">5.2.</span> <span class="toc-text"> set方法注入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#注入集合数据"><span class="toc-number">5.3.</span> <span class="toc-text"> 注入集合数据</span></a></li></ol></li></ol></div></div></div><div id="body-wrap"><div class="post-bg" id="nav" style="background-image: url(https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220504095341.png)"><div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">Qing's Blog</a></span><span class="pull_right menus"><div id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span></span></div><div id="post-info"><div id="post-title"><div class="posttitle">Spring（一）</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2021-05-13 08:47:03"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2021-05-13</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2023-10-03 16:16:11"><i class="fa fa-history" aria-hidden="true"></i> 更新于 2023-10-03</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/SSM/">SSM</a></span></div><div class="meta-secondline"> <span class="post-meta-wordcount"><i class="post-meta__icon fa fa-file-word-o" aria-hidden="true"></i><span>字数总计:</span><span class="word-count">10.1k</span><span class="post-meta__separator">|</span><i class="post-meta__icon fa fa-clock-o" aria-hidden="true"></i><span>阅读时长: 35 分钟</span></span></div><div class="meta-thirdline"><span class="post-meta-pv-cv"><span class="post-meta__separator">|</span><i class="fa fa-eye post-meta__icon" aria-hidden="true"> </i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"><span class="post-meta__separator">|</span><i class="post-meta__icon fa fa-comment-o" aria-hidden="true"></i><span>评论数:</span><a href="/2021/05/13/Spring01/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count comment-count" data-xid="/2021/05/13/Spring01/" itemprop="commentCount"></span></a></span></div></div></div></div><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h1 id="spring一"><a class="markdownIt-Anchor" href="#spring一"></a> Spring（一）</h1>
<p><a href="https://www.w3cschool.cn/wkspring/" target="_blank" rel="noopener"><strong>W3C Spring 教程</strong></a></p>
<p><a href="https://dunwu.github.io/spring-tutorial/#/summary/spring-overview" target="_blank" rel="noopener"><strong>Spring教程&amp;面经</strong></a></p>
<p><a href="https://www.liaoxuefeng.com/wiki/1252599548343744/1266263217140032" target="_blank" rel="noopener">廖雪峰Spring开发</a></p>
<p><a href="https://www.yiibai.com/spring" target="_blank" rel="noopener">易百教程：Spring教程</a></p>
<ul>
<li>Spring的概述
<ul>
<li>Spring是什么</li>
<li><strong>Spring的两大核心（IoC和AOP）</strong></li>
<li>Spring的发展历程和优势</li>
<li><mark>Spring体系结构</mark></li>
</ul>
</li>
<li>程序的耦合及解耦
<ul>
<li>曾经案例中的问题（<a href="https://www.bilibili.com/video/BV1mE411X7yp?p=85" target="_blank" rel="noopener">视频讲解</a>）</li>
<li>工厂模式解耦</li>
</ul>
</li>
<li>IOC概念和Spring中的IOC
<ul>
<li>Spring中基于XML的IOC环境搭建</li>
</ul>
</li>
<li>依赖注入（Dependency Injection）</li>
</ul>
<h1 id="spring的概述"><a class="markdownIt-Anchor" href="#spring的概述"></a> Spring的概述</h1>
<p><a href="https://dunwu.github.io/spring-tutorial/#/summary/spring-overview" target="_blank" rel="noopener">Spring 概述</a></p>
<p><a href="https://www.w3cschool.cn/wkspring/pesy1icl.html" target="_blank" rel="noopener">W3C Spring概述</a></p>
<h2 id="spring是什么"><a class="markdownIt-Anchor" href="#spring是什么"></a> Spring是什么</h2>
<blockquote>
<p>Spring 是分层的 Java SE/EE 应用 full-stack 轻量级开源框架，以 **IoC（Inverse Of Control：反转控制）**和 **AOP（Aspect Oriented Programming：面向切面编程）**为内核，<strong>提供了展现层 Spring MVC 和持久层 Spring JDBC 以及业务层事务管理等众多的企业级应用技术</strong>，还能整合开源世界众多著名的第三方框架和类库，逐渐成为使用最多的 Java EE 企业应用开源框架。</p>
<p><img src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220504104242.png" alt="三层架构" /></p>
</blockquote>
<h2 id="spring的两大核心ioc和aop"><a class="markdownIt-Anchor" href="#spring的两大核心ioc和aop"></a> Spring的两大核心（IoC和AOP）</h2>
<p><strong><mark>Spring 最核心的两个技术思想：IoC 和 Aop</mark></strong></p>
<blockquote>
<p><code>IoC</code> 即 <code>Inversion of Control</code> ，意为控制反转。</p>
<p>Spring 最认同的技术是控制反转的**依赖注入（DI）**模式。控制反转（IoC）是一个通用的概念，它可以用许多不同的方式去表达，依赖注入仅仅是控制反转的一个具体的例子。</p>
<p>当编写一个复杂的 Java 应用程序时，应用程序类应该尽可能的独立于其他的 Java 类来增加这些类可重用可能性，当进行单元测试时，可以使它们独立于其他类进行测试。依赖注入（或者有时被称为配线）有助于将这些类粘合在一起，并且在同一时间让它们保持独立。</p>
<p>到底什么是依赖注入？让我们将这两个词分开来看一看。这里将依赖关系部分转化为两个类之间的关联。例如，类 A 依赖于类 B。现在，让我们看一看第二部分，注入。所有这一切都意味着类 B 将通过 IoC 被注入到类 A 中。</p>
<p>依赖注入可以以向构造函数传递参数的方式发生，或者通过使用 setter 方法 post-construction。</p>
</blockquote>
<blockquote>
<p><code>Aop</code>即<code>Aspect Oriented Programming</code>，面向切面编程</p>
<p>Spring 框架的一个关键组件是<strong>面向切面的程序设计（AOP）<strong>框架。一个程序中跨越多个点的功能被称为</strong>横切关注点</strong>，这些横切关注点在概念上独立于应用程序的业务逻辑。有各种各样常见的很好的关于方面的例子，比如日志记录、声明性事务、安全性，和缓存等等。</p>
<p><strong>在 OOP 中模块化的关键单元是类，而在 AOP 中模块化的关键单元是方切面</strong>。<strong>AOP 帮助你将横切关注点从它们所影响的对象中分离出来，然而依赖注入帮助你将你的应用程序对象从彼此中分离出来</strong>。</p>
<p><strong>Spring 框架的 AOP 模块提供了面向方面的程序设计实现，允许你定义拦截器方法和切入点，可以实现将应该被分开的代码干净的分开功能。</strong></p>
</blockquote>
<h2 id="spring的发展历程"><a class="markdownIt-Anchor" href="#spring的发展历程"></a> Spring的发展历程</h2>
<blockquote>
<ul>
<li>1997 年 IBM 提出了 EJB 的思想</li>
<li>1998 年，SUN 制定开发标准规范 EJB1.0</li>
<li>1999 年，EJB1.1 发布</li>
<li>2001 年，EJB2.0 发布</li>
<li>2003 年，EJB2.1 发布</li>
<li>2006 年，EJB3.0 发布</li>
<li>Rod Johnson（Spring 之父）
<ul>
<li>Expert One-to-One J2EE Design and Development(2002)：阐述了 J2EE 使用 EJB 开发设计的优点及解决方案</li>
<li>Expert One-to-One J2EE Development without EJB(2004)：阐述了 J2EE 开发不使用 EJB 的解决方式（Spring 雏形）</li>
</ul>
</li>
<li>2017 年 9 月份发布了 spring 的最新版本 spring 5.0 通用版（GA）</li>
</ul>
</blockquote>
<h2 id="spring的优势"><a class="markdownIt-Anchor" href="#spring的优势"></a> Spring的优势</h2>
<blockquote>
<ul>
<li><strong>方便解耦，简化开发</strong>：通过 Spring 提供的 IoC 容器，可以将对象间的依赖关系交由 Spring 进行控制，避免硬编码所造成的过度程序耦合。用户也不必再为单例模式类、属性文件解析等这些很底层的需求编写代码，可以更专注于上层的应用</li>
<li><strong>AOP 编程的支持</strong>：通过 Spring 的 AOP 功能，方便进行面向切面的编程，许多不容易用传统 OOP 实现的功能可以通过 AOP 轻松应付</li>
<li><strong>声明式事务的支持</strong>：可以将我们从单调烦闷的事务管理代码中解脱出来，通过声明式方式灵活的进行事务的管理，提高开发效率和质量</li>
<li>方便程序的测试：可以用非容器依赖的编程方式进行几乎所有的测试工作，测试不再是昂贵的操作，而是随手可做的事情</li>
<li>方便集成各种优秀框架：Spring 可以降低各种框架的使用难度，提供了对各种优秀框架（Struts、Hibernate、Hessian、Quartz等）的直接支持</li>
<li>降低 JavaEE API 的使用难度：Spring 对 JavaEE API（如 JDBC、JavaMail、远程调用等）进行了薄薄的封装层，使这些 API 的使用难度大为降低</li>
<li>Java 源码是经典学习范例：<strong>Spring 的源代码设计精妙、结构清晰、匠心独用，处处体现着大师对 Java 设计模式灵活运用以及对 Java 技术的高深造诣</strong>。它的源代码无意是 Java 技术的最佳实践的范例</li>
</ul>
</blockquote>
<h2 id="spring体系结构"><a class="markdownIt-Anchor" href="#spring体系结构"></a> <mark>Spring体系结构</mark></h2>
<p><strong><a href="https://www.w3cschool.cn/wkspring/dcu91icn.html" target="_blank" rel="noopener">W3C Spring 体系结构</a></strong></p>
<p><a href="https://dunwu.github.io/spring-tutorial/#/summary/spring-overview?id=_3-spring-%e4%bd%93%e7%b3%bb%e7%bb%93%e6%9e%84" target="_blank" rel="noopener">Spring体系结构</a></p>
<blockquote>
<p>Spring有可能成为所有企业应用程序的一站式服务点，然而，<strong>Spring是模块化的，允许你挑选和选择适用于你的模块，不必要把剩余部分也引入。</strong></p>
</blockquote>
<p><img src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220504104256.png" alt="Spring体系结构" /></p>
<ul>
<li>核心容器：核心容器由 <strong>spring-core，spring-beans，spring-context，spring-context-support和spring-expression</strong>（SpEL，Spring 表达式语言，Spring Expression Language）等模块组成</li>
<li>数据访问/集成：数据访问/集成层包括 JDBC，ORM，OXM，JMS 和事务处理模块</li>
<li>Web：Web 层由 Web，Web-MVC，Web-Socket 和 Web-Portlet 组成</li>
<li>其他：还有其他一些重要的模块，像 <strong>AOP</strong>，Aspects，Instrumentation，Web 和测试模块</li>
</ul>
<p>具体可查看<a href="https://www.w3cschool.cn/wkspring/dcu91icn.html" target="_blank" rel="noopener"><strong>W3C Spring 体系结构</strong></a></p>
<p>（<a href="https://www.bilibili.com/video/BV1mE411X7yp?p=81" target="_blank" rel="noopener">视频讲解</a>）</p>
<hr />
<h1 id="ioc的概念和作用"><a class="markdownIt-Anchor" href="#ioc的概念和作用"></a> IoC的概念和作用</h1>
<h2 id="程序的耦合和解耦"><a class="markdownIt-Anchor" href="#程序的耦合和解耦"></a> 程序的耦合和解耦</h2>
<p><a href="https://www.jianshu.com/p/6fee3f886c86" target="_blank" rel="noopener">程序的耦合和解耦思路</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/74358013" target="_blank" rel="noopener">Spring程序间的耦合和解耦</a></p>
<p><strong>程序的耦合</strong>：</p>
<blockquote>
<p><strong>耦合性(Coupling)，也叫耦合度，是对模块间关联程度的度量</strong>。耦合的强弱取决于模块间接口的复杂性、调用模块的方式以及通过界面传送数据的多少。模块间的耦合度是指模块之间的依赖关系，包括控制关系、调用关系、数据传递关系。<strong>模块间联系越多，其耦合性越强，同时表明其独立性越差( 降低耦合性，可以提高其独立性)</strong>。耦合性存在于各个领域，而非软件设计中独有的，但是我们只讨论软件工程中的耦合。</p>
<p>在软件工程中，耦合指的就是就是对象之间的依赖性。对象之间的耦合越高，维护成本越高。因此对象的设计应使类和构件之间的耦合最小。软件设计中通常用耦合度和内聚度作为衡量模块独立程度的标准。<strong>划分模块的一个准则就是高内聚低耦合</strong>。</p>
</blockquote>
<p>划分模块有以下分类：</p>
<ul>
<li>内容耦合：当一个模块直接修改或操作另一个模块的数据时，或一个模块不通过正常入口而转入另一个模块时，这样的耦合被称为内容耦合。内容耦合是最高程度的耦合，应该避免使用</li>
<li>公共耦合：两个或两个以上的模块共同引用一个全局数据项，这种耦合被称为公共耦合。在具有大量公共耦合的结构中，确定究竟是哪个模块给全局变量赋了一个特定的值是十分困难的</li>
<li>外部耦合：一组模块都访问同一全局简单变量而不是同一全局数据结构，而且不是通过参数表传递该全局变量的信息，则称之为外部耦合</li>
<li>控制耦合：一个模块通过接口向另一个模块传递一个控制信号，接受信号的模块根据信号值而进行适当的动作，这种耦合被称为控制耦合</li>
<li>标记耦合：若一个模块 A 通过接口向两个模块 B 和 C 传递一个公共参数，那么称模块 B 和 C 之间存在一个标记耦合</li>
<li>数据耦合：模块之间通过参数来传递数据，那么被称为数据耦合。数据耦合是最低的一种耦合形式，系统中一般都存在这种类型的耦合，因为为了完成一些有意义的功能，往往需要将某些模块的输出数据作为另一些模块的输入数据</li>
<li>非直接耦合：两个模块之间没有直接关系，它们之间的联系完全是通过主模块的控制和调用来实现的</li>
</ul>
<blockquote>
<p><strong><mark>总结</mark></strong>：<strong>耦合是影响软件复杂程度和设计质量的一个重要因素</strong>，在设计上我们应采用以下原则：<strong>如果模块间必存在耦合，就尽量使用数耦合，少用控制耦合，限制公共耦合的范围，尽量避免使用内容耦合</strong>。</p>
</blockquote>
<p><strong>内聚与耦合</strong>：</p>
<blockquote>
<p><strong>内聚标志一个模块内各个元素彼此结合的紧密程度</strong>，它是信息隐蔽和局部化概念的自然扩展。<strong>内聚是从功能角度来度量模块内的联系，一个好的内聚模块应当恰好做一件事。它描述的是模块内的功能联系</strong>。<strong>耦合是软件结构中各模块之间相互连接的一种度量，耦合强弱取决于模块间接口的复杂程度、进入或访问一个模块的点以及通过接口的数据</strong>。 程序讲究的是**<mark>低耦合，高内聚</mark><strong>。就是</strong>同一个模块内的各个元素之间要高度紧密，但是各个模块之间的相互依存度却要不那么紧密。**</p>
<p>内聚和耦合是密切相关的，同其他模块存在高耦合的模块意味着低内聚，而高内聚的模块意味着该模块同其他模块之间是低耦合。<strong>在进行软件设计时，应力争做到高内聚，低耦合</strong>。</p>
</blockquote>
<p>JDBC工程代码的程序耦合分析：<a href="https://www.bilibili.com/video/BV1mE411X7yp?p=82" target="_blank" rel="noopener">视频讲解</a></p>
<h2 id="解决程序耦合的思路"><a class="markdownIt-Anchor" href="#解决程序耦合的思路"></a> 解决程序耦合的思路</h2>
<p>编译期依赖：<a href="https://www.bilibili.com/video/BV1mE411X7yp?p=83" target="_blank" rel="noopener">视频讲解</a></p>
<p>实际开发中应该做到：编译期不依赖，运行时才依赖</p>
<p><strong>解耦的思路：</strong></p>
<ol>
<li><strong>使用反射来创建对象</strong>，避免使用<code>new</code>关键字</li>
<li>通过读取<strong>配置文件</strong>来获取要创建的对象的全限定类名</li>
</ol>
<blockquote>
<p>当是我们讲解 jdbc 时，是通过反射来注册驱动的，代码如下：<code>Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</code></p>
<p>此时的好处是，我们的类中不再依赖具体的驱动类，此时就算删除 mysql 的驱动 jar 包，依然可以编译（运行就不要想了，没有驱动不可能运行成功的）。</p>
<p>同时，也产生了一个新的问题，mysql 驱动的全限定类名字符串是在 java 类中写死的，一旦要改还是要修改源码。</p>
<p><strong>解决这个问题也很简单，使用配置文件配置。</strong></p>
</blockquote>
<p><a href="https://www.bilibili.com/video/BV1mE411X7yp?p=84" target="_blank" rel="noopener">视频讲解</a></p>
<h2 id="工厂模式解耦"><a class="markdownIt-Anchor" href="#工厂模式解耦"></a> 工厂模式解耦</h2>
<p><a href="https://www.bilibili.com/video/BV1mE411X7yp?p=86" target="_blank" rel="noopener">视频讲解</a></p>
<blockquote>
<p>在实际开发中我们可以<strong>把三层的对象都使用配置文件配置起来</strong>，当启动服务器应用加载的时候，让一个类中的方法通过读取配置文件，把这些对象创建出来并存起来。在接下来的使用的时候，直接拿过来用就好了。</p>
<p>那么，这个<strong>读取配置文件，创建和获取三层对象的类就是工厂</strong></p>
</blockquote>
<p><strong><mark>Bean</mark>，在计算机英语中，有可重用组件的含义</strong></p>
<p><strong>JavaBean：用Java语言编写的可重用组件</strong></p>
<p>我们要创建一个Bean对象的工厂：</p>
<ul>
<li>需要一个配置文件来配置我们的dao和service（配置内容：唯一标识 = 全限定类名（key-value））
<ul>
<li><strong>配置文件可以是xml文件，也可以是properties文件</strong></li>
</ul>
</li>
<li>通过读取配置文件配置的内容，使用反射创建对象</li>
</ul>
<p><img src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220504104311.png" alt="" /></p>
<p>（<a href="https://www.bilibili.com/video/BV1mE411X7yp?p=88" target="_blank" rel="noopener">视频讲解</a>）</p>
<h2 id="ioc控制反转inversion-of-control"><a class="markdownIt-Anchor" href="#ioc控制反转inversion-of-control"></a> <mark>IoC：控制反转（Inversion Of Control）</mark></h2>
<p><strong><a href="https://www.w3cschool.cn/wkspring/f8pc1hae.html" target="_blank" rel="noopener">Spring IoC 容器</a></strong></p>
<p><strong><a href="https://zhuanlan.zhihu.com/p/122979972" target="_blank" rel="noopener">Spring IoC是什么</a></strong></p>
<p><a href="https://www.liaoxuefeng.com/wiki/1252599548343744/1282381977747489" target="_blank" rel="noopener">廖雪峰 IoC原理</a></p>
<p><strong><a href="https://blog.csdn.net/bestone0213/article/details/47424255" target="_blank" rel="noopener">依赖注入和控制反转的理解</a></strong></p>
<p>在上面解耦的思路中有2个问题：</p>
<ol>
<li>
<p>存哪去？</p>
<ul>
<li>分析：由于我们是很多对象，肯定要找个集合来存。这时候有 Map 和 List 供选择。到底选 Map 还是 List 就看我们有没有查找需求。有查找需求，选 Map。所以我们的答案就是在应用加载时，创建一个 Map，用于存放三层对象。我们把这个Map称之为<strong>容器</strong></li>
</ul>
</li>
<li>
<p>什么是工厂？工厂就是负责给我们从容器中获取指定对象的类。这时候我们获取对象的方式发生了改变。之前我们在获取对象时，都是采用new的方式。是主动的：</p>
<p><img src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220504104326.png" alt="主动new对象" /></p>
<p>而现在，我们获取对象时，同时跟工厂要，<strong>由工厂为我们查找或者创建对象</strong>，是被动的：</p>
<p><img src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220504104342.png" alt="由工厂查找或创建对象" /></p>
</li>
</ol>
<p><strong>这种被动接收的方式获取对象的思想就是<mark>IoC（控制反转）</mark>，它是Spring框架的核心之一。</strong></p>
<blockquote>
<p><strong>控制反转（Inversion of Control，缩写为IoC）</strong>，是面向对象编程中的一种设计原则，可以<strong>用来降低计算机代码之间的耦合度</strong>。其中<strong>最常见的方式叫做依赖注入（Dependency Injection，简称DI），还有一种方式叫“依赖查找”（Dependency Lookup）</strong>。通过控制反转，对象在被创建的时候，由一个调控系统内所有对象的外界实体将其所依赖的对象的引用传递给它。也可以说，依赖被注入到对象中。</p>
</blockquote>
<p><strong>明确IoC的作用：削减计算机程序的耦合（解除我们代码中的依赖关系）</strong></p>
<p>（<a href="https://www.bilibili.com/video/BV1mE411X7yp?p=90" target="_blank" rel="noopener">视频讲解</a>）</p>
<blockquote>
<p>为何是反转，哪些方面反转了：有反转就有正转，传统应用程序是由我们自己在对象中主动控制去直接获取依赖对象，也就是正转；而反转则是由容器来帮忙创建及注入依赖对象；为何是反转？<strong>因为由容器帮我们查找及注入依赖对象，对象只是被动的接受依赖对象，所以是反转；哪些方面反转了？依赖对象的获取被反转了。</strong></p>
<p>传统程序设计如下图，都是主动去创建相关对象然后再组合起来：</p>
<p><img src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220504104356.png" alt="传统应用程序示意图（正转）" /></p>
<p>当有了IoC/DI的容器后，在客户端类中不再主动去创建这些对象了，如下图所示：</p>
<p><img src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220504104412.png" alt="有IoC/DI容器后程序结构示意图（反转）" /></p>
</blockquote>
<p><strong>IoC 不是一种技术，只是一种思想</strong>，一个重要的面向对象编程的法则，<strong>它能指导我们如何设计出松耦合、更优良的程序</strong>。传统应用程序都是由我们在类内部主动创建依赖对象，从而导致类与类之间高耦合，难于测试；<strong>有了IoC容器后，把创建和查找依赖对象的控制权交给了容器，由容器进行注入组合对象</strong>，所以对象与对象之间是<strong>松散耦合</strong>，这样也方便测试，利于功能复用，更重要的是使得程序的整个体系结构变得非常灵活。</p>
<blockquote>
<p>其实<strong>IoC对编程带来的最大改变不是从代码上，而是从思想上，发生了“主从换位”的变化。应用程序原本是老大，要获取什么资源都是主动出击，但是在IoC/DI思想中，应用程序就变成被动的了，被动的等待IoC容器来创建并注入它所需要的资源了。</strong></p>
<p><strong>IoC很好的体现了面向对象设计法则之一—— 好莱坞法则：“别找我们，我们找你”；即由IoC容器帮对象找相应的依赖对象并注入，而不是由对象主动去找。</strong></p>
</blockquote>
<p><strong>IoC和DI</strong>：</p>
<p><strong>DI—Dependency Injection，即“依赖注入”</strong>：<strong>组件之间依赖关系</strong>由容器在运行期决定，形象的说，即<strong>由容器动态的将某个依赖关系注入到组件之中</strong>。**依赖注入的目的并非为软件系统带来更多功能，而是为了提升组件重用的频率，并为系统搭建一个灵活、可扩展的平台。**通过依赖注入机制，我们只需要通过简单的配置，而无需任何代码就可指定目标需要的资源，完成自身的业务逻辑，而不需要关心具体的资源来自何处，由谁实现。</p>
<p>理解DI的关键是：“谁依赖谁，为什么需要依赖，谁注入谁，注入了什么”，那我们来深入分析一下：</p>
<p>●谁依赖于谁：当然是<strong>应用程序依赖于IoC容器</strong>；</p>
<p>●为什么需要依赖：<strong>应用程序需要IoC容器来提供对象需要的外部资源</strong>；</p>
<p>●谁注入谁：很明显是<strong>IoC容器注入应用程序某个对象，应用程序依赖的对象</strong>；</p>
<p>●注入了什么：就是<strong>注入某个对象所需要的外部资源（包括对象、资源、常量数据）</strong>。</p>
<p><strong>IoC和DI</strong>由什么<strong>关系</strong>呢？其实它们<strong>是同一个概念的不同角度描述</strong>，由于控制反转概念比较含糊（可能只是理解为容器控制对象这一个层面，很难让人想到谁来维护对象关系），所以2004年大师级人物Martin Fowler又给出了一个新的名字：“依赖注入”，相对IoC 而言，“依赖注入”明确描述了“被注入对象依赖IoC容器配置依赖对象”。</p>
<hr />
<h1 id="使用spring的ioc解决程序耦合"><a class="markdownIt-Anchor" href="#使用spring的ioc解决程序耦合"></a> <mark>使用Spring的IOC解决程序耦合</mark></h1>
<blockquote>
<p>这里我们的案例是：账户的业务层和持久层的依赖关系解决。在开始 spring 的配置之前，我们要先准备一下环境。<strong>由于我们是使用 spring 解决依赖关系，并不是真正的要做增删改查操作，所以此时我们没必要写实体类</strong>。（<strong>因为IoC只是解决程序间的耦合问题</strong>）并且我们在此处使用的是java工程，不是java web 工程。（pom.xml文件使用<code>&lt;packaging&gt;jar&lt;/packaging&gt;</code>）</p>
</blockquote>
<p><strong>Spring IoC 容器完全由实际编写的配置元数据的格式解耦</strong>。有下面<strong>三个重要的方法把配置元数据提供给 Spring 容器：</strong></p>
<ul>
<li><strong>基于 XML 的配置文件</strong></li>
<li><strong>基于注解的配置</strong></li>
<li>基于 Java 的配置</li>
</ul>
<blockquote>
<p>提示：对于基于 XML 的配置，Spring 2.0 以后使用 Schema 的格式，使得不同类型的配置拥有了自己的命名空间，使配置文件更具扩展性。</p>
</blockquote>
<p><img src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220504104426.png" alt="Bean 与 Spring 容器之间的关系" /></p>
<p><strong><a href="https://www.w3cschool.cn/wkspring/8kei1icc.html" target="_blank" rel="noopener">Spring Bean 定义</a></strong></p>
<h2 id="环境准备"><a class="markdownIt-Anchor" href="#环境准备"></a> 环境准备</h2>
<p>首先准备Spring开发包：（其实<strong>jar包可以通过Maven来导入</strong>）</p>
<p><a href="https://spring.io/" target="_blank" rel="noopener">Spring官网</a></p>
<p><a href="https://repo.spring.io/libs-release-local/org/springframework/spring/" target="_blank" rel="noopener">下载地址</a></p>
<p><img src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220504104500.png" alt="" /></p>
<p>其中<code>spring-framework-5.0.2.RELEASE-dist</code>就是我们需要的Spring开发包，解压后目录结构如下：</p>
<p><img src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220504104517.png" alt="" /></p>
<ul>
<li>docs：API 和开发规范</li>
<li>libs：jar 包和源码</li>
<li>schema：约束</li>
</ul>
<p>这里只是以5.0.2版本举个例子，注意：</p>
<ul>
<li>Spring5版本是用 jdk8 编写的，所以要求jdk 版本是8及以上</li>
<li>tomcat的版本要求8.5及以上</li>
</ul>
<p>创建一个普通的Maven工程，修改pom.xml如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>top.qing<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>Spring01_IoC_Xml<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">source</span>&gt;</span>6<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">target</span>&gt;</span>6<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>创建持久层接口AccountDao及其实现类如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">AccountDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 保存账户</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">saveAccount</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> dao.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> dao.AccountDao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountDaoImpl</span> <span class="keyword">implements</span> <span class="title">AccountDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveAccount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"保存了账户"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>创建业务层接口AccountService及其实现类如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">AccountService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 保存用户(模拟保存)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">saveAccount</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> dao.AccountDao;</span><br><span class="line"><span class="keyword">import</span> dao.impl.AccountDaoImpl;</span><br><span class="line"><span class="keyword">import</span> service.AccountService;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title">AccountService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> AccountDao accountDao = <span class="keyword">new</span> AccountDaoImpl();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveAccount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        accountDao.saveAccount();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong><mark>注意</mark></strong>：如果pom.xml中没有以下内容：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">source</span>&gt;</span>6<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">target</span>&gt;</span>6<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在接口的实现类中<code>@Override</code>可能会报错：</p>
<p><img src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220504104542.png" alt="@Override报错" /></p>
<h2 id="spring基于xml配置的ioc"><a class="markdownIt-Anchor" href="#spring基于xml配置的ioc"></a> Spring基于Xml配置的IOC</h2>
<blockquote>
<p>Bean 定义：被称作 bean 的对象是构成应用程序的支柱也是由 Spring IoC 容器管理的。bean 是一个被实例化，组装，并通过 Spring IoC 容器所管理的对象。这些 bean 是由用容器提供的配置元数据创建的.</p>
<p><strong>Bean 与 Spring 容器的关系</strong>，如下图：</p>
<p><img src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220504104557.png" alt="" /></p>
</blockquote>
<p><a href="https://www.bilibili.com/video/BV1mE411X7yp?p=92" target="_blank" rel="noopener">视频讲解</a></p>
<p>首先在pom.xml导入相关依赖：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--Spring核心容器--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--log4j--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>我们在IDEA上可以通过Maven插件查看<strong>依赖关系视图</strong>：</p>
<p><img src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220504104614.gif" alt="通过IDEA查看项目依赖关系视图" /></p>
<p><img src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220504104631.png" alt="依赖关系视图" /></p>
<p>这里就要再提一下<a href="#Spring%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84">Spring体系结构</a>中的Spring核心容器完整依赖图示：</p>
<p><img src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220504104644.png" alt="" /></p>
<p>具体可查看：<a href="https://www.w3cschool.cn/wkspring/dcu91icn.html" target="_blank" rel="noopener"><strong>W3C Spring 体系结构</strong></a></p>
<p>接下来我们在resources文件夹下创建bean.xml，代码如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--把对象的创建交给Spring来管理--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountService"</span> <span class="attr">class</span>=<span class="string">"service.impl.AccountServiceImpl"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountDao"</span> <span class="attr">class</span>=<span class="string">"dao.impl.AccountDaoImpl"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>（注意这里bean.xml的约束）</p>
<blockquote>
<p><strong><code>&lt;bean&gt;</code>标签</strong>：用于配置让Spring创建对象，并且存入IoC容器之中</p>
<ul>
<li><strong>id属性：对象的唯一标识</strong></li>
<li><strong>class属性：指定要创建对象的全限定类名</strong></li>
</ul>
</blockquote>
<p><strong><a href="https://blog.csdn.net/qq754772661/article/details/115622760" target="_blank" rel="noopener">spring ioc(使用xml配置)|bean标签及其子标签</a></strong></p>
<p>接下来我们在ui层下创建Client类，用于模拟客户端来测试配置是否成功：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> ui;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> dao.AccountDao;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"><span class="keyword">import</span> service.AccountService;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 模拟一个表现层（客户端）</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取Spring的IoC核心容器，并根据id获取对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 1.使用ApplicationContext接口，获取Spring核心容器对象</span></span><br><span class="line">        ApplicationContext applicationContext = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"bean.xml"</span>);</span><br><span class="line">        <span class="comment">// 2.根据bean.xml文件中&lt;bean&gt;标签的的id来获取对象</span></span><br><span class="line">        AccountService accountService = (AccountService) applicationContext.getBean(<span class="string">"accountService"</span>);</span><br><span class="line">        System.out.println(accountService);</span><br><span class="line">        AccountDao accountDao = (AccountDao) applicationContext.getBean(<span class="string">"accountDao"</span>);</span><br><span class="line">        System.out.println(accountDao);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果如下：</p>
<p><img src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220504104701.png" alt="成功通过bean标签的id获取到对象" /></p>
<h2 id="spring基于xml配置的ioc的补充说明细节"><a class="markdownIt-Anchor" href="#spring基于xml配置的ioc的补充说明细节"></a> Spring基于Xml配置的IOC的补充说明（细节）</h2>
<p><a href="https://www.bilibili.com/video/BV1mE411X7yp?p=93" target="_blank" rel="noopener">视频讲解</a></p>
<ul>
<li>ApplicationContext</li>
<li>BeanFactory</li>
<li>BeanFactory和ApplicationContext的区别</li>
</ul>
<h3 id="applicationcontext"><a class="markdownIt-Anchor" href="#applicationcontext"></a> ApplicationContext</h3>
<p><strong><a href="https://www.w3cschool.cn/wkspring/yqdx1mm5.html" target="_blank" rel="noopener">Spring ApplicationContext 容器</a></strong></p>
<p>我们可以先通过IDEA来看一下ApplicationContext的Diagrams，方法如下：</p>
<p><img src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220504104723.gif" alt="通过IDEA的Diagrams--&gt;show Diagram" /></p>
<p><img src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220504104737.png" alt="" /></p>
<p>然后我们右键选择ApplicationContext，<strong>点击show Implementations可以查看ApplicationContext接口的实现类：</strong></p>
<p><img src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220504104751.png" alt="ApplicationContext接口的全部实现类" /></p>
<p>其中常用的三个实现类：</p>
<ul>
<li><strong>ClassPathXmlApplicationContext：从类的根路径下加载配置文件（推荐使用）</strong></li>
<li><strong>FileSystemXmlApplicationContext</strong>：从磁盘路径上加载配置文件，配置文件可以在磁盘的任意位置（注意要有访问权限）</li>
<li><strong>AnnotationConfigApplicationContext</strong>：<strong>当我们使用注解配置容器对象时，需要使用此类来创建Spring 容器，它用来读取注解</strong></li>
</ul>
<blockquote>
<p><strong>Application Context 是 BeanFactory 的子接口，也被称为 Spring 上下文。</strong></p>
<p><strong>Application Context 是 spring 中较高级的容器</strong>。和 BeanFactory 类似，<strong>它可以加载配置文件中定义的 bean，将所有的 bean 集中在一起，当有请求的时候分配 bean</strong>。 另外，它增加了企业所需要的功能，比如，从属性文件中解析文本信息和将事件传递给所指定的监听器。</p>
<p>ApplicationContext 包含 BeanFactory 所有的功能，一般情况下，相对于 BeanFactory，ApplicationContext 会更加优秀。当然，BeanFactory 仍可以在轻量级应用中使用，比如移动设备或者基于 applet 的应用程序。</p>
<p>最常被使用的 ApplicationContext 接口实现类：</p>
<ul>
<li><strong>FileSystemXmlApplicationContext</strong>：该容器从 XML 文件中加载已被定义的 bean。在这里，你需要提供给构造器 XML 文件的完整路径。</li>
<li><strong>ClassPathXmlApplicationContext</strong>：该容器从 XML 文件中加载已被定义的 bean。在这里，你不需要提供 XML 文件的完整路径，只需正确配置 CLASSPATH 环境变量即可，因为，容器会从 CLASSPATH 中搜索 bean 配置文件。</li>
<li><strong>WebXmlApplicationContext</strong>：该容器会在一个 web 应用程序的范围内加载在 XML 文件中已被定义的 bean。</li>
</ul>
</blockquote>
<h3 id="beanfactory"><a class="markdownIt-Anchor" href="#beanfactory"></a> BeanFactory</h3>
<p><strong><a href="https://www.w3cschool.cn/wkspring/j3181mm3.html" target="_blank" rel="noopener">Spring BeanFactory 容器</a></strong></p>
<blockquote>
<p><strong>Spring 的 BeanFactory 容器是一个最简单的容器，它主要的功能是为依赖注入 （DI） 提供支持</strong>，这个容器接口在 org.springframework.beans.factory.BeanFactory中被定义。BeanFactory 和相关的接口，比如BeanFactoryAware、DisposableBean、InitializingBean，仍旧保留在 Spring 中，主要目的是向后兼容已经存在的和那些 Spring 整合在一起的第三方框架。</p>
<p>在 Spring 中，有大量对 BeanFactory 接口的实现。其中，<strong>最常被使用的是 XmlBeanFactory 类。这个容器从一个 XML 文件中读取配置元数据，由这些元数据来生成一个被配置化的系统或者应用。</strong></p>
<p><strong>在资源宝贵的移动设备或者基于 applet 的应用当中， BeanFactory 会被优先选择。否则，一般使用的是 ApplicationContext</strong>，除非你有更好的理由选择 BeanFactory。</p>
</blockquote>
<p>BeanFactory是Spring容器中的顶层接口，ApplicationContext是它的子接口</p>
<p><img src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220504104804.png" alt="" /></p>
<h3 id="beanfactory和applicationcontext的区别"><a class="markdownIt-Anchor" href="#beanfactory和applicationcontext的区别"></a> BeanFactory和ApplicationContext的区别</h3>
<p><a href="https://blog.csdn.net/pseudonym_/article/details/72826059" target="_blank" rel="noopener">Spring中BeanFactory和ApplicationContext的区别</a></p>
<p><a href="https://www.jianshu.com/p/fd8e441b98c8" target="_blank" rel="noopener">BeanFactory和ApplicationContext有什么区别？</a></p>
<ul>
<li><strong>ApplicationContext</strong>：在构建核心容器时，创建对象采取的策略是<strong>立即加载</strong>，只要一读完配置文件马上就创建配置文件中配置的对象（<strong>推荐使用</strong>）</li>
<li>BeanFactory：在构建核心容器时，创建对象采取的策略是<strong>延迟加载</strong>，只有当根据id获取对象了才创建相应的对象</li>
</ul>
<p>（<a href="https://www.bilibili.com/video/BV1mE411X7yp?p=94" target="_blank" rel="noopener">视频讲解</a>）</p>
<h2 id="spring中关于bean的细节"><a class="markdownIt-Anchor" href="#spring中关于bean的细节"></a> Spring中关于Bean的细节</h2>
<ul>
<li>3种创建Bean对象的方式</li>
<li>Bean对象的作用范围和生命周期</li>
</ul>
<p><strong><a href="https://www.w3cschool.cn/wkspring/8kei1icc.html" target="_blank" rel="noopener">Spring Bean 定义</a></strong></p>
<blockquote>
<p><strong>Bean标签</strong></p>
<p>作用：<strong>配置对象让Spring来创建</strong>。默认情况下它调用的是类中的无参构造函数，如果没有无参构造函数则不能创建成功</p>
<p>属性：</p>
<ul>
<li><strong>id：给对象在容器中提供一个唯一标识，用于获取对象</strong></li>
<li><strong>class：指定类的全限定类名，用于反射创建对象，默认情况下调用无参构造函数</strong></li>
<li>scope：指定对象的作用范围，取值有
<ul>
<li><strong>singleton：默认值，单例的</strong></li>
<li><strong>prototype：多例的</strong></li>
<li>request：WEB 项目中，Spring 创建一个 Bean 的对象，将对象存入到 request 域中</li>
<li>session：WEB 项目中，Spring 创建一个 Bean 的对象，将对象存入到 session 域中</li>
<li>global session：WEB 项目中，应用在 Portlet 环境。如果没有 Portlet 环境那么globalSession 相当于 session</li>
</ul>
</li>
<li>init-method：指定类中的初始化方法名称</li>
<li>destroy-method：指定类中销毁方法名称</li>
</ul>
</blockquote>
<h3 id="3种创建bean对象的方式"><a class="markdownIt-Anchor" href="#3种创建bean对象的方式"></a> 3种创建Bean对象的方式</h3>
<p><a href="https://www.bilibili.com/video/BV1mE411X7yp?p=95" target="_blank" rel="noopener">视频讲解</a></p>
<ol>
<li>
<p><strong>使用默认构造函数创建对象</strong>：在Spring的配置文件中使用**<code>&lt;bean&gt;</code>标签**，<strong>配以id和class属性之后，且没有其他属性和标签时，采用的就是默认构造函数创建bean对象</strong>，此时如果类中没有默认构造函数，则对象无法创建</p>
<p>这也是在我们上面的例子中所使用的（使用<strong>默认构造函数</strong>创建对象），在bean.xml文件中：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--把对象的创建交给Spring来管理--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--方法1：使用默认构造函数创建对象--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountService"</span> <span class="attr">class</span>=<span class="string">"top.qing.service.impl.AccountServiceImpl"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>使用普通工厂中的方法创建对象</strong>：<strong>使用某个类中的方法创建对象</strong>，并存入Spring容器</p>
<p>我们先来模拟一个工厂类，在factory包下创建InstanceFactory代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> top.qing.factory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> top.qing.service.AccountService;</span><br><span class="line"><span class="keyword">import</span> top.qing.service.impl.AccountServiceImpl;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 模拟一个工厂类（该类可能是存在于jar包中的，我们无法通过修改源码的方式来提供默认构造函数）</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InstanceFactory</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> AccountService <span class="title">getAccountService</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> AccountServiceImpl();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后在在bean.xml文件中：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--方法2：使用普通工厂中的方法创建对象--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"instanceFactory"</span> <span class="attr">class</span>=<span class="string">"top.qing.factory.InstanceFactory"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountService"</span> <span class="attr">factory-bean</span>=<span class="string">"instanceFactory"</span> <span class="attr">factory-method</span>=<span class="string">"getAccountService"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>此种方式是：先把工厂的创建交给 spring 来管理，然后在使用工厂的 bean 来调用里面的方法</p>
<ul>
<li>factory-bean 属性：用于指定实例工厂 bean 的 id</li>
<li>factory-method 属性：用于指定实例工厂中创建对象的方法</li>
</ul>
</blockquote>
</li>
<li>
<p><strong>使用工厂中的静态方法创建对象</strong>：使用<strong>某个类中的静态方法创建对象</strong>，并存入Spring容器</p>
<p>还是先模拟一个工厂类，在factory包下创建StaticFactory代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> top.qing.factory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> top.qing.service.AccountService;</span><br><span class="line"><span class="keyword">import</span> top.qing.service.impl.AccountServiceImpl;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 模拟一个工厂类（该类可能是存在于jar包中的，我们无法通过修改源码的方式来提供默认构造函数）</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StaticFactory</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> AccountService <span class="title">getAccountService</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> AccountServiceImpl();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后在在bean.xml文件中：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--方法3：使用工厂中的静态方法创建对象--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountService"</span> <span class="attr">class</span>=<span class="string">"top.qing.factory.StaticFactory"</span> <span class="attr">factory-method</span>=<span class="string">"getAccountService"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>此种方式是：使用 StaticFactory 类中的静态方法getAccountService创建对象，并存入 spring 容器</p>
<ul>
<li>id 属性：指定 bean 的 id，用于从容器中获取</li>
<li>class 属性：指定静态工厂的全限定类名</li>
<li>factory-method 属性：指定生产对象的静态方法</li>
</ul>
</blockquote>
</li>
</ol>
<h3 id="bean对象的作用范围和生命周期"><a class="markdownIt-Anchor" href="#bean对象的作用范围和生命周期"></a> Bean对象的作用范围和生命周期</h3>
<p>在<a href="#Spring%E4%B8%AD%E5%85%B3%E4%BA%8EBean%E7%9A%84%E7%BB%86%E8%8A%82">上面</a>已经详细介绍了Bean标签的相关属性了，这里再补充一下globalSession：</p>
<p><img src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220504104822.png" alt="全局session" /></p>
<p>（<a href="https://www.bilibili.com/video/BV1mE411X7yp?p=96" target="_blank" rel="noopener">视频讲解</a>）</p>
<ul>
<li><strong>单例对象：scope=&quot;singleton&quot;</strong></li>
<li><strong>多例对象：scope=&quot;prototype&quot;</strong></li>
</ul>
<blockquote>
<ul>
<li>
<p><strong>单例对象：一个应用只有一个对象的实例，它的作用范围就是整个引用</strong></p>
<p>生命周期：</p>
<ul>
<li>对象出生：当应用加载，创建容器时，对象就被创建了（立即加载）</li>
<li>对象活着：只要容器在，对象一直活着</li>
<li>对象死亡：当应用卸载，销毁容器时，对象就被销毁了</li>
</ul>
</li>
<li>
<p><strong>多例对象：每次访问对象时，都会重新创建对象实例</strong></p>
<p>生命周期：</p>
<ul>
<li>对象出生：当使用对象时，创建新的对象实例（延迟加载）</li>
<li>对象活着：只要对象在使用中，就一直活着</li>
<li>对象死亡：当对象长时间不用时，被 java 的垃圾回收器回收了</li>
</ul>
</li>
</ul>
<p>（<a href="https://www.bilibili.com/video/BV1mE411X7yp?p=97" target="_blank" rel="noopener">视频讲解</a>）</p>
</blockquote>
<p><a href="https://www.cnblogs.com/zhangliang88/p/5388472.html" target="_blank" rel="noopener">单例和多例的区别</a></p>
<p><a href="https://blog.csdn.net/qq_43652509/article/details/84330784" target="_blank" rel="noopener">单例模式和多例的区别</a></p>
<hr />
<h1 id="spring中的依赖注入"><a class="markdownIt-Anchor" href="#spring中的依赖注入"></a> <mark>Spring中的依赖注入</mark></h1>
<p><strong><a href="https://www.w3cschool.cn/wkspring/1h9m1h9m.html" target="_blank" rel="noopener">Spring 依赖注入</a></strong></p>
<p>在上面的[IoC：控制反转（Inversion Of Control）](#IoC：控制反转（Inversion Of Control）)中，我们已经详细介绍了<strong>IoC</strong>和<strong>DI</strong>了</p>
<blockquote>
<p><strong>依赖注入：Dependency Injection，是Spring框架核心IoC的具体实现。</strong></p>
<p>我们的程序在编写时，<strong>通过控制反转，把对象的创建交给了Spring，但是代码中不可能出现没有依赖的情况，IoC 解耦只是降低他们的依赖关系，但不会消除</strong>。例如：我们的业务层仍会调用持久层的方法。那这种业务层和持久层的依赖关系，在使用 spring 之后，就让 spring 来维护了。</p>
<p>简单的说，就是<strong>让框架把持久层对象传入业务层，而不用我们自己去获取</strong>。</p>
</blockquote>
<p>依赖注入：Dependency Injection；IOC的作用： 降低程序间的耦合（依赖关系）</p>
<p>依赖关系的管理：以后都交给spring来维护。在当前类需要用到其他类的对象，由spring为我们提供，我们只需要在配置文件中说明。依赖关系的维护就称之为<strong>依赖注入</strong>。</p>
<p><strong>依赖注入中能注入的数据有三类：</strong></p>
<ul>
<li><strong>基本类型和String</strong></li>
<li><strong>其他bean类型（在配置文件中或者注解配置过的bean）</strong></li>
<li><strong>复杂类型/集合类型</strong></li>
</ul>
<p><strong>注入的方式有三种</strong></p>
<ol>
<li><strong>使用构造函数注入</strong></li>
<li><strong>使用set方法注入（常用）</strong></li>
<li><strong>使用注解注入（后续学习）</strong></li>
</ol>
<p>（<a href="https://www.bilibili.com/video/BV1mE411X7yp?p=98" target="_blank" rel="noopener">视频讲解</a>）</p>
<h2 id="构造函数注入"><a class="markdownIt-Anchor" href="#构造函数注入"></a> 构造函数注入</h2>
<p><strong><a href="https://www.w3cschool.cn/wkspring/t7n41mm7.html" target="_blank" rel="noopener">Spring 基于构造函数的依赖注入</a></strong></p>
<p>首先修改一下AccountServiceImpl，代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> top.qing.service.impl;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> top.qing.service.AccountService;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title">AccountService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 如果是经常变化的数据，并不适用于注入的方式</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Date birthday;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AccountServiceImpl</span><span class="params">(String name, Integer age, Date birthday)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">        <span class="keyword">this</span>.birthday = birthday;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"AccountServiceImpl&#123;"</span> +</span><br><span class="line">                <span class="string">"name='"</span> + name + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", age="</span> + age +</span><br><span class="line">                <span class="string">", birthday="</span> + birthday +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveAccount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"service中的saveAccount方法执行了"</span>);</span><br><span class="line">        System.out.println(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后在bean.xml中：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--构造函数注入--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountService"</span> <span class="attr">class</span>=<span class="string">"top.qing.service.impl.AccountServiceImpl"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"杰瑞"</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">value</span>=<span class="string">"18"</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"birthday"</span> <span class="attr">ref</span>=<span class="string">"date"</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--配置一个日期对象--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"date"</span> <span class="attr">class</span>=<span class="string">"java.util.Date"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>构造函数注入：通过**<code>&lt;constructor-arg&gt;</code>标签**。标签在<code>&lt;bean&gt;</code>标签的内部</p>
<p><code>&lt;constructor-arg&gt;</code>标签中的属性：</p>
<ul>
<li>
<p><strong>type</strong>：用于指定要注入的数据的数据类型，该数据类型也是构造函数中某个或某些参数的类型</p>
</li>
<li>
<p><strong>index</strong>：用于指定要注入的数据给构造函数中指定索引位置的参数赋值。索引的位置是从0开始</p>
</li>
<li>
<p><strong>name：用于指定给构造函数中指定名称的参数赋值（常用）</strong></p>
<p>以上三个用于指定给构造函数中哪个参数赋值</p>
</li>
<li>
<p><strong>value：用于提供<mark>基本类型</mark>和<mark>String类型</mark>的数据</strong></p>
</li>
<li>
<p><strong>ref：用于指定其他的<mark>bean类型</mark>数据，它指的就是在spring的Ioc核心容器中出现过的bean对象</strong></p>
</li>
</ul>
</blockquote>
<p>用于模拟表现层的代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> top.qing.ui;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"><span class="keyword">import</span> top.qing.service.AccountService;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 模拟一个表现层（客户端）</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取Spring的IoC核心容器，并根据id获取对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 1.使用ApplicationContext接口，获取Spring核心容器对象</span></span><br><span class="line">        ApplicationContext applicationContext = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"bean.xml"</span>);</span><br><span class="line">        <span class="comment">// 2.根据bean.xml文件中&lt;bean&gt;标签的的id来获取对象</span></span><br><span class="line">        AccountService accountService = (AccountService) applicationContext.getBean(<span class="string">"accountService"</span>);</span><br><span class="line">        accountService.saveAccount();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果如下：</p>
<p><img src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220504104834.png" alt="" /></p>
<p>关于构造函数注入的优缺点：</p>
<ul>
<li>优点：在获取bean对象时，注入数据是必须的操作，否则对象无法创建成功</li>
<li>缺点：改变了bean对象的实例化方式，使我们在创建对象时，如果用不到这些数据，也必须提供</li>
</ul>
<h2 id="set方法注入"><a class="markdownIt-Anchor" href="#set方法注入"></a> set方法注入</h2>
<p><strong><a href="https://www.w3cschool.cn/wkspring/vneb1mm9.html" target="_blank" rel="noopener">Spring 基于设值函数的依赖注入</a></strong></p>
<p>创建AccountServiceImpl2代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> top.qing.service.impl;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> top.qing.service.AccountService;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl2</span> <span class="keyword">implements</span> <span class="title">AccountService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 如果是经常变化的数据，并不适用于注入的方式</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Date birthday;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(Integer age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBirthday</span><span class="params">(Date birthday)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.birthday = birthday;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"AccountServiceImpl2&#123;"</span> +</span><br><span class="line">                <span class="string">"name='"</span> + name + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", age="</span> + age +</span><br><span class="line">                <span class="string">", birthday="</span> + birthday +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveAccount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"service中的saveAccount方法执行了"</span>);</span><br><span class="line">        System.out.println(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后在bean.xml中添加代码如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--set方法注入--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountServiceImpl2"</span> <span class="attr">class</span>=<span class="string">"top.qing.service.impl.AccountServiceImpl2"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"tom"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">value</span>=<span class="string">"20"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"birthday"</span> <span class="attr">ref</span>=<span class="string">"date"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--配置一个日期对象--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"date"</span> <span class="attr">class</span>=<span class="string">"java.util.Date"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>set方法注入（常用），使用在<code>&lt;bean&gt;</code>标签内部的**<code>&lt;property&gt;</code>标签**</p>
<p><code>&lt;property&gt;</code>标签中的属性</p>
<ul>
<li><strong>name：用于指定注入时所调用的属性</strong>（<strong>属性根据set方法名判断</strong>，比如如果是setName那么属性就为name，如果是setUserName，那么属性就为username）</li>
<li><strong>value：用于提供<mark>基本类型</mark>和<mark>String类型</mark>的数据</strong></li>
<li><strong>ref：用于指定其他的<mark>bean类型</mark>数据。它指的就是在spring的Ioc核心容器中出现过的bean对象</strong></li>
</ul>
</blockquote>
<p>用于模拟表现层的代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// 1.使用ApplicationContext接口，获取Spring核心容器对象</span></span><br><span class="line">    ApplicationContext applicationContext = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"bean.xml"</span>);</span><br><span class="line">    <span class="comment">// 2.根据bean.xml文件中&lt;bean&gt;标签的的id来获取对象</span></span><br><span class="line">    AccountService accountService = (AccountService) applicationContext.getBean(<span class="string">"accountServiceImpl2"</span>);</span><br><span class="line">    accountService.saveAccount();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果如下：</p>
<p><img src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220504104848.png" alt="" /></p>
<p>关于set方法注入的优缺点：</p>
<ul>
<li>优点：创建对象时没有明确的限制，可以直接使用默认构造函数</li>
<li>缺点：如果有某个成员必须有值，则获取对象时有可能set方法没有执行</li>
</ul>
<blockquote>
<p>在基于构造函数注入和基于设值函数注入中的 Beans.xml 文件的唯一的区别就是：<strong>在基于构造函数注入中，我们使用的是<code>&lt;bean&gt;</code>标签中的<code>&lt;constructor-arg&gt;</code>元素；而在基于设值函数的注入中，我们使用的是<code>&lt;bean&gt;</code>标签中的<code>&lt;property&gt;</code>元素。</strong></p>
</blockquote>
<h2 id="注入集合数据"><a class="markdownIt-Anchor" href="#注入集合数据"></a> 注入集合数据</h2>
<p><strong><a href="https://www.w3cschool.cn/wkspring/kp5i1ico.html" target="_blank" rel="noopener">Spring 注入集合</a></strong></p>
<p>上面我们学习了两种依赖注入的方式，也成功注入了<strong>基本数据类型</strong>、<strong>String类型</strong>以及<strong>bean类型</strong>。</p>
<p>接下来我们学习一下<strong>注入集合数据</strong></p>
<p>创建AccountServiceImpl3代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> top.qing.service.impl;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> top.qing.service.AccountService;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl3</span> <span class="keyword">implements</span> <span class="title">AccountService</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String[] myStrs;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; myList;</span><br><span class="line">    <span class="keyword">private</span> Set&lt;String&gt; mySet;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,String&gt; myMap;</span><br><span class="line">    <span class="keyword">private</span> Properties myProps;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMyStrs</span><span class="params">(String[] myStrs)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.myStrs = myStrs;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMyList</span><span class="params">(List&lt;String&gt; myList)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.myList = myList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMySet</span><span class="params">(Set&lt;String&gt; mySet)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.mySet = mySet;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMyMap</span><span class="params">(Map&lt;String, String&gt; myMap)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.myMap = myMap;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMyProps</span><span class="params">(Properties myProps)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.myProps = myProps;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"AccountServiceImpl3&#123;"</span> +</span><br><span class="line">                <span class="string">"myStrs="</span> + Arrays.toString(myStrs) + <span class="string">"\n"</span> +</span><br><span class="line">                <span class="string">", myList="</span> + myList + <span class="string">"\n"</span> +</span><br><span class="line">                <span class="string">", mySet="</span> + mySet + <span class="string">"\n"</span> +</span><br><span class="line">                <span class="string">", myMap="</span> + myMap + <span class="string">"\n"</span> +</span><br><span class="line">                <span class="string">", myProps="</span> + myProps +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveAccount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"service中的saveAccount方法执行了"</span>);</span><br><span class="line">        System.out.println(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后在bean.xml中添加代码如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--注入集合数据--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountServiceImpl3"</span> <span class="attr">class</span>=<span class="string">"top.qing.service.impl.AccountServiceImpl3"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"myStrs"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>aaaAry<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>BB<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>Ccc<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"myList"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>aaaList<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>BB<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>Ccc<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"mySet"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>aaaSet<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>BB<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>Ccc<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"myMap"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"jj"</span> <span class="attr">value</span>=<span class="string">"林俊杰"</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"jay"</span> <span class="attr">value</span>=<span class="string">"周杰伦"</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"myProps"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"jay"</span>&gt;</span>周杰伦<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"jj"</span>&gt;</span>林俊杰<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong><mark>注意</mark></strong>：</p>
<ul>
<li><strong>用于给List结构集合注入的标签：<code>&lt;list &gt;</code>，<code>&lt;array&gt;</code>，<code>&lt;set&gt;</code></strong></li>
<li><strong>用于个Map结构集合注入的标签：<code>&lt;map&gt;</code>，<code>&lt;props&gt;</code></strong></li>
</ul>
<p><strong>结构相同的话，对应的标签可以随意选择</strong>（我们只需要<strong>注意区分List结构和Map结构就行</strong>）</p>
</blockquote>
<p>用于模拟表现层的代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// 1.使用ApplicationContext接口，获取Spring核心容器对象</span></span><br><span class="line">    ApplicationContext applicationContext = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"bean.xml"</span>);</span><br><span class="line">    <span class="comment">// 2.根据bean.xml文件中&lt;bean&gt;标签的的id来获取对象</span></span><br><span class="line">    AccountService accountService = (AccountService) applicationContext.getBean(<span class="string">"accountServiceImpl3"</span>);</span><br><span class="line">    accountService.saveAccount();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果如下：</p>
<p><img src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220504104900.png" alt="" /></p>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:qingbo1011@163.com">qingbo</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://www.qingbo1011.top/2021/05/13/Spring01/">http://www.qingbo1011.top/2021/05/13/Spring01/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://www.qingbo1011.top" target="_blank">Qing's Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/SSM/">SSM</a><a class="post-meta__tags" href="/tags/Spring/">Spring</a></div><div class="post_share"><div class="social-share" data-image="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20231003161115.png" data-sites="wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2021/05/17/Spring02/"><img class="prev_cover" src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220504095341.png" onerror="onerror=null;src='https://gitee.com/qingyu1011/blog_img/raw/master/img/20201006230435.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Spring（二）</div></div></a></div><div class="next-post pull_right"><a href="/2021/05/10/Mybatis04/"><img class="next_cover" src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220504105319.png" onerror="onerror=null;src='https://gitee.com/qingyu1011/blog_img/raw/master/img/20201006230435.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Mybatis（四）</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2021/05/17/Spring02/" title="Spring（二）"><img class="relatedPosts_cover" src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220504095341.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2021-05-17</div><div class="relatedPosts_title">Spring（二）</div></div></a></div><div class="relatedPosts_item"><a href="/2021/04/28/Mybatis01/" title="Mybatis（一）"><img class="relatedPosts_cover" src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220504105319.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2021-04-28</div><div class="relatedPosts_title">Mybatis（一）</div></div></a></div><div class="relatedPosts_item"><a href="/2021/04/30/Mybatis02/" title="Mybatis（二）"><img class="relatedPosts_cover" src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220504105319.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2021-04-30</div><div class="relatedPosts_title">Mybatis（二）</div></div></a></div><div class="relatedPosts_item"><a href="/2021/05/08/Mybatis03/" title="Mybatis（三）"><img class="relatedPosts_cover" src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220504105319.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2021-05-08</div><div class="relatedPosts_title">Mybatis（三）</div></div></a></div><div class="relatedPosts_item"><a href="/2021/05/10/Mybatis04/" title="Mybatis（四）"><img class="relatedPosts_cover" src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220504105319.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2021-05-10</div><div class="relatedPosts_title">Mybatis（四）</div></div></a></div><div class="relatedPosts_item"><a href="/2021/04/27/Spring整合c3p0使用@PropertySource注解遇到的问题/" title="Spring整合c3p0使用@PropertySource注解遇到的问题"><img class="relatedPosts_cover" src="https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502155231.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2021-04-27</div><div class="relatedPosts_title">Spring整合c3p0使用@PropertySource注解遇到的问题</div></div></a></div></div><div class="clear_both"></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> 评论</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var requestSetting = function (from,set) {
  var from = from
  var setting = set.split(',').filter(function(item){
  return from.indexOf(item) > -1
  });
  setting = setting.length == 0 ? from :setting;
  return setting
}

var guestInfo = requestSetting(['nick','mail','link'],'nick,mail,link')
var requiredFields = requestSetting(['nick','mail','link'],'nick,mail')

window.valine = new Valine({
  el:'#vcomment',
  appId: 'oNS5Emx1qUL3wN5yvPLKol0W-gzGzoHsz',
  appKey: 'ytbw0ho3DMX0FeoAOWa37lf9',
  notify: false,
  verify: false,
  placeholder: 'Stay hungry,stay foolish~',
  avatar: 'monsterid',
  meta: guestInfo,
  pageSize: '10',
  lang: 'zh-CN',
  recordIP: false,
  serverURLs: '',
  emojiCDN: 'https://',
  emojiMaps: {"欢呼":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502100836.gif","笑眼":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502100849.gif","花心":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502100907.gif","吐舌":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502100937.gif","疑问":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502100951.gif","滑稽":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502101004.gif","太开心":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502101017.gif","酷":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502101029.gif","怒":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502101044.gif","阴险":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502101100.gif","委屈":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502101116.gif","乖":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502101129.gif","你懂的":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502101204.gif","小乖":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502101215.gif","突然兴奋":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502101228.gif","喷":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502101241.gif","哈哈":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502101255.gif","喝酒":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502101305.gif","汗":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502101323.gif","笑尿":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502102004.gif","嘿嘿嘿":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502102018.gif","真棒":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502102047.gif","托腮":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502102108.gif","微笑":"https://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/e3/2018new_weixioa02_org.png","礼貌":"https://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/09/2018new_keai_org.png","笑哭":"https://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/4a/2018new_xiaoku_thumb.png","无奈":"https://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/83/2018new_kuxiao_org.png","爱你":"https://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/f6/2018new_aini_org.png","吃瓜":"https://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/01/2018new_chigua_thumb.png","doge":"https://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/a1/2018new_doge02_org.png","dog":"https://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/22/2018new_erha_org.png","cat":"https://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/7b/2018new_miaomiao_thumb.png","星星眼":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502102225.png","酸了":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502102240.png","大哭":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502102254.png","傲娇":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502102314.png","给心心":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502102328.png","嘿哈":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502102345.png","custom0":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502101410.gif","custom1":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502101424.webp","狗头":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502101710.png","搬砖中":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502101744.png","忙到飞起":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502102411.png","裂开":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502102426.png","叹气":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502102439.png","让我看看":"https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220502102456.png","panda0":"https://bbs.res.meizu.com/static/image/smiley/panda/_000.png","panda1":"https://bbs.res.meizu.com/static/image/smiley/panda/_001.png","panda2":"https://bbs.res.meizu.com/static/image/smiley/panda/_002.png","panda3":"https://bbs.res.meizu.com/static/image/smiley/panda/_003.png","panda4":"https://bbs.res.meizu.com/static/image/smiley/panda/_004.png","panda5":"https://bbs.res.meizu.com/static/image/smiley/panda/_005.png","panda6":"https://bbs.res.meizu.com/static/image/smiley/panda/_006.png","panda7":"https://bbs.res.meizu.com/static/image/smiley/panda/_007.png","panda8":"https://bbs.res.meizu.com/static/image/smiley/panda/_008.png","panda9":"https://bbs.res.meizu.com/static/image/smiley/panda/_009.png","panda10":"https://bbs.res.meizu.com/static/image/smiley/panda/_010.png","panda11":"https://bbs.res.meizu.com/static/image/smiley/panda/_011.png","panda12":"https://bbs.res.meizu.com/static/image/smiley/panda/_012.png","panda13":"https://bbs.res.meizu.com/static/image/smiley/panda/_013.png","panda14":"https://bbs.res.meizu.com/static/image/smiley/panda/_014.png","panda15":"https://bbs.res.meizu.com/static/image/smiley/panda/_015.png","panda16":"https://bbs.res.meizu.com/static/image/smiley/panda/_016.png","panda17":"https://bbs.res.meizu.com/static/image/smiley/panda/_017.png","panda18":"https://bbs.res.meizu.com/static/image/smiley/panda/_018.png","panda19":"https://bbs.res.meizu.com/static/image/smiley/panda/_019.png","panda20":"https://bbs.res.meizu.com/static/image/smiley/panda/_020.png","panda21":"https://bbs.res.meizu.com/static/image/smiley/panda/_021.png","panda22":"https://bbs.res.meizu.com/static/image/smiley/panda/_022.png","panda23":"https://bbs.res.meizu.com/static/image/smiley/panda/_023.png","panda24":"https://bbs.res.meizu.com/static/image/smiley/panda/_024.png","panda25":"https://bbs.res.meizu.com/static/image/smiley/panda/_025.png","panda26":"https://bbs.res.meizu.com/static/image/smiley/panda/_026.png","panda27":"https://bbs.res.meizu.com/static/image/smiley/panda/_027.png","panda28":"https://bbs.res.meizu.com/static/image/smiley/panda/_028.png","panda29":"https://bbs.res.meizu.com/static/image/smiley/panda/_029.png"},
  enableQQ: false,
  requiredFields: requiredFields
});</script></div></article></main><footer id="footer" style="background-image: url(https://img-qingbo.oss-cn-beijing.aliyuncs.com/img/20220504095341.png)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By qingbo</div><div class="framework-info"><span>驱动 </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div><div class="footer_custom_text">宇宙很大，生活更大</div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="/js/third-party/fireworks.js"></script><script id="ribbon_piao" mobile="false" src="/js/third-party/piao.js"></script><script src="/js/third-party/activate-power-mode.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
document.body.addEventListener('input', POWERMODE);
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="/js/search/local-search.js"></script></body></html>